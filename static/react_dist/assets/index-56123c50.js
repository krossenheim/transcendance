import{C as le,E as Fp,S as Ap,A as Zp,V as un,H as Wp,D as Bp,a as Gp,b as Vp,P as Hp,e as Jp,c as Co,M as ia,d as Qp}from"./babylon-6de8ad64.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Kp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tc={exports:{}},Fs={},$c={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=Symbol.for("react.element"),qp=Symbol.for("react.portal"),Yp=Symbol.for("react.fragment"),Xp=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),sm=Symbol.for("react.memo"),am=Symbol.for("react.lazy"),Hi=Symbol.iterator;function lm(e){return e===null||typeof e!="object"?null:(e=Hi&&e[Hi]||e["@@iterator"],typeof e=="function"?e:null)}var Dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oc=Object.assign,Lc={};function zr(e,t,n){this.props=e,this.context=t,this.refs=Lc,this.updater=n||Dc}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mc(){}Mc.prototype=zr.prototype;function Ul(e,t,n){this.props=e,this.context=t,this.refs=Lc,this.updater=n||Dc}var Fl=Ul.prototype=new Mc;Fl.constructor=Ul;Oc(Fl,zr.prototype);Fl.isPureReactComponent=!0;var Ji=Array.isArray,Uc=Object.prototype.hasOwnProperty,Al={current:null},Fc={key:!0,ref:!0,__self:!0,__source:!0};function Ac(e,t,n){var r,o={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Uc.call(t,r)&&!Fc.hasOwnProperty(r)&&(o[r]=t[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return{$$typeof:ko,type:e,key:s,ref:a,props:o,_owner:Al.current}}function im(e,t){return{$$typeof:ko,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ko}function um(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qi=/\/+/g;function ua(e,t){return typeof e=="object"&&e!==null&&e.key!=null?um(""+e.key):t.toString(36)}function Yo(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ko:case qp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+ua(a,0):r,Ji(o)?(n="",e!=null&&(n=e.replace(Qi,"$&/")+"/"),Yo(o,t,n,"",function(c){return c})):o!=null&&(Zl(o)&&(o=im(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Qi,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Ji(e))for(var i=0;i<e.length;i++){s=e[i];var u=r+ua(s,i);a+=Yo(s,t,n,u,o)}else if(u=lm(e),typeof u=="function")for(e=u.call(e),i=0;!(s=e.next()).done;)s=s.value,u=r+ua(s,i++),a+=Yo(s,t,n,u,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Eo(e,t,n){if(e==null)return e;var r=[],o=0;return Yo(e,r,"","",function(s){return t.call(n,s,o++)}),r}function cm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},Xo={transition:null},dm={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Xo,ReactCurrentOwner:Al};function Zc(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Eo,forEach:function(e,t,n){Eo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Eo(e,function(){t++}),t},toArray:function(e){return Eo(e,function(t){return t})||[]},only:function(e){if(!Zl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=zr;se.Fragment=Yp;se.Profiler=em;se.PureComponent=Ul;se.StrictMode=Xp;se.Suspense=om;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dm;se.act=Zc;se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Oc({},e.props),o=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Al.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)Uc.call(t,u)&&!Fc.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:ko,type:e.type,key:o,ref:s,props:r,_owner:a}};se.createContext=function(e){return e={$$typeof:nm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tm,_context:e},e.Consumer=e};se.createElement=Ac;se.createFactory=function(e){var t=Ac.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:rm,render:e}};se.isValidElement=Zl;se.lazy=function(e){return{$$typeof:am,_payload:{_status:-1,_result:e},_init:cm}};se.memo=function(e,t){return{$$typeof:sm,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Xo.transition;Xo.transition={};try{e()}finally{Xo.transition=t}};se.unstable_act=Zc;se.useCallback=function(e,t){return lt.current.useCallback(e,t)};se.useContext=function(e){return lt.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};se.useEffect=function(e,t){return lt.current.useEffect(e,t)};se.useId=function(){return lt.current.useId()};se.useImperativeHandle=function(e,t,n){return lt.current.useImperativeHandle(e,t,n)};se.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return lt.current.useMemo(e,t)};se.useReducer=function(e,t,n){return lt.current.useReducer(e,t,n)};se.useRef=function(e){return lt.current.useRef(e)};se.useState=function(e){return lt.current.useState(e)};se.useSyncExternalStore=function(e,t,n){return lt.current.useSyncExternalStore(e,t,n)};se.useTransition=function(){return lt.current.useTransition()};se.version="18.3.1";$c.exports=se;var v=$c.exports;const xt=Kp(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=v,pm=Symbol.for("react.element"),mm=Symbol.for("react.fragment"),gm=Object.prototype.hasOwnProperty,hm=fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ym={key:!0,ref:!0,__self:!0,__source:!0};function Wc(e,t,n){var r,o={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gm.call(t,r)&&!ym.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:pm,type:e,key:s,ref:a,props:o,_owner:hm.current}}Fs.Fragment=mm;Fs.jsx=Wc;Fs.jsxs=Wc;Tc.exports=Fs;var l=Tc.exports,Ua={},Bc={exports:{}},_t={},Gc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,G){var H=U.length;U.push(G);e:for(;0<H;){var de=H-1>>>1,K=U[de];if(0<o(K,G))U[de]=G,U[H]=K,H=de;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],H=U.pop();if(H!==G){U[0]=H;e:for(var de=0,K=U.length,Y=K>>>1;de<Y;){var F=2*(de+1)-1,X=U[F],te=F+1,ve=U[te];if(0>o(X,H))te<K&&0>o(ve,X)?(U[de]=ve,U[te]=H,de=te):(U[de]=X,U[F]=H,de=F);else if(te<K&&0>o(ve,H))U[de]=ve,U[te]=H,de=te;else break e}}return G}function o(U,G){var H=U.sortIndex-G.sortIndex;return H!==0?H:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],m=1,f=null,h=3,w=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=U)r(c),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(c)}}function x(U){if(_=!1,g(U),!y)if(n(u)!==null)y=!0,Oe(I);else{var G=n(c);G!==null&&rt(x,G.startTime-U)}}function I(U,G){y=!1,_&&(_=!1,p(k),k=-1),w=!0;var H=h;try{for(g(G),f=n(u);f!==null&&(!(f.expirationTime>G)||U&&!A());){var de=f.callback;if(typeof de=="function"){f.callback=null,h=f.priorityLevel;var K=de(f.expirationTime<=G);G=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),g(G)}else r(u);f=n(u)}if(f!==null)var Y=!0;else{var F=n(c);F!==null&&rt(x,F.startTime-G),Y=!1}return Y}finally{f=null,h=H,w=!1}}var z=!1,j=null,k=-1,M=5,E=-1;function A(){return!(e.unstable_now()-E<M)}function J(){if(j!==null){var U=e.unstable_now();E=U;var G=!0;try{G=j(!0,U)}finally{G?xe():(z=!1,j=null)}}else z=!1}var xe;if(typeof d=="function")xe=function(){d(J)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Ge=Ue.port2;Ue.port1.onmessage=J,xe=function(){Ge.postMessage(null)}}else xe=function(){b(J,0)};function Oe(U){j=U,z||(z=!0,xe())}function rt(U,G){k=b(function(){U(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){y||w||(y=!0,Oe(I))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var H=h;h=G;try{return U()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=h;h=U;try{return G()}finally{h=H}},e.unstable_scheduleCallback=function(U,G,H){var de=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?de+H:de):H=de,U){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,U={id:m++,callback:G,priorityLevel:U,startTime:H,expirationTime:K,sortIndex:-1},H>de?(U.sortIndex=H,t(c,U),n(u)===null&&U===n(c)&&(_?(p(k),k=-1):_=!0,rt(x,H-de))):(U.sortIndex=K,t(u,U),y||w||(y=!0,Oe(I))),U},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(U){var G=h;return function(){var H=h;h=G;try{return U.apply(this,arguments)}finally{h=H}}}})(Vc);Gc.exports=Vc;var vm=Gc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=v,bt=vm;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hc=new Set,no={};function Hn(e,t){kr(e,t),kr(e+"Capture",t)}function kr(e,t){for(no[e]=t,e=0;e<t.length;e++)Hc.add(t[e])}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fa=Object.prototype.hasOwnProperty,wm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ki={},qi={};function km(e){return Fa.call(qi,e)?!0:Fa.call(Ki,e)?!1:wm.test(e)?qi[e]=!0:(Ki[e]=!0,!1)}function bm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _m(e,t,n,r){if(t===null||typeof t>"u"||bm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,n,r,o,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wl=/[\-:]([a-z])/g;function Bl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wl,Bl);qe[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wl,Bl);qe[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wl,Bl);qe[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gl(e,t,n,r){var o=qe.hasOwnProperty(t)?qe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_m(t,n,o,r)&&(n=null),r||o===null?km(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ln=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Po=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Vl=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Jc=Symbol.for("react.provider"),Qc=Symbol.for("react.context"),Hl=Symbol.for("react.forward_ref"),Za=Symbol.for("react.suspense"),Wa=Symbol.for("react.suspense_list"),Jl=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),Kc=Symbol.for("react.offscreen"),Yi=Symbol.iterator;function $r(e){return e===null||typeof e!="object"?null:(e=Yi&&e[Yi]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,ca;function Wr(e){if(ca===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ca=t&&t[1]||""}return`
`+ca+e}var da=!1;function fa(e,t){if(!e||da)return"";da=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),a=o.length-1,i=s.length-1;1<=a&&0<=i&&o[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==s[i]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{da=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wr(e):""}function Sm(e){switch(e.tag){case 5:return Wr(e.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 2:case 15:return e=fa(e.type,!1),e;case 11:return e=fa(e.type.render,!1),e;case 1:return e=fa(e.type,!0),e;default:return""}}function Ba(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case er:return"Portal";case Aa:return"Profiler";case Vl:return"StrictMode";case Za:return"Suspense";case Wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qc:return(e.displayName||"Context")+".Consumer";case Jc:return(e._context.displayName||"Context")+".Provider";case Hl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jl:return t=e.displayName||null,t!==null?t:Ba(e.type)||"Memo";case dn:t=e._payload,e=e._init;try{return Ba(e(t))}catch{}}return null}function Nm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ba(t);case 8:return t===Vl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jm(e){var t=qc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zo(e){e._valueTracker||(e._valueTracker=jm(e))}function Yc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ga(e,t){var n=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xi(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Nn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xc(e,t){t=t.checked,t!=null&&Gl(e,"checked",t,!1)}function Va(e,t){Xc(e,t);var n=Nn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ha(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ha(e,t.type,Nn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ha(e,t,n){(t!=="number"||ds(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Br=Array.isArray;function mr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Nn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ja(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Br(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Nn(n)}}function ed(e,t){var n=Nn(t.value),r=Nn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function td(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?td(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ro,nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ro=Ro||document.createElement("div"),Ro.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ro.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ro(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Im=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(e){Im.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hr[t]=Hr[e]})});function rd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hr.hasOwnProperty(e)&&Hr[e]?(""+t).trim():t+"px"}function od(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=rd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Cm=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(Cm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function qa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ya=null;function Ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,gr=null,hr=null;function ru(e){if(e=So(e)){if(typeof Xa!="function")throw Error($(280));var t=e.stateNode;t&&(t=Gs(t),Xa(e.stateNode,e.type,t))}}function sd(e){gr?hr?hr.push(e):hr=[e]:gr=e}function ad(){if(gr){var e=gr,t=hr;if(hr=gr=null,ru(e),t)for(e=0;e<t.length;e++)ru(t[e])}}function ld(e,t){return e(t)}function id(){}var pa=!1;function ud(e,t,n){if(pa)return e(t,n);pa=!0;try{return ld(e,t,n)}finally{pa=!1,(gr!==null||hr!==null)&&(id(),ad())}}function oo(e,t){var n=e.stateNode;if(n===null)return null;var r=Gs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var el=!1;if(rn)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){el=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{el=!1}function Em(e,t,n,r,o,s,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var Jr=!1,fs=null,ps=!1,tl=null,Pm={onError:function(e){Jr=!0,fs=e}};function zm(e,t,n,r,o,s,a,i,u){Jr=!1,fs=null,Em.apply(Pm,arguments)}function Rm(e,t,n,r,o,s,a,i,u){if(zm.apply(this,arguments),Jr){if(Jr){var c=fs;Jr=!1,fs=null}else throw Error($(198));ps||(ps=!0,tl=c)}}function Jn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ou(e){if(Jn(e)!==e)throw Error($(188))}function Tm(e){var t=e.alternate;if(!t){if(t=Jn(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return ou(o),e;if(s===r)return ou(o),t;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=o,r=s;else{for(var a=!1,i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function dd(e){return e=Tm(e),e!==null?fd(e):null}function fd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fd(e);if(t!==null)return t;e=e.sibling}return null}var pd=bt.unstable_scheduleCallback,su=bt.unstable_cancelCallback,$m=bt.unstable_shouldYield,Dm=bt.unstable_requestPaint,De=bt.unstable_now,Om=bt.unstable_getCurrentPriorityLevel,Kl=bt.unstable_ImmediatePriority,md=bt.unstable_UserBlockingPriority,ms=bt.unstable_NormalPriority,Lm=bt.unstable_LowPriority,gd=bt.unstable_IdlePriority,As=null,Ht=null;function Mm(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(As,e,void 0,(e.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Am,Um=Math.log,Fm=Math.LN2;function Am(e){return e>>>=0,e===0?32:31-(Um(e)/Fm|0)|0}var To=64,$o=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~o;i!==0?r=Gr(i):(s&=a,s!==0&&(r=Gr(s)))}else a=n&~o,a!==0?r=Gr(a):s!==0&&(r=Gr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-At(t),o=1<<n,r|=e[n],t&=~o;return r}function Zm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-At(s),i=1<<a,u=o[a];u===-1?(!(i&n)||i&r)&&(o[a]=Zm(i,t)):u<=t&&(e.expiredLanes|=i),s&=~i}}function nl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hd(){var e=To;return To<<=1,!(To&4194240)&&(To=64),e}function ma(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-At(t),e[t]=n}function Bm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-At(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function ql(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-At(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var he=0;function yd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vd,Yl,xd,wd,kd,rl=!1,Do=[],yn=null,vn=null,xn=null,so=new Map,ao=new Map,pn=[],Gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(e,t){switch(e){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":so.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(t.pointerId)}}function Or(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=So(t),t!==null&&Yl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Vm(e,t,n,r,o){switch(t){case"focusin":return yn=Or(yn,e,t,n,r,o),!0;case"dragenter":return vn=Or(vn,e,t,n,r,o),!0;case"mouseover":return xn=Or(xn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return so.set(s,Or(so.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,ao.set(s,Or(ao.get(s)||null,e,t,n,r,o)),!0}return!1}function bd(e){var t=On(e.target);if(t!==null){var n=Jn(t);if(n!==null){if(t=n.tag,t===13){if(t=cd(n),t!==null){e.blockedOn=t,kd(e.priority,function(){xd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function es(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ol(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ya=r,n.target.dispatchEvent(r),Ya=null}else return t=So(n),t!==null&&Yl(t),e.blockedOn=n,!1;t.shift()}return!0}function lu(e,t,n){es(e)&&n.delete(t)}function Hm(){rl=!1,yn!==null&&es(yn)&&(yn=null),vn!==null&&es(vn)&&(vn=null),xn!==null&&es(xn)&&(xn=null),so.forEach(lu),ao.forEach(lu)}function Lr(e,t){e.blockedOn===t&&(e.blockedOn=null,rl||(rl=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,Hm)))}function lo(e){function t(o){return Lr(o,e)}if(0<Do.length){Lr(Do[0],e);for(var n=1;n<Do.length;n++){var r=Do[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yn!==null&&Lr(yn,e),vn!==null&&Lr(vn,e),xn!==null&&Lr(xn,e),so.forEach(t),ao.forEach(t),n=0;n<pn.length;n++)r=pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<pn.length&&(n=pn[0],n.blockedOn===null);)bd(n),n.blockedOn===null&&pn.shift()}var yr=ln.ReactCurrentBatchConfig,hs=!0;function Jm(e,t,n,r){var o=he,s=yr.transition;yr.transition=null;try{he=1,Xl(e,t,n,r)}finally{he=o,yr.transition=s}}function Qm(e,t,n,r){var o=he,s=yr.transition;yr.transition=null;try{he=4,Xl(e,t,n,r)}finally{he=o,yr.transition=s}}function Xl(e,t,n,r){if(hs){var o=ol(e,t,n,r);if(o===null)Sa(e,t,r,ys,n),au(e,r);else if(Vm(o,e,t,n,r))r.stopPropagation();else if(au(e,r),t&4&&-1<Gm.indexOf(e)){for(;o!==null;){var s=So(o);if(s!==null&&vd(s),s=ol(e,t,n,r),s===null&&Sa(e,t,r,ys,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Sa(e,t,r,null,n)}}var ys=null;function ol(e,t,n,r){if(ys=null,e=Ql(r),e=On(e),e!==null)if(t=Jn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ys=e,null}function _d(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Om()){case Kl:return 1;case md:return 4;case ms:case Lm:return 16;case gd:return 536870912;default:return 16}default:return 16}}var gn=null,ei=null,ts=null;function Sd(){if(ts)return ts;var e,t=ei,n=t.length,r,o="value"in gn?gn.value:gn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[s-r];r++);return ts=o.slice(e,1<r?1-r:void 0)}function ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Oo(){return!0}function iu(){return!1}function St(e){function t(n,r,o,s,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oo:iu,this.isPropagationStopped=iu,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),t}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ti=St(Rr),_o=Ee({},Rr,{view:0,detail:0}),Km=St(_o),ga,ha,Mr,Zs=Ee({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mr&&(Mr&&e.type==="mousemove"?(ga=e.screenX-Mr.screenX,ha=e.screenY-Mr.screenY):ha=ga=0,Mr=e),ga)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),uu=St(Zs),qm=Ee({},Zs,{dataTransfer:0}),Ym=St(qm),Xm=Ee({},_o,{relatedTarget:0}),ya=St(Xm),e0=Ee({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),t0=St(e0),n0=Ee({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r0=St(n0),o0=Ee({},Rr,{data:0}),cu=St(o0),s0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l0[e])?!!t[e]:!1}function ni(){return i0}var u0=Ee({},_o,{key:function(e){if(e.key){var t=s0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?a0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(e){return e.type==="keypress"?ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),c0=St(u0),d0=Ee({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),du=St(d0),f0=Ee({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),p0=St(f0),m0=Ee({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),g0=St(m0),h0=Ee({},Zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y0=St(h0),v0=[9,13,27,32],ri=rn&&"CompositionEvent"in window,Qr=null;rn&&"documentMode"in document&&(Qr=document.documentMode);var x0=rn&&"TextEvent"in window&&!Qr,Nd=rn&&(!ri||Qr&&8<Qr&&11>=Qr),fu=String.fromCharCode(32),pu=!1;function jd(e,t){switch(e){case"keyup":return v0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function w0(e,t){switch(e){case"compositionend":return Id(t);case"keypress":return t.which!==32?null:(pu=!0,fu);case"textInput":return e=t.data,e===fu&&pu?null:e;default:return null}}function k0(e,t){if(nr)return e==="compositionend"||!ri&&jd(e,t)?(e=Sd(),ts=ei=gn=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nd&&t.locale!=="ko"?null:t.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b0[e.type]:t==="textarea"}function Cd(e,t,n,r){sd(r),t=vs(t,"onChange"),0<t.length&&(n=new ti("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,io=null;function _0(e){Ud(e,0)}function Ws(e){var t=sr(e);if(Yc(t))return e}function S0(e,t){if(e==="change")return t}var Ed=!1;if(rn){var va;if(rn){var xa="oninput"in document;if(!xa){var gu=document.createElement("div");gu.setAttribute("oninput","return;"),xa=typeof gu.oninput=="function"}va=xa}else va=!1;Ed=va&&(!document.documentMode||9<document.documentMode)}function hu(){Kr&&(Kr.detachEvent("onpropertychange",Pd),io=Kr=null)}function Pd(e){if(e.propertyName==="value"&&Ws(io)){var t=[];Cd(t,io,e,Ql(e)),ud(_0,t)}}function N0(e,t,n){e==="focusin"?(hu(),Kr=t,io=n,Kr.attachEvent("onpropertychange",Pd)):e==="focusout"&&hu()}function j0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(io)}function I0(e,t){if(e==="click")return Ws(t)}function C0(e,t){if(e==="input"||e==="change")return Ws(t)}function E0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:E0;function uo(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Fa.call(t,o)||!Wt(e[o],t[o]))return!1}return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var n=yu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yu(n)}}function zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rd(){for(var e=window,t=ds();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ds(e.document)}return t}function oi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P0(e){var t=Rd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zd(n.ownerDocument.documentElement,n)){if(r!==null&&oi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=vu(n,s);var a=vu(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z0=rn&&"documentMode"in document&&11>=document.documentMode,rr=null,sl=null,qr=null,al=!1;function xu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;al||rr==null||rr!==ds(r)||(r=rr,"selectionStart"in r&&oi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qr&&uo(qr,r)||(qr=r,r=vs(sl,"onSelect"),0<r.length&&(t=new ti("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function Lo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var or={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},wa={},Td={};rn&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Bs(e){if(wa[e])return wa[e];if(!or[e])return e;var t=or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Td)return wa[e]=t[n];return e}var $d=Bs("animationend"),Dd=Bs("animationiteration"),Od=Bs("animationstart"),Ld=Bs("transitionend"),Md=new Map,wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){Md.set(e,t),Hn(t,[e])}for(var ka=0;ka<wu.length;ka++){var ba=wu[ka],R0=ba.toLowerCase(),T0=ba[0].toUpperCase()+ba.slice(1);En(R0,"on"+T0)}En($d,"onAnimationEnd");En(Dd,"onAnimationIteration");En(Od,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Ld,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vr));function ku(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Rm(r,t,void 0,e),e.currentTarget=null}function Ud(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==s&&o.isPropagationStopped())break e;ku(o,i,c),s=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==s&&o.isPropagationStopped())break e;ku(o,i,c),s=u}}}if(ps)throw e=tl,ps=!1,tl=null,e}function be(e,t){var n=t[dl];n===void 0&&(n=t[dl]=new Set);var r=e+"__bubble";n.has(r)||(Fd(t,e,2,!1),n.add(r))}function _a(e,t,n){var r=0;t&&(r|=4),Fd(n,e,r,t)}var Mo="_reactListening"+Math.random().toString(36).slice(2);function co(e){if(!e[Mo]){e[Mo]=!0,Hc.forEach(function(n){n!=="selectionchange"&&($0.has(n)||_a(n,!1,e),_a(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mo]||(t[Mo]=!0,_a("selectionchange",!1,t))}}function Fd(e,t,n,r){switch(_d(t)){case 1:var o=Jm;break;case 4:o=Qm;break;default:o=Xl}n=o.bind(null,t,n,e),o=void 0,!el||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Sa(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;i!==null;){if(a=On(i),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}i=i.parentNode}}r=r.return}ud(function(){var c=s,m=Ql(n),f=[];e:{var h=Md.get(e);if(h!==void 0){var w=ti,y=e;switch(e){case"keypress":if(ns(n)===0)break e;case"keydown":case"keyup":w=c0;break;case"focusin":y="focus",w=ya;break;case"focusout":y="blur",w=ya;break;case"beforeblur":case"afterblur":w=ya;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=p0;break;case $d:case Dd:case Od:w=t0;break;case Ld:w=g0;break;case"scroll":w=Km;break;case"wheel":w=y0;break;case"copy":case"cut":case"paste":w=r0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=du}var _=(t&4)!==0,b=!_&&e==="scroll",p=_?h!==null?h+"Capture":null:h;_=[];for(var d=c,g;d!==null;){g=d;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,p!==null&&(x=oo(d,p),x!=null&&_.push(fo(d,x,g)))),b)break;d=d.return}0<_.length&&(h=new w(h,y,null,n,m),f.push({event:h,listeners:_}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&n!==Ya&&(y=n.relatedTarget||n.fromElement)&&(On(y)||y[on]))break e;if((w||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,w?(y=n.relatedTarget||n.toElement,w=c,y=y?On(y):null,y!==null&&(b=Jn(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=c),w!==y)){if(_=uu,x="onMouseLeave",p="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(_=du,x="onPointerLeave",p="onPointerEnter",d="pointer"),b=w==null?h:sr(w),g=y==null?h:sr(y),h=new _(x,d+"leave",w,n,m),h.target=b,h.relatedTarget=g,x=null,On(m)===c&&(_=new _(p,d+"enter",y,n,m),_.target=g,_.relatedTarget=b,x=_),b=x,w&&y)t:{for(_=w,p=y,d=0,g=_;g;g=Yn(g))d++;for(g=0,x=p;x;x=Yn(x))g++;for(;0<d-g;)_=Yn(_),d--;for(;0<g-d;)p=Yn(p),g--;for(;d--;){if(_===p||p!==null&&_===p.alternate)break t;_=Yn(_),p=Yn(p)}_=null}else _=null;w!==null&&bu(f,h,w,_,!1),y!==null&&b!==null&&bu(f,b,y,_,!0)}}e:{if(h=c?sr(c):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var I=S0;else if(mu(h))if(Ed)I=C0;else{I=j0;var z=N0}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=I0);if(I&&(I=I(e,c))){Cd(f,I,n,m);break e}z&&z(e,h,c),e==="focusout"&&(z=h._wrapperState)&&z.controlled&&h.type==="number"&&Ha(h,"number",h.value)}switch(z=c?sr(c):window,e){case"focusin":(mu(z)||z.contentEditable==="true")&&(rr=z,sl=c,qr=null);break;case"focusout":qr=sl=rr=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,xu(f,n,m);break;case"selectionchange":if(z0)break;case"keydown":case"keyup":xu(f,n,m)}var j;if(ri)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else nr?jd(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Nd&&n.locale!=="ko"&&(nr||k!=="onCompositionStart"?k==="onCompositionEnd"&&nr&&(j=Sd()):(gn=m,ei="value"in gn?gn.value:gn.textContent,nr=!0)),z=vs(c,k),0<z.length&&(k=new cu(k,e,null,n,m),f.push({event:k,listeners:z}),j?k.data=j:(j=Id(n),j!==null&&(k.data=j)))),(j=x0?w0(e,n):k0(e,n))&&(c=vs(c,"onBeforeInput"),0<c.length&&(m=new cu("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:c}),m.data=j))}Ud(f,t)})}function fo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vs(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=oo(e,n),s!=null&&r.unshift(fo(e,s,o)),s=oo(e,t),s!=null&&r.push(fo(e,s,o))),e=e.return}return r}function Yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bu(e,t,n,r,o){for(var s=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,o?(u=oo(n,s),u!=null&&a.unshift(fo(n,u,i))):o||(u=oo(n,s),u!=null&&a.push(fo(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var D0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function _u(e){return(typeof e=="string"?e:""+e).replace(D0,`
`).replace(O0,"")}function Uo(e,t,n){if(t=_u(t),_u(e)!==t&&n)throw Error($(425))}function xs(){}var ll=null,il=null;function ul(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cl=typeof setTimeout=="function"?setTimeout:void 0,L0=typeof clearTimeout=="function"?clearTimeout:void 0,Su=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof Su<"u"?function(e){return Su.resolve(null).then(e).catch(U0)}:cl;function U0(e){setTimeout(function(){throw e})}function Na(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),lo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);lo(t)}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Tr,po="__reactProps$"+Tr,on="__reactContainer$"+Tr,dl="__reactEvents$"+Tr,F0="__reactListeners$"+Tr,A0="__reactHandles$"+Tr;function On(e){var t=e[Vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[on]||n[Vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nu(e);e!==null;){if(n=e[Vt])return n;e=Nu(e)}return t}e=n,n=e.parentNode}return null}function So(e){return e=e[Vt]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Gs(e){return e[po]||null}var fl=[],ar=-1;function Pn(e){return{current:e}}function _e(e){0>ar||(e.current=fl[ar],fl[ar]=null,ar--)}function we(e,t){ar++,fl[ar]=e.current,e.current=t}var jn={},nt=Pn(jn),pt=Pn(!1),Zn=jn;function br(e,t){var n=e.type.contextTypes;if(!n)return jn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mt(e){return e=e.childContextTypes,e!=null}function ws(){_e(pt),_e(nt)}function ju(e,t,n){if(nt.current!==jn)throw Error($(168));we(nt,t),we(pt,n)}function Ad(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error($(108,Nm(e)||"Unknown",o));return Ee({},n,r)}function ks(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jn,Zn=nt.current,we(nt,e),we(pt,pt.current),!0}function Iu(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Ad(e,t,Zn),r.__reactInternalMemoizedMergedChildContext=e,_e(pt),_e(nt),we(nt,e)):_e(pt),we(pt,n)}var qt=null,Vs=!1,ja=!1;function Zd(e){qt===null?qt=[e]:qt.push(e)}function Z0(e){Vs=!0,Zd(e)}function zn(){if(!ja&&qt!==null){ja=!0;var e=0,t=he;try{var n=qt;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qt=null,Vs=!1}catch(o){throw qt!==null&&(qt=qt.slice(e+1)),pd(Kl,zn),o}finally{he=t,ja=!1}}return null}var lr=[],ir=0,bs=null,_s=0,jt=[],It=0,Wn=null,Xt=1,en="";function $n(e,t){lr[ir++]=_s,lr[ir++]=bs,bs=e,_s=t}function Wd(e,t,n){jt[It++]=Xt,jt[It++]=en,jt[It++]=Wn,Wn=e;var r=Xt;e=en;var o=32-At(r)-1;r&=~(1<<o),n+=1;var s=32-At(t)+o;if(30<s){var a=o-o%5;s=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Xt=1<<32-At(t)+o|n<<o|r,en=s+e}else Xt=1<<s|n<<o|r,en=e}function si(e){e.return!==null&&($n(e,1),Wd(e,1,0))}function ai(e){for(;e===bs;)bs=lr[--ir],lr[ir]=null,_s=lr[--ir],lr[ir]=null;for(;e===Wn;)Wn=jt[--It],jt[It]=null,en=jt[--It],jt[It]=null,Xt=jt[--It],jt[It]=null}var kt=null,wt=null,Ne=!1,Ut=null;function Bd(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,wt=wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wn!==null?{id:Xt,overflow:en}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,wt=null,!0):!1;default:return!1}}function pl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ml(e){if(Ne){var t=wt;if(t){var n=t;if(!Cu(e,t)){if(pl(e))throw Error($(418));t=wn(n.nextSibling);var r=kt;t&&Cu(e,t)?Bd(r,n):(e.flags=e.flags&-4097|2,Ne=!1,kt=e)}}else{if(pl(e))throw Error($(418));e.flags=e.flags&-4097|2,Ne=!1,kt=e}}}function Eu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function Fo(e){if(e!==kt)return!1;if(!Ne)return Eu(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ul(e.type,e.memoizedProps)),t&&(t=wt)){if(pl(e))throw Gd(),Error($(418));for(;t;)Bd(e,t),t=wn(t.nextSibling)}if(Eu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wt=wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=kt?wn(e.stateNode.nextSibling):null;return!0}function Gd(){for(var e=wt;e;)e=wn(e.nextSibling)}function _r(){wt=kt=null,Ne=!1}function li(e){Ut===null?Ut=[e]:Ut.push(e)}var W0=ln.ReactCurrentBatchConfig;function Ur(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var i=o.refs;a===null?delete i[s]:i[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function Ao(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pu(e){var t=e._init;return t(e._payload)}function Vd(e){function t(p,d){if(e){var g=p.deletions;g===null?(p.deletions=[d],p.flags|=16):g.push(d)}}function n(p,d){if(!e)return null;for(;d!==null;)t(p,d),d=d.sibling;return null}function r(p,d){for(p=new Map;d!==null;)d.key!==null?p.set(d.key,d):p.set(d.index,d),d=d.sibling;return p}function o(p,d){return p=Sn(p,d),p.index=0,p.sibling=null,p}function s(p,d,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<d?(p.flags|=2,d):g):(p.flags|=2,d)):(p.flags|=1048576,d)}function a(p){return e&&p.alternate===null&&(p.flags|=2),p}function i(p,d,g,x){return d===null||d.tag!==6?(d=Ta(g,p.mode,x),d.return=p,d):(d=o(d,g),d.return=p,d)}function u(p,d,g,x){var I=g.type;return I===tr?m(p,d,g.props.children,x,g.key):d!==null&&(d.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===dn&&Pu(I)===d.type)?(x=o(d,g.props),x.ref=Ur(p,d,g),x.return=p,x):(x=us(g.type,g.key,g.props,null,p.mode,x),x.ref=Ur(p,d,g),x.return=p,x)}function c(p,d,g,x){return d===null||d.tag!==4||d.stateNode.containerInfo!==g.containerInfo||d.stateNode.implementation!==g.implementation?(d=$a(g,p.mode,x),d.return=p,d):(d=o(d,g.children||[]),d.return=p,d)}function m(p,d,g,x,I){return d===null||d.tag!==7?(d=An(g,p.mode,x,I),d.return=p,d):(d=o(d,g),d.return=p,d)}function f(p,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Ta(""+d,p.mode,g),d.return=p,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Po:return g=us(d.type,d.key,d.props,null,p.mode,g),g.ref=Ur(p,null,d),g.return=p,g;case er:return d=$a(d,p.mode,g),d.return=p,d;case dn:var x=d._init;return f(p,x(d._payload),g)}if(Br(d)||$r(d))return d=An(d,p.mode,g,null),d.return=p,d;Ao(p,d)}return null}function h(p,d,g,x){var I=d!==null?d.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return I!==null?null:i(p,d,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Po:return g.key===I?u(p,d,g,x):null;case er:return g.key===I?c(p,d,g,x):null;case dn:return I=g._init,h(p,d,I(g._payload),x)}if(Br(g)||$r(g))return I!==null?null:m(p,d,g,x,null);Ao(p,g)}return null}function w(p,d,g,x,I){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(g)||null,i(d,p,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Po:return p=p.get(x.key===null?g:x.key)||null,u(d,p,x,I);case er:return p=p.get(x.key===null?g:x.key)||null,c(d,p,x,I);case dn:var z=x._init;return w(p,d,g,z(x._payload),I)}if(Br(x)||$r(x))return p=p.get(g)||null,m(d,p,x,I,null);Ao(d,x)}return null}function y(p,d,g,x){for(var I=null,z=null,j=d,k=d=0,M=null;j!==null&&k<g.length;k++){j.index>k?(M=j,j=null):M=j.sibling;var E=h(p,j,g[k],x);if(E===null){j===null&&(j=M);break}e&&j&&E.alternate===null&&t(p,j),d=s(E,d,k),z===null?I=E:z.sibling=E,z=E,j=M}if(k===g.length)return n(p,j),Ne&&$n(p,k),I;if(j===null){for(;k<g.length;k++)j=f(p,g[k],x),j!==null&&(d=s(j,d,k),z===null?I=j:z.sibling=j,z=j);return Ne&&$n(p,k),I}for(j=r(p,j);k<g.length;k++)M=w(j,p,k,g[k],x),M!==null&&(e&&M.alternate!==null&&j.delete(M.key===null?k:M.key),d=s(M,d,k),z===null?I=M:z.sibling=M,z=M);return e&&j.forEach(function(A){return t(p,A)}),Ne&&$n(p,k),I}function _(p,d,g,x){var I=$r(g);if(typeof I!="function")throw Error($(150));if(g=I.call(g),g==null)throw Error($(151));for(var z=I=null,j=d,k=d=0,M=null,E=g.next();j!==null&&!E.done;k++,E=g.next()){j.index>k?(M=j,j=null):M=j.sibling;var A=h(p,j,E.value,x);if(A===null){j===null&&(j=M);break}e&&j&&A.alternate===null&&t(p,j),d=s(A,d,k),z===null?I=A:z.sibling=A,z=A,j=M}if(E.done)return n(p,j),Ne&&$n(p,k),I;if(j===null){for(;!E.done;k++,E=g.next())E=f(p,E.value,x),E!==null&&(d=s(E,d,k),z===null?I=E:z.sibling=E,z=E);return Ne&&$n(p,k),I}for(j=r(p,j);!E.done;k++,E=g.next())E=w(j,p,k,E.value,x),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?k:E.key),d=s(E,d,k),z===null?I=E:z.sibling=E,z=E);return e&&j.forEach(function(J){return t(p,J)}),Ne&&$n(p,k),I}function b(p,d,g,x){if(typeof g=="object"&&g!==null&&g.type===tr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Po:e:{for(var I=g.key,z=d;z!==null;){if(z.key===I){if(I=g.type,I===tr){if(z.tag===7){n(p,z.sibling),d=o(z,g.props.children),d.return=p,p=d;break e}}else if(z.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===dn&&Pu(I)===z.type){n(p,z.sibling),d=o(z,g.props),d.ref=Ur(p,z,g),d.return=p,p=d;break e}n(p,z);break}else t(p,z);z=z.sibling}g.type===tr?(d=An(g.props.children,p.mode,x,g.key),d.return=p,p=d):(x=us(g.type,g.key,g.props,null,p.mode,x),x.ref=Ur(p,d,g),x.return=p,p=x)}return a(p);case er:e:{for(z=g.key;d!==null;){if(d.key===z)if(d.tag===4&&d.stateNode.containerInfo===g.containerInfo&&d.stateNode.implementation===g.implementation){n(p,d.sibling),d=o(d,g.children||[]),d.return=p,p=d;break e}else{n(p,d);break}else t(p,d);d=d.sibling}d=$a(g,p.mode,x),d.return=p,p=d}return a(p);case dn:return z=g._init,b(p,d,z(g._payload),x)}if(Br(g))return y(p,d,g,x);if($r(g))return _(p,d,g,x);Ao(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,d!==null&&d.tag===6?(n(p,d.sibling),d=o(d,g),d.return=p,p=d):(n(p,d),d=Ta(g,p.mode,x),d.return=p,p=d),a(p)):n(p,d)}return b}var Sr=Vd(!0),Hd=Vd(!1),Ss=Pn(null),Ns=null,ur=null,ii=null;function ui(){ii=ur=Ns=null}function ci(e){var t=Ss.current;_e(Ss),e._currentValue=t}function gl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vr(e,t){Ns=e,ii=ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(ii!==e)if(e={context:e,memoizedValue:t,next:null},ur===null){if(Ns===null)throw Error($(308));ur=e,Ns.dependencies={lanes:0,firstContext:e}}else ur=ur.next=e;return t}var Ln=null;function di(e){Ln===null?Ln=[e]:Ln.push(e)}function Jd(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,di(t)):(n.next=o.next,o.next=n),t.interleaved=n,sn(e,r)}function sn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fn=!1;function fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,sn(e,n)}return o=r.interleaved,o===null?(t.next=t,di(r)):(t.next=o.next,o.next=t),r.interleaved=t,sn(e,n)}function rs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ql(e,n)}}function zu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,r){var o=e.updateQueue;fn=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var m=e.alternate;m!==null&&(m=m.updateQueue,i=m.lastBaseUpdate,i!==a&&(i===null?m.firstBaseUpdate=c:i.next=c,m.lastBaseUpdate=u))}if(s!==null){var f=o.baseState;a=0,m=c=u=null,i=s;do{var h=i.lane,w=i.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,_=i;switch(h=t,w=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){f=y.call(w,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,h=typeof y=="function"?y.call(w,f,h):y,h==null)break e;f=Ee({},f,h);break e;case 2:fn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[i]:h.push(i))}else w={eventTime:w,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},m===null?(c=m=w,u=f):m=m.next=w,a|=h;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;h=i,i=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(m===null&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);Gn|=a,e.lanes=a,e.memoizedState=f}}function Ru(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error($(191,o));o.call(r)}}}var No={},Jt=Pn(No),mo=Pn(No),go=Pn(No);function Mn(e){if(e===No)throw Error($(174));return e}function pi(e,t){switch(we(go,t),we(mo,e),we(Jt,No),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qa(t,e)}_e(Jt),we(Jt,t)}function Nr(){_e(Jt),_e(mo),_e(go)}function Kd(e){Mn(go.current);var t=Mn(Jt.current),n=Qa(t,e.type);t!==n&&(we(mo,e),we(Jt,n))}function mi(e){mo.current===e&&(_e(Jt),_e(mo))}var Ie=Pn(0);function Is(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=[];function gi(){for(var e=0;e<Ia.length;e++)Ia[e]._workInProgressVersionPrimary=null;Ia.length=0}var os=ln.ReactCurrentDispatcher,Ca=ln.ReactCurrentBatchConfig,Bn=0,Ce=null,Ze=null,He=null,Cs=!1,Yr=!1,ho=0,B0=0;function Ye(){throw Error($(321))}function hi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function yi(e,t,n,r,o,s){if(Bn=s,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?J0:Q0,e=n(r,o),Yr){s=0;do{if(Yr=!1,ho=0,25<=s)throw Error($(301));s+=1,He=Ze=null,t.updateQueue=null,os.current=K0,e=n(r,o)}while(Yr)}if(os.current=Es,t=Ze!==null&&Ze.next!==null,Bn=0,He=Ze=Ce=null,Cs=!1,t)throw Error($(300));return e}function vi(){var e=ho!==0;return ho=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ce.memoizedState=He=e:He=He.next=e,He}function zt(){if(Ze===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=He===null?Ce.memoizedState:He.next;if(t!==null)He=t,Ze=e;else{if(e===null)throw Error($(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},He===null?Ce.memoizedState=He=e:He=He.next=e}return He}function yo(e,t){return typeof t=="function"?t(e):t}function Ea(e){var t=zt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ze,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var i=a=null,u=null,c=s;do{var m=c.lane;if((Bn&m)===m)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=f,a=r):u=u.next=f,Ce.lanes|=m,Gn|=m}c=c.next}while(c!==null&&c!==s);u===null?a=r:u.next=i,Wt(r,t.memoizedState)||(dt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ce.lanes|=s,Gn|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=zt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do s=e(s,a.action),a=a.next;while(a!==o);Wt(s,t.memoizedState)||(dt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function qd(){}function Yd(e,t){var n=Ce,r=zt(),o=t(),s=!Wt(r.memoizedState,o);if(s&&(r.memoizedState=o,dt=!0),r=r.queue,xi(tf.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,vo(9,ef.bind(null,n,r,o,t),void 0,null),Je===null)throw Error($(349));Bn&30||Xd(n,t,o)}return o}function Xd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ef(e,t,n,r){t.value=n,t.getSnapshot=r,nf(t)&&rf(e)}function tf(e,t,n){return n(function(){nf(t)&&rf(e)})}function nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch{return!0}}function rf(e){var t=sn(e,1);t!==null&&Zt(t,e,1,-1)}function Tu(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:e},t.queue=e,e=e.dispatch=H0.bind(null,Ce,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function of(){return zt().memoizedState}function ss(e,t,n,r){var o=Gt();Ce.flags|=e,o.memoizedState=vo(1|t,n,void 0,r===void 0?null:r)}function Hs(e,t,n,r){var o=zt();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var a=Ze.memoizedState;if(s=a.destroy,r!==null&&hi(r,a.deps)){o.memoizedState=vo(t,n,s,r);return}}Ce.flags|=e,o.memoizedState=vo(1|t,n,s,r)}function $u(e,t){return ss(8390656,8,e,t)}function xi(e,t){return Hs(2048,8,e,t)}function sf(e,t){return Hs(4,2,e,t)}function af(e,t){return Hs(4,4,e,t)}function lf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uf(e,t,n){return n=n!=null?n.concat([e]):null,Hs(4,4,lf.bind(null,t,e),n)}function wi(){}function cf(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function df(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ff(e,t,n){return Bn&21?(Wt(n,t)||(n=hd(),Ce.lanes|=n,Gn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=n)}function G0(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Ca.transition;Ca.transition={};try{e(!1),t()}finally{he=n,Ca.transition=r}}function pf(){return zt().memoizedState}function V0(e,t,n){var r=_n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mf(e))gf(t,n);else if(n=Jd(e,t,n,r),n!==null){var o=at();Zt(n,e,r,o),hf(n,t,r)}}function H0(e,t,n){var r=_n(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mf(e))gf(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,i=s(a,n);if(o.hasEagerState=!0,o.eagerState=i,Wt(i,a)){var u=t.interleaved;u===null?(o.next=o,di(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=Jd(e,t,o,r),n!==null&&(o=at(),Zt(n,e,r,o),hf(n,t,r))}}function mf(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function gf(e,t){Yr=Cs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ql(e,n)}}var Es={readContext:Pt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},J0={readContext:Pt,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:$u,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ss(4194308,4,lf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ss(4194308,4,e,t)},useInsertionEffect:function(e,t){return ss(4,2,e,t)},useMemo:function(e,t){var n=Gt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=V0.bind(null,Ce,e),[r.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:Tu,useDebugValue:wi,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=Tu(!1),t=e[0];return e=G0.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ce,o=Gt();if(Ne){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),Je===null)throw Error($(349));Bn&30||Xd(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,$u(tf.bind(null,r,s,e),[e]),r.flags|=2048,vo(9,ef.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Gt(),t=Je.identifierPrefix;if(Ne){var n=en,r=Xt;n=(r&~(1<<32-At(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ho++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=B0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Q0={readContext:Pt,useCallback:cf,useContext:Pt,useEffect:xi,useImperativeHandle:uf,useInsertionEffect:sf,useLayoutEffect:af,useMemo:df,useReducer:Ea,useRef:of,useState:function(){return Ea(yo)},useDebugValue:wi,useDeferredValue:function(e){var t=zt();return ff(t,Ze.memoizedState,e)},useTransition:function(){var e=Ea(yo)[0],t=zt().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Yd,useId:pf,unstable_isNewReconciler:!1},K0={readContext:Pt,useCallback:cf,useContext:Pt,useEffect:xi,useImperativeHandle:uf,useInsertionEffect:sf,useLayoutEffect:af,useMemo:df,useReducer:Pa,useRef:of,useState:function(){return Pa(yo)},useDebugValue:wi,useDeferredValue:function(e){var t=zt();return Ze===null?t.memoizedState=e:ff(t,Ze.memoizedState,e)},useTransition:function(){var e=Pa(yo)[0],t=zt().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Yd,useId:pf,unstable_isNewReconciler:!1};function Lt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Js={isMounted:function(e){return(e=e._reactInternals)?Jn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=at(),o=_n(e),s=tn(r,o);s.payload=t,n!=null&&(s.callback=n),t=kn(e,s,o),t!==null&&(Zt(t,e,o,r),rs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=at(),o=_n(e),s=tn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=kn(e,s,o),t!==null&&(Zt(t,e,o,r),rs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=at(),r=_n(e),o=tn(n,r);o.tag=2,t!=null&&(o.callback=t),t=kn(e,o,r),t!==null&&(Zt(t,e,r,n),rs(t,e,r))}};function Du(e,t,n,r,o,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!uo(n,r)||!uo(o,s):!0}function yf(e,t,n){var r=!1,o=jn,s=t.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(o=mt(t)?Zn:nt.current,r=t.contextTypes,s=(r=r!=null)?br(e,o):jn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Js,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ou(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Js.enqueueReplaceState(t,t.state,null)}function yl(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},fi(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Pt(s):(s=mt(t)?Zn:nt.current,o.context=br(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(hl(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Js.enqueueReplaceState(o,o.state,null),js(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function jr(e,t){try{var n="",r=t;do n+=Sm(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function za(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var q0=typeof WeakMap=="function"?WeakMap:Map;function vf(e,t,n){n=tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zs||(zs=!0,Cl=r),vl(e,t)},n}function xf(e,t,n){n=tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){vl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vl(e,t),typeof r!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Lu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new q0;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=dg.bind(null,e,t,n),t.then(e,e))}function Mu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uu(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tn(-1,1),t.tag=2,kn(n,t,1))),n.lanes|=1),e)}var Y0=ln.ReactCurrentOwner,dt=!1;function st(e,t,n,r){t.child=e===null?Hd(t,null,n,r):Sr(t,e.child,n,r)}function Fu(e,t,n,r,o){n=n.render;var s=t.ref;return vr(t,o),r=yi(e,t,n,r,s,o),n=vi(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,an(e,t,o)):(Ne&&n&&si(t),t.flags|=1,st(e,t,r,o),t.child)}function Au(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Ci(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,wf(e,t,s,r,o)):(e=us(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:uo,n(a,r)&&e.ref===t.ref)return an(e,t,o)}return t.flags|=1,e=Sn(s,r),e.ref=t.ref,e.return=t,t.child=e}function wf(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(uo(s,r)&&e.ref===t.ref)if(dt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,an(e,t,o)}return xl(e,t,n,r,o)}function kf(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(dr,vt),vt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(dr,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(dr,vt),vt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,we(dr,vt),vt|=r;return st(e,t,o,n),t.child}function bf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xl(e,t,n,r,o){var s=mt(n)?Zn:nt.current;return s=br(t,s),vr(t,o),n=yi(e,t,n,r,s,o),r=vi(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,an(e,t,o)):(Ne&&r&&si(t),t.flags|=1,st(e,t,n,o),t.child)}function Zu(e,t,n,r,o){if(mt(n)){var s=!0;ks(t)}else s=!1;if(vr(t,o),t.stateNode===null)as(e,t),yf(t,n,r),yl(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pt(c):(c=mt(n)?Zn:nt.current,c=br(t,c));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&Ou(t,a,r,c),fn=!1;var h=t.memoizedState;a.state=h,js(t,r,a,o),u=t.memoizedState,i!==r||h!==u||pt.current||fn?(typeof m=="function"&&(hl(t,n,m,r),u=t.memoizedState),(i=fn||Du(t,n,i,r,h,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Qd(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:Lt(t.type,i),a.props=c,f=t.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pt(u):(u=mt(n)?Zn:nt.current,u=br(t,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==u)&&Ou(t,a,r,u),fn=!1,h=t.memoizedState,a.state=h,js(t,r,a,o);var y=t.memoizedState;i!==f||h!==y||pt.current||fn?(typeof w=="function"&&(hl(t,n,w,r),y=t.memoizedState),(c=fn||Du(t,n,c,r,h,y,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return wl(e,t,n,r,s,o)}function wl(e,t,n,r,o,s){bf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&Iu(t,n,!1),an(e,t,s);r=t.stateNode,Y0.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Sr(t,e.child,null,s),t.child=Sr(t,null,i,s)):st(e,t,i,s),t.memoizedState=r.state,o&&Iu(t,n,!0),t.child}function _f(e){var t=e.stateNode;t.pendingContext?ju(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ju(e,t.context,!1),pi(e,t.containerInfo)}function Wu(e,t,n,r,o){return _r(),li(o),t.flags|=256,st(e,t,n,r),t.child}var kl={dehydrated:null,treeContext:null,retryLane:0};function bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sf(e,t,n){var r=t.pendingProps,o=Ie.current,s=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(o&2)!==0),i?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),we(Ie,o&1),e===null)return ml(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=qs(a,r,0,null),e=An(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=bl(n),t.memoizedState=kl,e):ki(t,a));if(o=e.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return X0(e,t,a,r,i,o,n);if(s){s=r.fallback,a=t.mode,o=e.child,i=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Sn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),i!==null?s=Sn(i,s):(s=An(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?bl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=kl,r}return s=e.child,e=s.sibling,r=Sn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ki(e,t){return t=qs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zo(e,t,n,r){return r!==null&&li(r),Sr(t,e.child,null,n),e=ki(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function X0(e,t,n,r,o,s,a){if(n)return t.flags&256?(t.flags&=-257,r=za(Error($(422))),Zo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=qs({mode:"visible",children:r.children},o,0,null),s=An(s,o,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Sr(t,e.child,null,a),t.child.memoizedState=bl(a),t.memoizedState=kl,s);if(!(t.mode&1))return Zo(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var i=r.dgst;return r=i,s=Error($(419)),r=za(s,r,void 0),Zo(e,t,a,r)}if(i=(a&e.childLanes)!==0,dt||i){if(r=Je,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,sn(e,o),Zt(r,e,o,-1))}return Ii(),r=za(Error($(421))),Zo(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=fg.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,wt=wn(o.nextSibling),kt=t,Ne=!0,Ut=null,e!==null&&(jt[It++]=Xt,jt[It++]=en,jt[It++]=Wn,Xt=e.id,en=e.overflow,Wn=t),t=ki(t,r.children),t.flags|=4096,t)}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gl(e.return,t,n)}function Ra(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Nf(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(st(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bu(e,n,t);else if(e.tag===19)Bu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Is(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ra(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Is(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ra(t,!0,n,null,s);break;case"together":Ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function as(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Sn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Sn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function eg(e,t,n){switch(t.tag){case 3:_f(t),_r();break;case 5:Kd(t);break;case 1:mt(t.type)&&ks(t);break;case 4:pi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;we(Ss,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Sf(e,t,n):(we(Ie,Ie.current&1),e=an(e,t,n),e!==null?e.sibling:null);we(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Nf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),we(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,kf(e,t,n)}return an(e,t,n)}var jf,_l,If,Cf;jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_l=function(){};If=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Mn(Jt.current);var s=null;switch(n){case"input":o=Ga(e,o),r=Ga(e,r),s=[];break;case"select":o=Ee({},o,{value:void 0}),r=Ee({},r,{value:void 0}),s=[];break;case"textarea":o=Ja(e,o),r=Ja(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xs)}Ka(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var i=o[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(no.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(i=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(no.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&be("scroll",e),s||i===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};Cf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Fr(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tg(e,t,n){var r=t.pendingProps;switch(ai(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return mt(t.type)&&ws(),Xe(t),null;case 3:return r=t.stateNode,Nr(),_e(pt),_e(nt),gi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(zl(Ut),Ut=null))),_l(e,t),Xe(t),null;case 5:mi(t);var o=Mn(go.current);if(n=t.type,e!==null&&t.stateNode!=null)If(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return Xe(t),null}if(e=Mn(Jt.current),Fo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Vt]=t,r[po]=s,e=(t.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(o=0;o<Vr.length;o++)be(Vr[o],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Xi(r,s),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},be("invalid",r);break;case"textarea":tu(r,s),be("invalid",r)}Ka(n,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?r.textContent!==i&&(s.suppressHydrationWarning!==!0&&Uo(r.textContent,i,e),o=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&Uo(r.textContent,i,e),o=["children",""+i]):no.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&be("scroll",r)}switch(n){case"input":zo(r),eu(r,s,!0);break;case"textarea":zo(r),nu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xs)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=td(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Vt]=t,e[po]=r,jf(e,t,!1,!1),t.stateNode=e;e:{switch(a=qa(n,r),n){case"dialog":be("cancel",e),be("close",e),o=r;break;case"iframe":case"object":case"embed":be("load",e),o=r;break;case"video":case"audio":for(o=0;o<Vr.length;o++)be(Vr[o],e);o=r;break;case"source":be("error",e),o=r;break;case"img":case"image":case"link":be("error",e),be("load",e),o=r;break;case"details":be("toggle",e),o=r;break;case"input":Xi(e,r),o=Ga(e,r),be("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ee({},r,{value:void 0}),be("invalid",e);break;case"textarea":tu(e,r),o=Ja(e,r),be("invalid",e);break;default:o=r}Ka(n,o),i=o;for(s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="style"?od(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nd(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ro(e,u):typeof u=="number"&&ro(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(no.hasOwnProperty(s)?u!=null&&s==="onScroll"&&be("scroll",e):u!=null&&Gl(e,s,u,a))}switch(n){case"input":zo(e),eu(e,r,!1);break;case"textarea":zo(e),nu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Nn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?mr(e,!!r.multiple,s,!1):r.defaultValue!=null&&mr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=xs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Cf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=Mn(go.current),Mn(Jt.current),Fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vt]=t,(s=r.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:Uo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Uo(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vt]=t,t.stateNode=r}return Xe(t),null;case 13:if(_e(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&wt!==null&&t.mode&1&&!(t.flags&128))Gd(),_r(),t.flags|=98560,s=!1;else if(s=Fo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error($(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Vt]=t}else _r(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),s=!1}else Ut!==null&&(zl(Ut),Ut=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?We===0&&(We=3):Ii())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Nr(),_l(e,t),e===null&&co(t.stateNode.containerInfo),Xe(t),null;case 10:return ci(t.type._context),Xe(t),null;case 17:return mt(t.type)&&ws(),Xe(t),null;case 19:if(_e(Ie),s=t.memoizedState,s===null)return Xe(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Fr(s,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Is(e),a!==null){for(t.flags|=128,Fr(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Ie,Ie.current&1|2),t.child}e=e.sibling}s.tail!==null&&De()>Ir&&(t.flags|=128,r=!0,Fr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Is(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ne)return Xe(t),null}else 2*De()-s.renderingStartTime>Ir&&n!==1073741824&&(t.flags|=128,r=!0,Fr(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=De(),t.sibling=null,n=Ie.current,we(Ie,r?n&1|2:n&1),t):(Xe(t),null);case 22:case 23:return ji(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function ng(e,t){switch(ai(t),t.tag){case 1:return mt(t.type)&&ws(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nr(),_e(pt),_e(nt),gi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mi(t),null;case 13:if(_e(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));_r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(Ie),null;case 4:return Nr(),null;case 10:return ci(t.type._context),null;case 22:case 23:return ji(),null;case 24:return null;default:return null}}var Wo=!1,tt=!1,rg=typeof WeakSet=="function"?WeakSet:Set,B=null;function cr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(e,t,r)}else n.current=null}function Sl(e,t,n){try{n()}catch(r){Te(e,t,r)}}var Gu=!1;function og(e,t){if(ll=hs,e=Rd(),oi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,m=0,f=e,h=null;t:for(;;){for(var w;f!==n||o!==0&&f.nodeType!==3||(i=a+o),f!==s||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(w=f.firstChild)!==null;)h=f,f=w;for(;;){if(f===e)break t;if(h===n&&++c===o&&(i=a),h===s&&++m===r&&(u=a),(w=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=w}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(il={focusedElem:e,selectionRange:n},hs=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,b=y.memoizedState,p=t.stateNode,d=p.getSnapshotBeforeUpdate(t.elementType===t.type?_:Lt(t.type,_),b);p.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(x){Te(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return y=Gu,Gu=!1,y}function Xr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Sl(t,n,s)}o=o.next}while(o!==r)}}function Qs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Nl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[po],delete t[dl],delete t[F0],delete t[A0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pf(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xs));else if(r!==4&&(e=e.child,e!==null))for(jl(e,t,n),e=e.sibling;e!==null;)jl(e,t,n),e=e.sibling}function Il(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Il(e,t,n),e=e.sibling;e!==null;)Il(e,t,n),e=e.sibling}var Qe=null,Mt=!1;function cn(e,t,n){for(n=n.child;n!==null;)zf(e,t,n),n=n.sibling}function zf(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(As,n)}catch{}switch(n.tag){case 5:tt||cr(n,t);case 6:var r=Qe,o=Mt;Qe=null,cn(e,t,n),Qe=r,Mt=o,Qe!==null&&(Mt?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Mt?(e=Qe,n=n.stateNode,e.nodeType===8?Na(e.parentNode,n):e.nodeType===1&&Na(e,n),lo(e)):Na(Qe,n.stateNode));break;case 4:r=Qe,o=Mt,Qe=n.stateNode.containerInfo,Mt=!0,cn(e,t,n),Qe=r,Mt=o;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Sl(n,t,a),o=o.next}while(o!==r)}cn(e,t,n);break;case 1:if(!tt&&(cr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Te(n,t,i)}cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,cn(e,t,n),tt=r):cn(e,t,n);break;default:cn(e,t,n)}}function Hu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rg),t.forEach(function(r){var o=pg.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ot(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Qe=i.stateNode,Mt=!1;break e;case 3:Qe=i.stateNode.containerInfo,Mt=!0;break e;case 4:Qe=i.stateNode.containerInfo,Mt=!0;break e}i=i.return}if(Qe===null)throw Error($(160));zf(s,a,o),Qe=null,Mt=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){Te(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rf(t,e),t=t.sibling}function Rf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Bt(e),r&4){try{Xr(3,e,e.return),Qs(3,e)}catch(_){Te(e,e.return,_)}try{Xr(5,e,e.return)}catch(_){Te(e,e.return,_)}}break;case 1:Ot(t,e),Bt(e),r&512&&n!==null&&cr(n,n.return);break;case 5:if(Ot(t,e),Bt(e),r&512&&n!==null&&cr(n,n.return),e.flags&32){var o=e.stateNode;try{ro(o,"")}catch(_){Te(e,e.return,_)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&Xc(o,s),qa(i,a);var c=qa(i,s);for(a=0;a<u.length;a+=2){var m=u[a],f=u[a+1];m==="style"?od(o,f):m==="dangerouslySetInnerHTML"?nd(o,f):m==="children"?ro(o,f):Gl(o,m,f,c)}switch(i){case"input":Va(o,s);break;case"textarea":ed(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?mr(o,!!s.multiple,w,!1):h!==!!s.multiple&&(s.defaultValue!=null?mr(o,!!s.multiple,s.defaultValue,!0):mr(o,!!s.multiple,s.multiple?[]:"",!1))}o[po]=s}catch(_){Te(e,e.return,_)}}break;case 6:if(Ot(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error($(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(_){Te(e,e.return,_)}}break;case 3:if(Ot(t,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lo(t.containerInfo)}catch(_){Te(e,e.return,_)}break;case 4:Ot(t,e),Bt(e);break;case 13:Ot(t,e),Bt(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Si=De())),r&4&&Hu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(tt=(c=tt)||m,Ot(t,e),tt=c):Ot(t,e),Bt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(B=e,m=e.child;m!==null;){for(f=B=m;B!==null;){switch(h=B,w=h.child,h.tag){case 0:case 11:case 14:case 15:Xr(4,h,h.return);break;case 1:cr(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){Te(r,n,_)}}break;case 5:cr(h,h.return);break;case 22:if(h.memoizedState!==null){Qu(f);continue}}w!==null?(w.return=h,B=w):Qu(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{o=f.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=rd("display",a))}catch(_){Te(e,e.return,_)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){Te(e,e.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ot(t,e),Bt(e),r&4&&Hu(e);break;case 21:break;default:Ot(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Pf(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ro(o,""),r.flags&=-33);var s=Vu(e);Il(e,s,o);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Vu(e);jl(e,i,a);break;default:throw Error($(161))}}catch(u){Te(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sg(e,t,n){B=e,Tf(e)}function Tf(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var o=B,s=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Wo;if(!a){var i=o.alternate,u=i!==null&&i.memoizedState!==null||tt;i=Wo;var c=tt;if(Wo=a,(tt=u)&&!c)for(B=o;B!==null;)a=B,u=a.child,a.tag===22&&a.memoizedState!==null?Ku(o):u!==null?(u.return=a,B=u):Ku(o);for(;s!==null;)B=s,Tf(s),s=s.sibling;B=o,Wo=i,tt=c}Ju(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,B=s):Ju(e)}}function Ju(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tt||Qs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!tt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Lt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Ru(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ru(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&lo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}tt||t.flags&512&&Nl(t)}catch(h){Te(t,t.return,h)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Qu(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Ku(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qs(4,t)}catch(u){Te(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Te(t,o,u)}}var s=t.return;try{Nl(t)}catch(u){Te(t,s,u)}break;case 5:var a=t.return;try{Nl(t)}catch(u){Te(t,a,u)}}}catch(u){Te(t,t.return,u)}if(t===e){B=null;break}var i=t.sibling;if(i!==null){i.return=t.return,B=i;break}B=t.return}}var ag=Math.ceil,Ps=ln.ReactCurrentDispatcher,bi=ln.ReactCurrentOwner,Et=ln.ReactCurrentBatchConfig,ce=0,Je=null,Me=null,Ke=0,vt=0,dr=Pn(0),We=0,xo=null,Gn=0,Ks=0,_i=0,eo=null,ct=null,Si=0,Ir=1/0,Kt=null,zs=!1,Cl=null,bn=null,Bo=!1,hn=null,Rs=0,to=0,El=null,ls=-1,is=0;function at(){return ce&6?De():ls!==-1?ls:ls=De()}function _n(e){return e.mode&1?ce&2&&Ke!==0?Ke&-Ke:W0.transition!==null?(is===0&&(is=hd()),is):(e=he,e!==0||(e=window.event,e=e===void 0?16:_d(e.type)),e):1}function Zt(e,t,n,r){if(50<to)throw to=0,El=null,Error($(185));bo(e,n,r),(!(ce&2)||e!==Je)&&(e===Je&&(!(ce&2)&&(Ks|=n),We===4&&mn(e,Ke)),gt(e,r),n===1&&ce===0&&!(t.mode&1)&&(Ir=De()+500,Vs&&zn()))}function gt(e,t){var n=e.callbackNode;Wm(e,t);var r=gs(e,e===Je?Ke:0);if(r===0)n!==null&&su(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&su(n),t===1)e.tag===0?Z0(qu.bind(null,e)):Zd(qu.bind(null,e)),M0(function(){!(ce&6)&&zn()}),n=null;else{switch(yd(r)){case 1:n=Kl;break;case 4:n=md;break;case 16:n=ms;break;case 536870912:n=gd;break;default:n=ms}n=Af(n,$f.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $f(e,t){if(ls=-1,is=0,ce&6)throw Error($(327));var n=e.callbackNode;if(xr()&&e.callbackNode!==n)return null;var r=gs(e,e===Je?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ts(e,r);else{t=r;var o=ce;ce|=2;var s=Of();(Je!==e||Ke!==t)&&(Kt=null,Ir=De()+500,Fn(e,t));do try{ug();break}catch(i){Df(e,i)}while(1);ui(),Ps.current=s,ce=o,Me!==null?t=0:(Je=null,Ke=0,t=We)}if(t!==0){if(t===2&&(o=nl(e),o!==0&&(r=o,t=Pl(e,o))),t===1)throw n=xo,Fn(e,0),mn(e,r),gt(e,De()),n;if(t===6)mn(e,r);else{if(o=e.current.alternate,!(r&30)&&!lg(o)&&(t=Ts(e,r),t===2&&(s=nl(e),s!==0&&(r=s,t=Pl(e,s))),t===1))throw n=xo,Fn(e,0),mn(e,r),gt(e,De()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Dn(e,ct,Kt);break;case 3:if(mn(e,r),(r&130023424)===r&&(t=Si+500-De(),10<t)){if(gs(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){at(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=cl(Dn.bind(null,e,ct,Kt),t);break}Dn(e,ct,Kt);break;case 4:if(mn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-At(r);s=1<<a,a=t[a],a>o&&(o=a),r&=~s}if(r=o,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ag(r/1960))-r,10<r){e.timeoutHandle=cl(Dn.bind(null,e,ct,Kt),r);break}Dn(e,ct,Kt);break;case 5:Dn(e,ct,Kt);break;default:throw Error($(329))}}}return gt(e,De()),e.callbackNode===n?$f.bind(null,e):null}function Pl(e,t){var n=eo;return e.current.memoizedState.isDehydrated&&(Fn(e,t).flags|=256),e=Ts(e,t),e!==2&&(t=ct,ct=n,t!==null&&zl(t)),e}function zl(e){ct===null?ct=e:ct.push.apply(ct,e)}function lg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Wt(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mn(e,t){for(t&=~_i,t&=~Ks,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-At(t),r=1<<n;e[n]=-1,t&=~r}}function qu(e){if(ce&6)throw Error($(327));xr();var t=gs(e,0);if(!(t&1))return gt(e,De()),null;var n=Ts(e,t);if(e.tag!==0&&n===2){var r=nl(e);r!==0&&(t=r,n=Pl(e,r))}if(n===1)throw n=xo,Fn(e,0),mn(e,t),gt(e,De()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dn(e,ct,Kt),gt(e,De()),null}function Ni(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(Ir=De()+500,Vs&&zn())}}function Vn(e){hn!==null&&hn.tag===0&&!(ce&6)&&xr();var t=ce;ce|=1;var n=Et.transition,r=he;try{if(Et.transition=null,he=1,e)return e()}finally{he=r,Et.transition=n,ce=t,!(ce&6)&&zn()}}function ji(){vt=dr.current,_e(dr)}function Fn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L0(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(ai(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ws();break;case 3:Nr(),_e(pt),_e(nt),gi();break;case 5:mi(r);break;case 4:Nr();break;case 13:_e(Ie);break;case 19:_e(Ie);break;case 10:ci(r.type._context);break;case 22:case 23:ji()}n=n.return}if(Je=e,Me=e=Sn(e.current,null),Ke=vt=t,We=0,xo=null,_i=Ks=Gn=0,ct=eo=null,Ln!==null){for(t=0;t<Ln.length;t++)if(n=Ln[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=o,r.next=a}n.pending=r}Ln=null}return e}function Df(e,t){do{var n=Me;try{if(ui(),os.current=Es,Cs){for(var r=Ce.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Cs=!1}if(Bn=0,He=Ze=Ce=null,Yr=!1,ho=0,bi.current=null,n===null||n.return===null){We=1,xo=t,Me=null;break}e:{var s=e,a=n.return,i=n,u=t;if(t=Ke,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,m=i,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=Mu(a);if(w!==null){w.flags&=-257,Uu(w,a,i,s,t),w.mode&1&&Lu(s,c,t),t=w,u=c;var y=t.updateQueue;if(y===null){var _=new Set;_.add(u),t.updateQueue=_}else y.add(u);break e}else{if(!(t&1)){Lu(s,c,t),Ii();break e}u=Error($(426))}}else if(Ne&&i.mode&1){var b=Mu(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Uu(b,a,i,s,t),li(jr(u,i));break e}}s=u=jr(u,i),We!==4&&(We=2),eo===null?eo=[s]:eo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=vf(s,u,t);zu(s,p);break e;case 1:i=u;var d=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof d.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(bn===null||!bn.has(g)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=xf(s,i,t);zu(s,x);break e}}s=s.return}while(s!==null)}Mf(n)}catch(I){t=I,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function Of(){var e=Ps.current;return Ps.current=Es,e===null?Es:e}function Ii(){(We===0||We===3||We===2)&&(We=4),Je===null||!(Gn&268435455)&&!(Ks&268435455)||mn(Je,Ke)}function Ts(e,t){var n=ce;ce|=2;var r=Of();(Je!==e||Ke!==t)&&(Kt=null,Fn(e,t));do try{ig();break}catch(o){Df(e,o)}while(1);if(ui(),ce=n,Ps.current=r,Me!==null)throw Error($(261));return Je=null,Ke=0,We}function ig(){for(;Me!==null;)Lf(Me)}function ug(){for(;Me!==null&&!$m();)Lf(Me)}function Lf(e){var t=Ff(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Mf(e):Me=t,bi.current=null}function Mf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ng(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Me=null;return}}else if(n=tg(n,t,vt),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);We===0&&(We=5)}function Dn(e,t,n){var r=he,o=Et.transition;try{Et.transition=null,he=1,cg(e,t,n,r)}finally{Et.transition=o,he=r}return null}function cg(e,t,n,r){do xr();while(hn!==null);if(ce&6)throw Error($(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Bm(e,s),e===Je&&(Me=Je=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bo||(Bo=!0,Af(ms,function(){return xr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Et.transition,Et.transition=null;var a=he;he=1;var i=ce;ce|=4,bi.current=null,og(e,n),Rf(n,e),P0(il),hs=!!ll,il=ll=null,e.current=n,sg(n),Dm(),ce=i,he=a,Et.transition=s}else e.current=n;if(Bo&&(Bo=!1,hn=e,Rs=o),s=e.pendingLanes,s===0&&(bn=null),Mm(n.stateNode),gt(e,De()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(zs)throw zs=!1,e=Cl,Cl=null,e;return Rs&1&&e.tag!==0&&xr(),s=e.pendingLanes,s&1?e===El?to++:(to=0,El=e):to=0,zn(),null}function xr(){if(hn!==null){var e=yd(Rs),t=Et.transition,n=he;try{if(Et.transition=null,he=16>e?16:e,hn===null)var r=!1;else{if(e=hn,hn=null,Rs=0,ce&6)throw Error($(331));var o=ce;for(ce|=4,B=e.current;B!==null;){var s=B,a=s.child;if(B.flags&16){var i=s.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(B=c;B!==null;){var m=B;switch(m.tag){case 0:case 11:case 15:Xr(8,m,s)}var f=m.child;if(f!==null)f.return=m,B=f;else for(;B!==null;){m=B;var h=m.sibling,w=m.return;if(Ef(m),m===c){B=null;break}if(h!==null){h.return=w,B=h;break}B=w}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}B=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,B=a;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,B=p;break e}B=s.return}}var d=e.current;for(B=d;B!==null;){a=B;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,B=g;else e:for(a=d;B!==null;){if(i=B,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Qs(9,i)}}catch(I){Te(i,i.return,I)}if(i===a){B=null;break e}var x=i.sibling;if(x!==null){x.return=i.return,B=x;break e}B=i.return}}if(ce=o,zn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(As,e)}catch{}r=!0}return r}finally{he=n,Et.transition=t}}return!1}function Yu(e,t,n){t=jr(n,t),t=vf(e,t,1),e=kn(e,t,1),t=at(),e!==null&&(bo(e,1,t),gt(e,t))}function Te(e,t,n){if(e.tag===3)Yu(e,e,n);else for(;t!==null;){if(t.tag===3){Yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bn===null||!bn.has(r))){e=jr(n,e),e=xf(t,e,1),t=kn(t,e,1),e=at(),t!==null&&(bo(t,1,e),gt(t,e));break}}t=t.return}}function dg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(Ke&n)===n&&(We===4||We===3&&(Ke&130023424)===Ke&&500>De()-Si?Fn(e,0):_i|=n),gt(e,t)}function Uf(e,t){t===0&&(e.mode&1?(t=$o,$o<<=1,!($o&130023424)&&($o=4194304)):t=1);var n=at();e=sn(e,t),e!==null&&(bo(e,t,n),gt(e,n))}function fg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Uf(e,n)}function pg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),Uf(e,n)}var Ff;Ff=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)dt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dt=!1,eg(e,t,n);dt=!!(e.flags&131072)}else dt=!1,Ne&&t.flags&1048576&&Wd(t,_s,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;as(e,t),e=t.pendingProps;var o=br(t,nt.current);vr(t,n),o=yi(null,t,r,e,o,n);var s=vi();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(s=!0,ks(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,fi(t),o.updater=Js,t.stateNode=o,o._reactInternals=t,yl(t,r,e,n),t=wl(null,t,r,!0,s,n)):(t.tag=0,Ne&&s&&si(t),st(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(as(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=gg(r),e=Lt(r,e),o){case 0:t=xl(null,t,r,e,n);break e;case 1:t=Zu(null,t,r,e,n);break e;case 11:t=Fu(null,t,r,e,n);break e;case 14:t=Au(null,t,r,Lt(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Lt(r,o),xl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Lt(r,o),Zu(e,t,r,o,n);case 3:e:{if(_f(t),e===null)throw Error($(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Qd(e,t),js(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=jr(Error($(423)),t),t=Wu(e,t,r,n,o);break e}else if(r!==o){o=jr(Error($(424)),t),t=Wu(e,t,r,n,o);break e}else for(wt=wn(t.stateNode.containerInfo.firstChild),kt=t,Ne=!0,Ut=null,n=Hd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),r===o){t=an(e,t,n);break e}st(e,t,r,n)}t=t.child}return t;case 5:return Kd(t),e===null&&ml(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,a=o.children,ul(r,o)?a=null:s!==null&&ul(r,s)&&(t.flags|=32),bf(e,t),st(e,t,a,n),t.child;case 6:return e===null&&ml(t),null;case 13:return Sf(e,t,n);case 4:return pi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Sr(t,null,r,n):st(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Lt(r,o),Fu(e,t,r,o,n);case 7:return st(e,t,t.pendingProps,n),t.child;case 8:return st(e,t,t.pendingProps.children,n),t.child;case 12:return st(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,we(Ss,r._currentValue),r._currentValue=a,s!==null)if(Wt(s.value,a)){if(s.children===o.children&&!pt.current){t=an(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=tn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),gl(s.return,n,t),i.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error($(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),gl(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}st(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,vr(t,n),o=Pt(o),r=r(o),t.flags|=1,st(e,t,r,n),t.child;case 14:return r=t.type,o=Lt(r,t.pendingProps),o=Lt(r.type,o),Au(e,t,r,o,n);case 15:return wf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Lt(r,o),as(e,t),t.tag=1,mt(r)?(e=!0,ks(t)):e=!1,vr(t,n),yf(t,r,o),yl(t,r,o,n),wl(null,t,r,!0,e,n);case 19:return Nf(e,t,n);case 22:return kf(e,t,n)}throw Error($(156,t.tag))};function Af(e,t){return pd(e,t)}function mg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,r){return new mg(e,t,n,r)}function Ci(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gg(e){if(typeof e=="function")return Ci(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hl)return 11;if(e===Jl)return 14}return 2}function Sn(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function us(e,t,n,r,o,s){var a=2;if(r=e,typeof e=="function")Ci(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case tr:return An(n.children,o,s,t);case Vl:a=8,o|=8;break;case Aa:return e=Ct(12,n,t,o|2),e.elementType=Aa,e.lanes=s,e;case Za:return e=Ct(13,n,t,o),e.elementType=Za,e.lanes=s,e;case Wa:return e=Ct(19,n,t,o),e.elementType=Wa,e.lanes=s,e;case Kc:return qs(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jc:a=10;break e;case Qc:a=9;break e;case Hl:a=11;break e;case Jl:a=14;break e;case dn:a=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Ct(a,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function An(e,t,n,r){return e=Ct(7,e,r,t),e.lanes=n,e}function qs(e,t,n,r){return e=Ct(22,e,r,t),e.elementType=Kc,e.lanes=n,e.stateNode={isHidden:!1},e}function Ta(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function $a(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ei(e,t,n,r,o,s,a,i,u){return e=new hg(e,t,n,i,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ct(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fi(s),e}function yg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Zf(e){if(!e)return jn;e=e._reactInternals;e:{if(Jn(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(mt(n))return Ad(e,n,t)}return t}function Wf(e,t,n,r,o,s,a,i,u){return e=Ei(n,r,!0,e,o,s,a,i,u),e.context=Zf(null),n=e.current,r=at(),o=_n(n),s=tn(r,o),s.callback=t??null,kn(n,s,o),e.current.lanes=o,bo(e,o,r),gt(e,r),e}function Ys(e,t,n,r){var o=t.current,s=at(),a=_n(o);return n=Zf(n),t.context===null?t.context=n:t.pendingContext=n,t=tn(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kn(o,t,a),e!==null&&(Zt(e,o,a,s),rs(e,o,a)),a}function $s(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pi(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}function vg(){return null}var Bf=typeof reportError=="function"?reportError:function(e){console.error(e)};function zi(e){this._internalRoot=e}Xs.prototype.render=zi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Ys(e,t,null,null)};Xs.prototype.unmount=zi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){Ys(null,e,null,null)}),t[on]=null}};function Xs(e){this._internalRoot=e}Xs.prototype.unstable_scheduleHydration=function(e){if(e){var t=wd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pn.length&&t!==0&&t<pn[n].priority;n++);pn.splice(n,0,e),n===0&&bd(e)}};function Ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ea(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ec(){}function xg(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=$s(a);s.call(c)}}var a=Wf(t,r,e,0,null,!1,!1,"",ec);return e._reactRootContainer=a,e[on]=a.current,co(e.nodeType===8?e.parentNode:e),Vn(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var i=r;r=function(){var c=$s(u);i.call(c)}}var u=Ei(e,0,!1,null,null,!1,!1,"",ec);return e._reactRootContainer=u,e[on]=u.current,co(e.nodeType===8?e.parentNode:e),Vn(function(){Ys(t,u,n,r)}),u}function ta(e,t,n,r,o){var s=n._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var i=o;o=function(){var u=$s(a);i.call(u)}}Ys(t,a,e,o)}else a=xg(n,t,e,o,r);return $s(a)}vd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gr(t.pendingLanes);n!==0&&(ql(t,n|1),gt(t,De()),!(ce&6)&&(Ir=De()+500,zn()))}break;case 13:Vn(function(){var r=sn(e,1);if(r!==null){var o=at();Zt(r,e,1,o)}}),Pi(e,1)}};Yl=function(e){if(e.tag===13){var t=sn(e,134217728);if(t!==null){var n=at();Zt(t,e,134217728,n)}Pi(e,134217728)}};xd=function(e){if(e.tag===13){var t=_n(e),n=sn(e,t);if(n!==null){var r=at();Zt(n,e,t,r)}Pi(e,t)}};wd=function(){return he};kd=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};Xa=function(e,t,n){switch(t){case"input":if(Va(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Gs(r);if(!o)throw Error($(90));Yc(r),Va(r,o)}}}break;case"textarea":ed(e,n);break;case"select":t=n.value,t!=null&&mr(e,!!n.multiple,t,!1)}};ld=Ni;id=Vn;var wg={usingClientEntryPoint:!1,Events:[So,sr,Gs,sd,ad,Ni]},Ar={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kg={bundleType:Ar.bundleType,version:Ar.version,rendererPackageName:Ar.rendererPackageName,rendererConfig:Ar.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ar.findFiberByHostInstance||vg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{As=Go.inject(kg),Ht=Go}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wg;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ri(t))throw Error($(200));return yg(e,t,null,n)};_t.createRoot=function(e,t){if(!Ri(e))throw Error($(299));var n=!1,r="",o=Bf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ei(e,1,!1,null,null,n,!1,r,o),e[on]=t.current,co(e.nodeType===8?e.parentNode:e),new zi(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=dd(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return Vn(e)};_t.hydrate=function(e,t,n){if(!ea(t))throw Error($(200));return ta(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Ri(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",a=Bf;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Wf(t,null,e,1,n??null,o,!1,s,a),e[on]=t.current,co(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xs(t)};_t.render=function(e,t,n){if(!ea(t))throw Error($(200));return ta(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!ea(e))throw Error($(40));return e._reactRootContainer?(Vn(function(){ta(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};_t.unstable_batchedUpdates=Ni;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ea(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return ta(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function Gf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gf)}catch(e){console.error(e)}}Gf(),Bc.exports=_t;var Vf=Bc.exports,tc=Vf;Ua.createRoot=tc.createRoot,Ua.hydrateRoot=tc.hydrateRoot;let Un=null;const Hf=v.createContext(null);function bg(){if(Un){try{console.log("[v0] Closing global WebSocket connection"),Un.close()}catch(e){console.warn("[v0] Error while closing global socket:",e)}Un=null}}function _g({children:e,AuthResponseObject:t,showToast:n}){const r=v.useRef(Un),[o,s]=v.useState(null),[a,i]=v.useState(!1),[u,c]=v.useState(t.tokens.jwt),[m,f]=v.useState(0),h=v.useRef(null),w=v.useRef(null),y=v.useRef(0),_=v.useRef([]),p=(window.location.protocol==="https:"?"wss:":"ws:")+"//"+window.location.host+"/ws",d=v.useCallback(x=>{const I=typeof x=="string"?x:JSON.stringify(x);return r.current&&r.current.readyState===WebSocket.OPEN?(r.current.send(I),!0):(console.log("[v0] Socket not connected, queueing message"),_.current.push(I),!1)},[]),g=v.useCallback(async()=>{var x,I;try{console.log("[Auth] Refreshing JWT token..."),console.log("[Auth] Using refresh token:",((x=t.tokens.refresh)==null?void 0:x.substring(0,20))+"...");const z=await fetch("/public_api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t.tokens.refresh}),credentials:"include"});if(!z.ok){const k=await z.json().catch(()=>({message:"Unknown error"}));throw console.error("[Auth] Token refresh failed with status:",z.status,k),new Error(`Token refresh failed: ${z.status} - ${k.message}`)}const j=await z.json();console.log("[Auth] Token refreshed successfully"),console.log("[Auth] New JWT:",((I=j.tokens.jwt)==null?void 0:I.substring(0,20))+"..."),c(j.tokens.jwt),t.tokens.jwt=j.tokens.jwt,j.tokens.refresh&&(t.tokens.refresh=j.tokens.refresh,console.log("[Auth] New refresh token received")),r.current&&r.current.readyState===WebSocket.OPEN?(console.log("[Auth] Re-authenticating WebSocket with new token"),r.current.send(JSON.stringify({target_container:"hub",funcId:"user_connected",payload:{token:j.tokens.jwt}}))):console.warn("[Auth] WebSocket not connected, cannot re-authenticate")}catch(z){console.error("[Auth] Token refresh failed:",z),console.error("[Auth] Redirecting to login in 3 seconds..."),setTimeout(()=>{window.location.href="/login"},3e3)}},[t]);return v.useEffect(()=>(h.current&&clearInterval(h.current),h.current=setInterval(()=>{g()},10*60*1e3),console.log("[Auth] Token refresh scheduled every 10 minutes"),()=>{h.current&&(clearInterval(h.current),console.log("[Auth] Token refresh interval cleared"))}),[g]),v.useEffect(()=>(!r.current||r.current.readyState===WebSocket.CLOSED||r.current.readyState===WebSocket.CLOSING?(console.log("[v0] Creating new WebSocket connection to:",p),r.current=new WebSocket(p),Un=r.current,r.current.onopen=()=>{console.log("[v0] WebSocket connected, authorizing with JWT"),r.current.send(JSON.stringify({authorization:u})),i(!0),y.current=0,w.current&&(clearTimeout(w.current),w.current=null),_.current.length>0&&(console.log(`[v0] Sending ${_.current.length} queued messages`),_.current.forEach(x=>{var I;(I=r.current)==null||I.send(x)}),_.current=[]),y.current>0&&n&&n("Reconnected successfully","success")},r.current.onmessage=x=>{var I,z;try{const j=JSON.parse(x.data);j.funcId!=="get_game_state"&&console.log("[v0] WebSocket message:",j.funcId),(j.code===401||(I=j.message)!=null&&I.includes("unauthorized")||(z=j.message)!=null&&z.includes("token expired"))&&(console.warn("[Auth] Received auth error, attempting token refresh"),g()),s(j)}catch{const j=String(x.data);console.log("[v0] Couldn't parse:",j),j.includes("Failed to forward to container")||j.includes("has never opened a socket")?n&&n("Service temporarily unavailable. Please wait a moment and try again.","error"):n&&j.length>0&&j.length<500&&n(j,"error")}},r.current.onclose=x=>{if(console.log("[v0] WebSocket disconnected, code:",x.code,"reason:",x.reason),Un=null,i(!1),x.code===1e3&&x.wasClean){console.log("[v0] Clean disconnect, not reconnecting");return}const I=10,z=1e3;if(y.current<I){const j=Math.min(z*Math.pow(2,y.current),3e4);y.current+=1,console.log(`[v0] Attempting to reconnect in ${j}ms (attempt ${y.current}/${I})`),n&&y.current===1&&n("Connection lost. Reconnecting...","error"),w.current=setTimeout(()=>{console.log("[v0] Reconnecting..."),r.current=null,Un=null,f(k=>k+1)},j)}else console.error("[v0] Max reconnection attempts reached. Please refresh the page."),n&&n("Unable to reconnect. Please refresh the page.","error")},r.current.onerror=x=>{console.error("[v0] WebSocket error:",x),i(!1)}):i(r.current.readyState===WebSocket.OPEN),()=>{w.current&&clearTimeout(w.current)}),[p,u,g,m,n]),l.jsxs(Hf.Provider,{value:{socket:r,payloadReceived:o,isConnected:a,refreshToken:g,sendMessage:d},children:[l.jsx("div",{style:{marginBottom:"10px"},children:l.jsx("button",{onClick:g,style:{backgroundColor:"darkblue",color:"white",border:"1px solid blue",padding:"5px 10px",cursor:"pointer"},children:"Manual Token Refresh"})}),e]})}function jo(){const e=v.useContext(Hf);if(!e)throw new Error("useWebSocket must be used inside <SocketComponent>");return e}function Sg({tempToken:e,onVerifySuccess:t,onCancel:n}){const[r,o]=v.useState(""),[s,a]=v.useState(!1),[i,u]=v.useState(null),c=async()=>{var f,h;if(r.length!==6){u("Please enter a 6-digit code");return}a(!0),u(null);try{const w=await fetch("/public_api/auth/2fa/verify-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tempToken:e,code:r})});if(!w.ok){const _=await w.json();throw new Error(_.message||"Invalid 2FA code")}const y=await w.json();(f=y==null?void 0:y.tokens)!=null&&f.jwt&&localStorage.setItem("jwt",y.tokens.jwt),(h=y==null?void 0:y.tokens)!=null&&h.refresh&&localStorage.setItem("refreshToken",y.tokens.refresh),t(y)}catch(w){u(w.message||"Verification failed")}finally{a(!1)}},m=f=>{f.key==="Enter"&&(f.preventDefault(),c())};return l.jsx("div",{className:"flex items-start justify-center bg-gradient-to-br from-blue-50 dark:from-gray-900 via-white dark:via-gray-800 to-purple-50 dark:to-gray-900 px-4 py-4",children:l.jsxs("div",{className:"w-full max-w-md shadow-lg glass-light-sm dark:glass-dark-sm glass-border p-4 md:p-6 mt-4 md:mt-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-2 text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),l.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:"Enter the 6-digit code from your authenticator app"}),i&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-center",children:i}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"2fa-code",className:"block mb-1 font-semibold text-gray-700 dark:text-gray-200",children:"Authentication Code"}),l.jsx("input",{id:"2fa-code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,value:r,onChange:f=>o(f.target.value.replace(/\D/g,"")),onKeyPress:m,disabled:s,placeholder:"000000",className:"w-full px-4 py-3 text-center text-2xl tracking-widest border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700/80 dark:text-white disabled:opacity-50",autoFocus:!0})]}),l.jsx("button",{onClick:c,disabled:s||r.length!==6,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Verifying...":"Verify"}),l.jsx("button",{onClick:n,disabled:s,className:"w-full py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})})}function Ng({userId:e,username:t,onSetupComplete:n,onCancel:r}){const[o,s]=v.useState("generate"),[a,i]=v.useState(null),[u,c]=v.useState(null),[m,f]=v.useState(""),[h,w]=v.useState(!1),[y,_]=v.useState(null),b=async()=>{w(!0),_(null);try{const d=await fetch("/public_api/auth/2fa/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,username:t})});if(!d.ok){const x=await d.json();throw new Error(x.message||"Failed to generate 2FA secret")}const g=await d.json();i(g.qrCode),c(g.secret),s("verify")}catch(d){_(d.message||"Setup failed")}finally{w(!1)}},p=async()=>{if(m.length!==6){_("Please enter a 6-digit code");return}w(!0),_(null);try{const d=await fetch("/public_api/auth/2fa/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,code:m})});if(!d.ok){const g=await d.json();throw new Error(g.message||"Invalid verification code")}n()}catch(d){_(d.message||"Verification failed")}finally{w(!1)}};return o==="generate"?l.jsxs("div",{className:"p-6 glass-light-sm dark:glass-dark-sm glass-border shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Enable Two-Factor Authentication"}),l.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:"Two-factor authentication adds an extra layer of security to your account. You'll need an authenticator app like Google Authenticator or Authy."}),y&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:y}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:b,disabled:h,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Generating...":"Get Started"}),l.jsx("button",{onClick:r,disabled:h,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]}):l.jsxs("div",{className:"p-6 glass-light-sm dark:glass-dark-sm glass-border shadow-md max-w-md mx-auto",children:[l.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Scan QR Code"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"1. Open your authenticator app"}),l.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"2. Scan this QR code:"}),a&&l.jsx("div",{className:"flex justify-center mb-4 p-4 bg-white",children:l.jsx("img",{src:a,alt:"2FA QR Code",className:"w-64 h-64"})}),l.jsxs("details",{className:"mb-4",children:[l.jsx("summary",{className:"cursor-pointer text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Can't scan? Enter manually"}),l.jsx("div",{className:"mt-2 p-3 bg-gray-100/40 dark:bg-gray-700/50 font-mono text-xs break-all",children:u})]}),l.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"3. Enter the 6-digit code from your app:"})]}),y&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:y}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,value:m,onChange:d=>f(d.target.value.replace(/\D/g,"")),disabled:h,placeholder:"000000",className:"w-full px-4 py-3 text-center text-2xl tracking-widest border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700/80 dark:text-white disabled:opacity-50",autoFocus:!0}),l.jsx("button",{onClick:p,disabled:h||m.length!==6,className:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Verifying...":"Enable 2FA"}),l.jsx("button",{onClick:r,disabled:h,className:"w-full py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})}function jg({userId:e,onDisableComplete:t,onCancel:n}){const[r,o]=v.useState(!1),[s,a]=v.useState(null),i=async()=>{o(!0),a(null);try{const u=await fetch("/public_api/auth/2fa/disable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!u.ok){const c=await u.json();throw new Error(c.message||"Failed to disable 2FA")}t()}catch(u){a(u.message||"Disable failed")}finally{o(!1)}};return l.jsxs("div",{className:"p-6 glass-light-sm dark:glass-dark-sm glass-border shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Disable Two-Factor Authentication"}),l.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:"Are you sure you want to disable two-factor authentication? This will make your account less secure."}),s&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:s}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:i,disabled:r,className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Disabling...":"Disable 2FA"}),l.jsx("button",{onClick:n,disabled:r,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})}const nc=(e,t)=>{e.key==="Enter"&&(e.preventDefault(),t())};function Ig({onLoginSuccess:e}){const t=v.useId(),[n,r]=v.useState(""),[o,s]=v.useState(""),[a,i]=v.useState(!1),[u,c]=v.useState(null),[m,f]=v.useState(!1),[h,w]=v.useState(null),y=d=>d?d.length<3?"Username must be at least 3 characters":null:"Username is required",_=d=>d?d.length<6?"Password must be at least 6 characters":null:"Password is required",b=async()=>{var x,I;c(null);const d=y(n),g=_(o);if(d||g){c(d||g);return}i(!0);try{const z=await fetch("/public_api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:o})});if(!z.ok){const k=await z.text();throw new Error(k||"Login failed")}const j=await z.json();if(console.log("[v0] Login response:",j),j!=null&&j.requires2FA&&(j!=null&&j.tempToken)){f(!0),w(j.tempToken);return}(x=j==null?void 0:j.tokens)!=null&&x.jwt?(localStorage.setItem("jwt",j.tokens.jwt),console.log("[v0] Stored JWT token:",j.tokens.jwt)):console.warn("[v0] No JWT token found in login response"),(I=j==null?void 0:j.tokens)!=null&&I.refresh&&localStorage.setItem("refreshToken",j.tokens.refresh),e(j)}catch(z){c(z.message||"Login failed")}finally{i(!1)}},p=()=>{f(!1),w(null),s("")};return m&&h?l.jsx(Sg,{tempToken:h,onVerifySuccess:e,onCancel:p}):l.jsx("div",{className:"flex items-start justify-center px-4 py-4",children:l.jsxs("div",{className:"w-full max-w-md shadow-lg p-4 md:p-6 mt-4 md:mt-6 glass-light-sm dark:glass-dark-sm glass-border",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4 text-gray-900 dark:text-white",children:"Login"}),u&&l.jsx("div",{className:"mb-4 text-red-500 text-center",children:u}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`${t}-login-username`,className:"block mb-1 font-semibold text-gray-700 dark:text-gray-200",children:"Username"}),l.jsx("input",{id:`${t}-login-username`,type:"text",value:n,onChange:d=>r(d.target.value),onKeyDown:d=>nc(d,b),className:"w-full border px-3 py-2 border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400",disabled:a,placeholder:"Your username"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`${t}-login-password`,className:"block mb-1 font-semibold text-gray-700 dark:text-gray-200",children:"Password"}),l.jsx("input",{id:`${t}-login-password`,type:"password",value:o,onChange:d=>s(d.target.value),onKeyDown:d=>nc(d,b),className:"w-full border px-3 py-2 border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400",disabled:a,placeholder:"Your password"})]}),l.jsx("button",{onClick:b,className:"w-full bg-blue-500 dark:bg-blue-600 text-white py-2 px-4 hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors",disabled:a,children:a?"Logging in...":"Login"}),l.jsxs("div",{className:"relative my-4",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 glass-light-xs dark:glass-dark-xs glass-border text-gray-700 dark:text-gray-300",children:"Or continue with"})})]}),l.jsxs("button",{onClick:()=>window.location.href="/public_api/auth/oauth/github/login",className:"w-full bg-gray-900 dark:bg-gray-700/80 text-white py-2 px-4 hover:bg-gray-800 dark:hover:bg-gray-600/80 transition-colors flex items-center justify-center gap-2",disabled:a,children:[l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),"Continue with GitHub"]})]})]})})}function C(e,t,n){function r(i,u){var c;Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(c=i._zod).traits??(c.traits=new Set),i._zod.traits.add(e),t(i,u);for(const m in a.prototype)m in i||Object.defineProperty(i,m,{value:a.prototype[m].bind(i)});i._zod.constr=a,i._zod.def=u}const o=(n==null?void 0:n.Parent)??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function a(i){var u;const c=n!=null&&n.Parent?new s:this;r(c,i),(u=c._zod).deferred??(u.deferred=[]);for(const m of c._zod.deferred)m();return c}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:i=>{var u,c;return n!=null&&n.Parent&&i instanceof n.Parent?!0:(c=(u=i==null?void 0:i._zod)==null?void 0:u.traits)==null?void 0:c.has(e)}}),Object.defineProperty(a,"name",{value:e}),a}class wr extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Jf extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Rl={};function In(e){return e&&Object.assign(Rl,e),Rl}function Cg(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function Tl(e,t){return typeof t=="bigint"?t.toString():t}function Ti(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function $i(e){return e==null}function Di(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Eg(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const u=r.match(/\d?e-(\d?)/);u!=null&&u[1]&&(o=Number.parseInt(u[1]))}const s=n>o?n:o,a=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return a%i/10**s}const rc=Symbol("evaluating");function fe(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==rc)return r===void 0&&(r=rc,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function Qn(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Kn(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function oc(e){return JSON.stringify(e)}const Qf="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ds(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Pg=Ti(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Cr(e){if(Ds(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(Ds(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Kf(e){return Cr(e)?{...e}:Array.isArray(e)?[...e]:e}const zg=new Set(["string","number","symbol"]);function Er(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Rn(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function V(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Rg(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Tg={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function $g(e,t){const n=e._zod.def,r=Kn(e._zod.def,{get shape(){const o={};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(o[s]=n.shape[s])}return Qn(this,"shape",o),o},checks:[]});return Rn(e,r)}function Dg(e,t){const n=e._zod.def,r=Kn(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete o[s]}return Qn(this,"shape",o),o},checks:[]});return Rn(e,r)}function Og(e,t){if(!Cr(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const o=Kn(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return Qn(this,"shape",s),s},checks:[]});return Rn(e,o)}function Lg(e,t){if(!Cr(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return Qn(this,"shape",r),r},checks:e._zod.def.checks};return Rn(e,n)}function Mg(e,t){const n=Kn(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Qn(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Rn(e,n)}function Ug(e,t,n){const r=Kn(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const a in n){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=e?new e({type:"optional",innerType:o[a]}):o[a])}else for(const a in o)s[a]=e?new e({type:"optional",innerType:o[a]}):o[a];return Qn(this,"shape",s),s},checks:[]});return Rn(t,r)}function Fg(e,t,n){const r=Kn(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=new e({type:"nonoptional",innerType:o[a]}))}else for(const a in o)s[a]=new e({type:"nonoptional",innerType:o[a]});return Qn(this,"shape",s),s},checks:[]});return Rn(t,r)}function fr(e,t=0){var n;if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function pr(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function Vo(e){return typeof e=="string"?e:e==null?void 0:e.message}function Cn(e,t,n){var o,s,a,i,u,c;const r={...e,path:e.path??[]};if(!e.message){const m=Vo((a=(s=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:s.error)==null?void 0:a.call(s,e))??Vo((i=t==null?void 0:t.error)==null?void 0:i.call(t,e))??Vo((u=n.customError)==null?void 0:u.call(n,e))??Vo((c=n.localeError)==null?void 0:c.call(n,e))??"Invalid input";r.message=m}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function Oi(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function wo(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const qf=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Tl,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Yf=C("$ZodError",qf),Xf=C("$ZodError",qf,{Parent:Error});function Ag(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function Zg(e,t=n=>n.message){const n={_errors:[]},r=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>r({issues:a}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let a=n,i=0;for(;i<s.path.length;){const u=s.path[i];i===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(s))):a[u]=a[u]||{_errors:[]},a=a[u],i++}}};return r(e),n}const Li=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new wr;if(a.issues.length){const i=new((o==null?void 0:o.Err)??e)(a.issues.map(u=>Cn(u,s,In())));throw Qf(i,o==null?void 0:o.callee),i}return a.value},Mi=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const i=new((o==null?void 0:o.Err)??e)(a.issues.map(u=>Cn(u,s,In())));throw Qf(i,o==null?void 0:o.callee),i}return a.value},na=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new wr;return s.issues.length?{success:!1,error:new(e??Yf)(s.issues.map(a=>Cn(a,o,In())))}:{success:!0,data:s.value}},Wg=na(Xf),ra=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(a=>Cn(a,o,In())))}:{success:!0,data:s.value}},Bg=ra(Xf),Gg=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Li(e)(t,n,o)},Vg=e=>(t,n,r)=>Li(e)(t,n,r),Hg=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Mi(e)(t,n,o)},Jg=e=>async(t,n,r)=>Mi(e)(t,n,r),Qg=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return na(e)(t,n,o)},Kg=e=>(t,n,r)=>na(e)(t,n,r),qg=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ra(e)(t,n,o)},Yg=e=>async(t,n,r)=>ra(e)(t,n,r),Xg=/^[cC][^\s-]{8,}$/,eh=/^[0-9a-z]+$/,th=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,nh=/^[0-9a-vA-V]{20}$/,rh=/^[A-Za-z0-9]{27}$/,oh=/^[a-zA-Z0-9_-]{21}$/,sh=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ah=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,sc=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,lh=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ih="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function uh(){return new RegExp(ih,"u")}const ch=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dh=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,fh=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ph=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,mh=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ep=/^[A-Za-z0-9_-]*$/,gh=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,hh=/^\+(?:[0-9]){6,14}[0-9]$/,tp="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",yh=new RegExp(`^${tp}$`);function np(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function vh(e){return new RegExp(`^${np(e)}$`)}function xh(e){const t=np({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${tp}T(?:${r})$`)}const wh=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},kh=/^-?\d+$/,bh=/^-?\d+(?:\.\d+)?/,_h=/^(?:true|false)$/i,Sh=/^null$/i,Nh=/^[^A-Z]*$/,jh=/^[^a-z]*$/,ht=C("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),rp={number:"number",bigint:"bigint",object:"date"},op=C("$ZodCheckLessThan",(e,t)=>{ht.init(e,t);const n=rp[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),sp=C("$ZodCheckGreaterThan",(e,t)=>{ht.init(e,t);const n=rp[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ih=C("$ZodCheckMultipleOf",(e,t)=>{ht.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):Eg(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Ch=C("$ZodCheckNumberFormat",(e,t)=>{var a;ht.init(e,t),t.format=t.format||"float64";const n=(a=t.format)==null?void 0:a.includes("int"),r=n?"int":"number",[o,s]=Tg[t.format];e._zod.onattach.push(i=>{const u=i._zod.bag;u.format=t.format,u.minimum=o,u.maximum=s,n&&(u.pattern=kh)}),e._zod.check=i=>{const u=i.value;if(n){if(!Number.isInteger(u)){i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:u,inst:e});return}if(!Number.isSafeInteger(u)){u>0?i.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):i.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}u<o&&i.issues.push({origin:"number",input:u,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),u>s&&i.issues.push({origin:"number",input:u,code:"too_big",maximum:s,inst:e})}}),Eh=C("$ZodCheckMaxLength",(e,t)=>{var n;ht.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!$i(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const a=Oi(o);r.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Ph=C("$ZodCheckMinLength",(e,t)=>{var n;ht.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!$i(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const a=Oi(o);r.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),zh=C("$ZodCheckLengthEquals",(e,t)=>{var n;ht.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!$i(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const a=Oi(o),i=s>t.length;r.issues.push({origin:a,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),oa=C("$ZodCheckStringFormat",(e,t)=>{var n,r;ht.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Rh=C("$ZodCheckRegex",(e,t)=>{oa.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Th=C("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Nh),oa.init(e,t)}),$h=C("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=jh),oa.init(e,t)}),Dh=C("$ZodCheckIncludes",(e,t)=>{ht.init(e,t);const n=Er(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Oh=C("$ZodCheckStartsWith",(e,t)=>{ht.init(e,t);const n=new RegExp(`^${Er(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),Lh=C("$ZodCheckEndsWith",(e,t)=>{ht.init(e,t);const n=new RegExp(`.*${Er(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),Mh=C("$ZodCheckOverwrite",(e,t)=>{ht.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Uh{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(a=>a),o=Math.min(...r.map(a=>a.length-a.trimStart().length)),s=r.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(const a of s)this.content.push(a)}compile(){const t=Function,n=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const Fh={major:4,minor:1,patch:12},ke=C("$ZodType",(e,t)=>{var o;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Fh;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const s=(i,u,c)=>{let m=fr(i),f;for(const h of u){if(h._zod.def.when){if(!h._zod.def.when(i))continue}else if(m)continue;const w=i.issues.length,y=h._zod.check(i);if(y instanceof Promise&&(c==null?void 0:c.async)===!1)throw new wr;if(f||y instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await y,i.issues.length!==w&&(m||(m=fr(i,w)))});else{if(i.issues.length===w)continue;m||(m=fr(i,w))}}return f?f.then(()=>i):i},a=(i,u,c)=>{if(fr(i))return i.aborted=!0,i;const m=s(u,r,c);if(m instanceof Promise){if(c.async===!1)throw new wr;return m.then(f=>e._zod.parse(f,c))}return e._zod.parse(m,c)};e._zod.run=(i,u)=>{if(u.skipChecks)return e._zod.parse(i,u);if(u.direction==="backward"){const m=e._zod.parse({value:i.value,issues:[]},{...u,skipChecks:!0});return m instanceof Promise?m.then(f=>a(f,i,u)):a(m,i,u)}const c=e._zod.parse(i,u);if(c instanceof Promise){if(u.async===!1)throw new wr;return c.then(m=>s(m,r,u))}return s(c,r,u)}}e["~standard"]={validate:s=>{var a;try{const i=Wg(e,s);return i.success?{value:i.data}:{issues:(a=i.error)==null?void 0:a.issues}}catch{return Bg(e,s).then(u=>{var c;return u.success?{value:u.data}:{issues:(c=u.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),Ui=C("$ZodString",(e,t)=>{var n;ke.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??wh(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),je=C("$ZodStringFormat",(e,t)=>{oa.init(e,t),Ui.init(e,t)}),Ah=C("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ah),je.init(e,t)}),Zh=C("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=sc(r))}else t.pattern??(t.pattern=sc());je.init(e,t)}),Wh=C("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=lh),je.init(e,t)}),Bh=C("$ZodURL",(e,t)=>{je.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:gh.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Gh=C("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=uh()),je.init(e,t)}),Vh=C("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=oh),je.init(e,t)}),Hh=C("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Xg),je.init(e,t)}),Jh=C("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=eh),je.init(e,t)}),Qh=C("$ZodULID",(e,t)=>{t.pattern??(t.pattern=th),je.init(e,t)}),Kh=C("$ZodXID",(e,t)=>{t.pattern??(t.pattern=nh),je.init(e,t)}),qh=C("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=rh),je.init(e,t)}),Yh=C("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=xh(t)),je.init(e,t)}),Xh=C("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=yh),je.init(e,t)}),ey=C("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=vh(t)),je.init(e,t)}),ty=C("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=sh),je.init(e,t)}),ny=C("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ch),je.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),ry=C("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=dh),je.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),oy=C("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=fh),je.init(e,t)}),sy=C("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=ph),je.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[o,s]=r;if(!s)throw new Error;const a=Number(s);if(`${a}`!==s)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function ap(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const ay=C("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=mh),je.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{ap(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function ly(e){if(!ep.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return ap(n)}const iy=C("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ep),je.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{ly(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),uy=C("$ZodE164",(e,t)=>{t.pattern??(t.pattern=hh),je.init(e,t)});function cy(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const dy=C("$ZodJWT",(e,t)=>{je.init(e,t),e._zod.check=n=>{cy(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),lp=C("$ZodNumber",(e,t)=>{ke.init(e,t),e._zod.pattern=e._zod.bag.pattern??bh,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),fy=C("$ZodNumber",(e,t)=>{Ch.init(e,t),lp.init(e,t)}),py=C("$ZodBoolean",(e,t)=>{ke.init(e,t),e._zod.pattern=_h,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),my=C("$ZodNull",(e,t)=>{ke.init(e,t),e._zod.pattern=Sh,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const o=n.value;return o===null||n.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),n}}),gy=C("$ZodAny",(e,t)=>{ke.init(e,t),e._zod.parse=n=>n}),hy=C("$ZodUnknown",(e,t)=>{ke.init(e,t),e._zod.parse=n=>n}),yy=C("$ZodNever",(e,t)=>{ke.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function ac(e,t,n){e.issues.length&&t.issues.push(...pr(n,e.issues)),t.value[n]=e.value}const vy=C("$ZodArray",(e,t)=>{ke.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let a=0;a<o.length;a++){const i=o[a],u=t.element._zod.run({value:i,issues:[]},r);u instanceof Promise?s.push(u.then(c=>ac(c,n,a))):ac(u,n,a)}return s.length?Promise.all(s).then(()=>n):n}});function Os(e,t,n,r){e.issues.length&&t.issues.push(...pr(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function ip(e){var r,o,s,a;const t=Object.keys(e.shape);for(const i of t)if(!((a=(s=(o=(r=e.shape)==null?void 0:r[i])==null?void 0:o._zod)==null?void 0:s.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const n=Rg(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function up(e,t,n,r,o,s){const a=[],i=o.keySet,u=o.catchall._zod,c=u.def.type;for(const m of Object.keys(t)){if(i.has(m))continue;if(c==="never"){a.push(m);continue}const f=u.run({value:t[m],issues:[]},r);f instanceof Promise?e.push(f.then(h=>Os(h,n,m,t))):Os(f,n,m,t)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const xy=C("$ZodObject",(e,t)=>{ke.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const i=t.shape;Object.defineProperty(t,"shape",{get:()=>{const u={...i};return Object.defineProperty(t,"shape",{value:u}),u}})}const r=Ti(()=>ip(t));fe(e._zod,"propValues",()=>{const i=t.shape,u={};for(const c in i){const m=i[c]._zod;if(m.values){u[c]??(u[c]=new Set);for(const f of m.values)u[c].add(f)}}return u});const o=Ds,s=t.catchall;let a;e._zod.parse=(i,u)=>{a??(a=r.value);const c=i.value;if(!o(c))return i.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),i;i.value={};const m=[],f=a.shape;for(const h of a.keys){const y=f[h]._zod.run({value:c[h],issues:[]},u);y instanceof Promise?m.push(y.then(_=>Os(_,i,h,c))):Os(y,i,h,c)}return s?up(m,c,i,u,r.value,e):m.length?Promise.all(m).then(()=>i):i}}),wy=C("$ZodObjectJIT",(e,t)=>{xy.init(e,t);const n=e._zod.parse,r=Ti(()=>ip(t)),o=h=>{const w=new Uh(["shape","payload","ctx"]),y=r.value,_=g=>{const x=oc(g);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};w.write("const input = payload.value;");const b=Object.create(null);let p=0;for(const g of y.keys)b[g]=`key_${p++}`;w.write("const newResult = {};");for(const g of y.keys){const x=b[g],I=oc(g);w.write(`const ${x} = ${_(g)};`),w.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        
        if (${x}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${x}.value;
        }
        
      `)}w.write("payload.value = newResult;"),w.write("return payload;");const d=w.compile();return(g,x)=>d(h,g,x)};let s;const a=Ds,i=!Rl.jitless,c=i&&Pg.value,m=t.catchall;let f;e._zod.parse=(h,w)=>{f??(f=r.value);const y=h.value;return a(y)?i&&c&&(w==null?void 0:w.async)===!1&&w.jitless!==!0?(s||(s=o(t.shape)),h=s(h,w),m?up([],y,h,w,f,e):h):n(h,w):(h.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),h)}});function lc(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!fr(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(a=>Cn(a,r,In())))}),t)}const ky=C("$ZodUnion",(e,t)=>{ke.init(e,t),fe(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),fe(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),fe(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),fe(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>Di(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let a=!1;const i=[];for(const u of t.options){const c=u._zod.run({value:o.value,issues:[]},s);if(c instanceof Promise)i.push(c),a=!0;else{if(c.issues.length===0)return c;i.push(c)}}return a?Promise.all(i).then(u=>lc(u,o,e,s)):lc(i,o,e,s)}}),by=C("$ZodIntersection",(e,t)=>{ke.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),a=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([u,c])=>ic(n,u,c)):ic(n,s,a)}});function $l(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Cr(e)&&Cr(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const a=$l(e[s],t[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};o[s]=a.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],a=$l(o,s);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function ic(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),fr(e))return e;const r=$l(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const _y=C("$ZodRecord",(e,t)=>{ke.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Cr(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const s=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;n.value={};for(const u of a)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){const c=t.valueType._zod.run({value:o[u],issues:[]},r);c instanceof Promise?s.push(c.then(m=>{m.issues.length&&n.issues.push(...pr(u,m.issues)),n.value[u]=m.value})):(c.issues.length&&n.issues.push(...pr(u,c.issues)),n.value[u]=c.value)}let i;for(const u in o)a.has(u)||(i=i??[],i.push(u));i&&i.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:i})}else{n.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;const i=t.keyType._zod.run({value:a,issues:[]},r);if(i instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(i.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:i.issues.map(c=>Cn(c,r,In())),input:a,path:[a],inst:e}),n.value[i.value]=i.value;continue}const u=t.valueType._zod.run({value:o[a],issues:[]},r);u instanceof Promise?s.push(u.then(c=>{c.issues.length&&n.issues.push(...pr(a,c.issues)),n.value[i.value]=c.value})):(u.issues.length&&n.issues.push(...pr(a,u.issues)),n.value[i.value]=u.value)}}return s.length?Promise.all(s).then(()=>n):n}}),Sy=C("$ZodEnum",(e,t)=>{ke.init(e,t);const n=Cg(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>zg.has(typeof o)).map(o=>typeof o=="string"?Er(o):o.toString()).join("|")})$`),e._zod.parse=(o,s)=>{const a=o.value;return r.has(a)||o.issues.push({code:"invalid_value",values:n,input:a,inst:e}),o}}),Ny=C("$ZodLiteral",(e,t)=>{if(ke.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?Er(n):n?Er(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,r)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),jy=C("$ZodTransform",(e,t)=>{ke.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Jf(e.constructor.name);const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(n.value=a,n));if(o instanceof Promise)throw new wr;return n.value=o,n}});function uc(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Iy=C("$ZodOptional",(e,t)=>{ke.init(e,t),e._zod.optin="optional",e._zod.optout="optional",fe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),fe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Di(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>uc(s,n.value)):uc(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Cy=C("$ZodNullable",(e,t)=>{ke.init(e,t),fe(e._zod,"optin",()=>t.innerType._zod.optin),fe(e._zod,"optout",()=>t.innerType._zod.optout),fe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Di(n.source)}|null)$`):void 0}),fe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Ey=C("$ZodDefault",(e,t)=>{ke.init(e,t),e._zod.optin="optional",fe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>cc(s,t)):cc(o,t)}});function cc(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Py=C("$ZodPrefault",(e,t)=>{ke.init(e,t),e._zod.optin="optional",fe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),zy=C("$ZodNonOptional",(e,t)=>{ke.init(e,t),fe(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>dc(s,e)):dc(o,e)}});function dc(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Ry=C("$ZodCatch",(e,t)=>{ke.init(e,t),fe(e._zod,"optin",()=>t.innerType._zod.optin),fe(e._zod,"optout",()=>t.innerType._zod.optout),fe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(a=>Cn(a,r,In()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>Cn(s,r,In()))},input:n.value}),n.issues=[]),n)}}),Ty=C("$ZodPipe",(e,t)=>{ke.init(e,t),fe(e._zod,"values",()=>t.in._zod.values),fe(e._zod,"optin",()=>t.in._zod.optin),fe(e._zod,"optout",()=>t.out._zod.optout),fe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=t.out._zod.run(n,r);return s instanceof Promise?s.then(a=>Ho(a,t.in,r)):Ho(s,t.in,r)}const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>Ho(s,t.out,r)):Ho(o,t.out,r)}});function Ho(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const $y=C("$ZodReadonly",(e,t)=>{ke.init(e,t),fe(e._zod,"propValues",()=>t.innerType._zod.propValues),fe(e._zod,"values",()=>t.innerType._zod.values),fe(e._zod,"optin",()=>t.innerType._zod.optin),fe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(fc):fc(o)}});function fc(e){return e.value=Object.freeze(e.value),e}const Dy=C("$ZodLazy",(e,t)=>{ke.init(e,t),fe(e._zod,"innerType",()=>t.getter()),fe(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),fe(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),fe(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),fe(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(n,r)=>e._zod.innerType._zod.run(n,r)}),Oy=C("$ZodCustom",(e,t)=>{ht.init(e,t),ke.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>pc(s,n,r,e));pc(o,n,r,e)}});function pc(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(wo(o))}}class Ly{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function My(){return new Ly}const Jo=My();function Uy(e,t){return new e({type:"string",...V(t)})}function Fy(e,t){return new e({type:"string",coerce:!0,...V(t)})}function cp(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...V(t)})}function mc(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...V(t)})}function Ay(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...V(t)})}function Zy(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...V(t)})}function Wy(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...V(t)})}function By(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...V(t)})}function Gy(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...V(t)})}function Vy(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...V(t)})}function Hy(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...V(t)})}function Jy(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...V(t)})}function Qy(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...V(t)})}function Ky(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...V(t)})}function qy(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...V(t)})}function Yy(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...V(t)})}function Xy(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...V(t)})}function ev(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...V(t)})}function tv(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...V(t)})}function nv(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...V(t)})}function rv(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...V(t)})}function ov(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...V(t)})}function sv(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...V(t)})}function av(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...V(t)})}function lv(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...V(t)})}function iv(e,t){return new e({type:"string",format:"date",check:"string_format",...V(t)})}function uv(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...V(t)})}function cv(e,t){return new e({type:"string",format:"duration",check:"string_format",...V(t)})}function dv(e,t){return new e({type:"number",checks:[],...V(t)})}function fv(e,t){return new e({type:"number",coerce:!0,checks:[],...V(t)})}function pv(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...V(t)})}function mv(e,t){return new e({type:"boolean",...V(t)})}function gv(e,t){return new e({type:"boolean",coerce:!0,...V(t)})}function hv(e,t){return new e({type:"null",...V(t)})}function yv(e){return new e({type:"any"})}function vv(e){return new e({type:"unknown"})}function xv(e,t){return new e({type:"never",...V(t)})}function gc(e,t){return new op({check:"less_than",...V(t),value:e,inclusive:!1})}function Da(e,t){return new op({check:"less_than",...V(t),value:e,inclusive:!0})}function hc(e,t){return new sp({check:"greater_than",...V(t),value:e,inclusive:!1})}function Oa(e,t){return new sp({check:"greater_than",...V(t),value:e,inclusive:!0})}function yc(e,t){return new Ih({check:"multiple_of",...V(t),value:e})}function dp(e,t){return new Eh({check:"max_length",...V(t),maximum:e})}function Ls(e,t){return new Ph({check:"min_length",...V(t),minimum:e})}function fp(e,t){return new zh({check:"length_equals",...V(t),length:e})}function wv(e,t){return new Rh({check:"string_format",format:"regex",...V(t),pattern:e})}function kv(e){return new Th({check:"string_format",format:"lowercase",...V(e)})}function bv(e){return new $h({check:"string_format",format:"uppercase",...V(e)})}function _v(e,t){return new Dh({check:"string_format",format:"includes",...V(t),includes:e})}function Sv(e,t){return new Oh({check:"string_format",format:"starts_with",...V(t),prefix:e})}function Nv(e,t){return new Lh({check:"string_format",format:"ends_with",...V(t),suffix:e})}function Io(e){return new Mh({check:"overwrite",tx:e})}function jv(e){return Io(t=>t.normalize(e))}function Iv(){return Io(e=>e.trim())}function Cv(){return Io(e=>e.toLowerCase())}function Ev(){return Io(e=>e.toUpperCase())}function Pv(e,t,n){return new e({type:"array",element:t,...V(n)})}function zv(e,t,n){return new e({type:"custom",check:"custom",fn:t,...V(n)})}function Rv(e){const t=Tv(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(wo(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(wo(o))}},e(n.value,n)));return t}function Tv(e,t){const n=new ht({check:"custom",...V(t)});return n._zod.check=e,n}const $v=C("ZodISODateTime",(e,t)=>{Yh.init(e,t),Pe.init(e,t)});function Dv(e){return lv($v,e)}const Ov=C("ZodISODate",(e,t)=>{Xh.init(e,t),Pe.init(e,t)});function Lv(e){return iv(Ov,e)}const Mv=C("ZodISOTime",(e,t)=>{ey.init(e,t),Pe.init(e,t)});function Uv(e){return uv(Mv,e)}const Fv=C("ZodISODuration",(e,t)=>{ty.init(e,t),Pe.init(e,t)});function Av(e){return cv(Fv,e)}const Zv=(e,t)=>{Yf.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Zg(e,n)},flatten:{value:n=>Ag(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Tl,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Tl,2)}},isEmpty:{get(){return e.issues.length===0}}})},$t=C("ZodError",Zv,{Parent:Error}),Wv=Li($t),Bv=Mi($t),Gv=na($t),Vv=ra($t),Hv=Gg($t),Jv=Vg($t),Qv=Hg($t),Kv=Jg($t),qv=Qg($t),Yv=Kg($t),Xv=qg($t),ex=Yg($t),Se=C("ZodType",(e,t)=>(ke.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(Kn(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(n,r)=>Rn(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>Wv(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>Gv(e,n,r),e.parseAsync=async(n,r)=>Bv(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>Vv(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>Hv(e,n,r),e.decode=(n,r)=>Jv(e,n,r),e.encodeAsync=async(n,r)=>Qv(e,n,r),e.decodeAsync=async(n,r)=>Kv(e,n,r),e.safeEncode=(n,r)=>qv(e,n,r),e.safeDecode=(n,r)=>Yv(e,n,r),e.safeEncodeAsync=async(n,r)=>Xv(e,n,r),e.safeDecodeAsync=async(n,r)=>ex(e,n,r),e.refine=(n,r)=>e.check(Jx(n,r)),e.superRefine=n=>e.check(Qx(n)),e.overwrite=n=>e.check(Io(n)),e.optional=()=>kc(e),e.nullable=()=>bc(e),e.nullish=()=>kc(bc(e)),e.nonoptional=n=>Ux(e,n),e.array=()=>ge(e),e.or=n=>sa([e,n]),e.and=n=>Cx(e,n),e.transform=n=>_c(e,Tx(n)),e.default=n=>Ox(e,n),e.prefault=n=>Mx(e,n),e.catch=n=>Ax(e,n),e.pipe=n=>_c(e,n),e.readonly=()=>Bx(e),e.describe=n=>{const r=e.clone();return Jo.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=Jo.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Jo.get(e);const r=e.clone();return Jo.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),pp=C("_ZodString",(e,t)=>{Ui.init(e,t),Se.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(wv(...r)),e.includes=(...r)=>e.check(_v(...r)),e.startsWith=(...r)=>e.check(Sv(...r)),e.endsWith=(...r)=>e.check(Nv(...r)),e.min=(...r)=>e.check(Ls(...r)),e.max=(...r)=>e.check(dp(...r)),e.length=(...r)=>e.check(fp(...r)),e.nonempty=(...r)=>e.check(Ls(1,...r)),e.lowercase=r=>e.check(kv(r)),e.uppercase=r=>e.check(bv(r)),e.trim=()=>e.check(Iv()),e.normalize=(...r)=>e.check(jv(...r)),e.toLowerCase=()=>e.check(Cv()),e.toUpperCase=()=>e.check(Ev())}),mp=C("ZodString",(e,t)=>{Ui.init(e,t),pp.init(e,t),e.email=n=>e.check(cp(gp,n)),e.url=n=>e.check(Gy(nx,n)),e.jwt=n=>e.check(av(yx,n)),e.emoji=n=>e.check(Vy(rx,n)),e.guid=n=>e.check(mc(vc,n)),e.uuid=n=>e.check(Ay(Qo,n)),e.uuidv4=n=>e.check(Zy(Qo,n)),e.uuidv6=n=>e.check(Wy(Qo,n)),e.uuidv7=n=>e.check(By(Qo,n)),e.nanoid=n=>e.check(Hy(ox,n)),e.guid=n=>e.check(mc(vc,n)),e.cuid=n=>e.check(Jy(sx,n)),e.cuid2=n=>e.check(Qy(ax,n)),e.ulid=n=>e.check(Ky(lx,n)),e.base64=n=>e.check(rv(mx,n)),e.base64url=n=>e.check(ov(gx,n)),e.xid=n=>e.check(qy(ix,n)),e.ksuid=n=>e.check(Yy(ux,n)),e.ipv4=n=>e.check(Xy(cx,n)),e.ipv6=n=>e.check(ev(dx,n)),e.cidrv4=n=>e.check(tv(fx,n)),e.cidrv6=n=>e.check(nv(px,n)),e.e164=n=>e.check(sv(hx,n)),e.datetime=n=>e.check(Dv(n)),e.date=n=>e.check(Lv(n)),e.time=n=>e.check(Uv(n)),e.duration=n=>e.check(Av(n))});function Z(e){return Uy(mp,e)}const Pe=C("ZodStringFormat",(e,t)=>{je.init(e,t),pp.init(e,t)}),gp=C("ZodEmail",(e,t)=>{Wh.init(e,t),Pe.init(e,t)});function tx(e){return cp(gp,e)}const vc=C("ZodGUID",(e,t)=>{Ah.init(e,t),Pe.init(e,t)}),Qo=C("ZodUUID",(e,t)=>{Zh.init(e,t),Pe.init(e,t)}),nx=C("ZodURL",(e,t)=>{Bh.init(e,t),Pe.init(e,t)}),rx=C("ZodEmoji",(e,t)=>{Gh.init(e,t),Pe.init(e,t)}),ox=C("ZodNanoID",(e,t)=>{Vh.init(e,t),Pe.init(e,t)}),sx=C("ZodCUID",(e,t)=>{Hh.init(e,t),Pe.init(e,t)}),ax=C("ZodCUID2",(e,t)=>{Jh.init(e,t),Pe.init(e,t)}),lx=C("ZodULID",(e,t)=>{Qh.init(e,t),Pe.init(e,t)}),ix=C("ZodXID",(e,t)=>{Kh.init(e,t),Pe.init(e,t)}),ux=C("ZodKSUID",(e,t)=>{qh.init(e,t),Pe.init(e,t)}),cx=C("ZodIPv4",(e,t)=>{ny.init(e,t),Pe.init(e,t)}),dx=C("ZodIPv6",(e,t)=>{ry.init(e,t),Pe.init(e,t)}),fx=C("ZodCIDRv4",(e,t)=>{oy.init(e,t),Pe.init(e,t)}),px=C("ZodCIDRv6",(e,t)=>{sy.init(e,t),Pe.init(e,t)}),mx=C("ZodBase64",(e,t)=>{ay.init(e,t),Pe.init(e,t)}),gx=C("ZodBase64URL",(e,t)=>{iy.init(e,t),Pe.init(e,t)}),hx=C("ZodE164",(e,t)=>{uy.init(e,t),Pe.init(e,t)}),yx=C("ZodJWT",(e,t)=>{dy.init(e,t),Pe.init(e,t)}),Fi=C("ZodNumber",(e,t)=>{lp.init(e,t),Se.init(e,t),e.gt=(r,o)=>e.check(hc(r,o)),e.gte=(r,o)=>e.check(Oa(r,o)),e.min=(r,o)=>e.check(Oa(r,o)),e.lt=(r,o)=>e.check(gc(r,o)),e.lte=(r,o)=>e.check(Da(r,o)),e.max=(r,o)=>e.check(Da(r,o)),e.int=r=>e.check(xc(r)),e.safe=r=>e.check(xc(r)),e.positive=r=>e.check(hc(0,r)),e.nonnegative=r=>e.check(Oa(0,r)),e.negative=r=>e.check(gc(0,r)),e.nonpositive=r=>e.check(Da(0,r)),e.multipleOf=(r,o)=>e.check(yc(r,o)),e.step=(r,o)=>e.check(yc(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Rt(e){return dv(Fi,e)}const vx=C("ZodNumberFormat",(e,t)=>{fy.init(e,t),Fi.init(e,t)});function xc(e){return pv(vx,e)}const hp=C("ZodBoolean",(e,t)=>{py.init(e,t),Se.init(e,t)});function nn(e){return mv(hp,e)}const xx=C("ZodNull",(e,t)=>{my.init(e,t),Se.init(e,t)});function Ae(e){return hv(xx,e)}const wx=C("ZodAny",(e,t)=>{gy.init(e,t),Se.init(e,t)});function Tn(){return yv(wx)}const kx=C("ZodUnknown",(e,t)=>{hy.init(e,t),Se.init(e,t)});function wc(){return vv(kx)}const bx=C("ZodNever",(e,t)=>{yy.init(e,t),Se.init(e,t)});function _x(e){return xv(bx,e)}const Sx=C("ZodArray",(e,t)=>{vy.init(e,t),Se.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(Ls(n,r)),e.nonempty=n=>e.check(Ls(1,n)),e.max=(n,r)=>e.check(dp(n,r)),e.length=(n,r)=>e.check(fp(n,r)),e.unwrap=()=>e.element});function ge(e,t){return Pv(Sx,e,t)}const Nx=C("ZodObject",(e,t)=>{wy.init(e,t),Se.init(e,t),fe(e,"shape",()=>t.shape),e.keyof=()=>Tt(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:wc()}),e.loose=()=>e.clone({...e._zod.def,catchall:wc()}),e.strict=()=>e.clone({...e._zod.def,catchall:_x()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>Og(e,n),e.safeExtend=n=>Lg(e,n),e.merge=n=>Mg(e,n),e.pick=n=>$g(e,n),e.omit=n=>Dg(e,n),e.partial=(...n)=>Ug(vp,e,n[0]),e.required=(...n)=>Fg(xp,e,n[0])});function O(e,t){const n={type:"object",shape:e??{},...V(t)};return new Nx(n)}const jx=C("ZodUnion",(e,t)=>{ky.init(e,t),Se.init(e,t),e.options=t.options});function sa(e,t){return new jx({type:"union",options:e,...V(t)})}const Ix=C("ZodIntersection",(e,t)=>{by.init(e,t),Se.init(e,t)});function Cx(e,t){return new Ix({type:"intersection",left:e,right:t})}const Ex=C("ZodRecord",(e,t)=>{_y.init(e,t),Se.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Px(e,t,n){return new Ex({type:"record",keyType:e,valueType:t,...V(n)})}const Dl=C("ZodEnum",(e,t)=>{Sy.init(e,t),Se.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const a of r)if(n.has(a))s[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Dl({...t,checks:[],...V(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const a of r)if(n.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new Dl({...t,checks:[],...V(o),entries:s})}});function Tt(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Dl({type:"enum",entries:n,...V(t)})}const zx=C("ZodLiteral",(e,t)=>{Ny.init(e,t),Se.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function yp(e,t){return new zx({type:"literal",values:Array.isArray(e)?e:[e],...V(t)})}const Rx=C("ZodTransform",(e,t)=>{jy.init(e,t),Se.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Jf(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(wo(s,n.value,t));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),n.issues.push(wo(a))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function Tx(e){return new Rx({type:"transform",transform:e})}const vp=C("ZodOptional",(e,t)=>{Iy.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function kc(e){return new vp({type:"optional",innerType:e})}const $x=C("ZodNullable",(e,t)=>{Cy.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function bc(e){return new $x({type:"nullable",innerType:e})}const Dx=C("ZodDefault",(e,t)=>{Ey.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ox(e,t){return new Dx({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Kf(t)}})}const Lx=C("ZodPrefault",(e,t)=>{Py.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Mx(e,t){return new Lx({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Kf(t)}})}const xp=C("ZodNonOptional",(e,t)=>{zy.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ux(e,t){return new xp({type:"nonoptional",innerType:e,...V(t)})}const Fx=C("ZodCatch",(e,t)=>{Ry.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Ax(e,t){return new Fx({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Zx=C("ZodPipe",(e,t)=>{Ty.init(e,t),Se.init(e,t),e.in=t.in,e.out=t.out});function _c(e,t){return new Zx({type:"pipe",in:e,out:t})}const Wx=C("ZodReadonly",(e,t)=>{$y.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Bx(e){return new Wx({type:"readonly",innerType:e})}const Gx=C("ZodLazy",(e,t)=>{Dy.init(e,t),Se.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Vx(e){return new Gx({type:"lazy",getter:e})}const Hx=C("ZodCustom",(e,t)=>{Oy.init(e,t),Se.init(e,t)});function Jx(e,t={}){return zv(Hx,e,t)}function Qx(e){return Rv(e)}function wp(e){return Fy(mp,e)}function ye(e){return fv(Fi,e)}function Kx(e){return gv(hp,e)}const Pr=ye().int().min(1),Be=ye().int().min(1),Q=ye().int().min(1),kp=/^[\p{L}\p{N}\p{Emoji}\p{Emoji_Component} .,!@#\$%&*()_\-+=\[\]{};:'"<>\/?`~]+$/u,Ko=3,Sc=50;var Ai=(e=>(e[e.PRIVATE=1]="PRIVATE",e[e.DIRECT_MESSAGE=2]="DIRECT_MESSAGE",e))(Ai||{});const qn=ye().gt(0),bp=wp().min(Ko,{message:`String must be at least ${Ko} characters long`}).max(Sc,{message:`Max ${Sc} characters`}).refine(e=>e.replace(/\s/g,"").length>=Ko,{message:`Must contain at least ${Ko} non-space characters`}).refine(e=>kp.test(e),{message:"String contains invalid characters; only alphanumerics are allowed"}),qo=1,Nc=320,Zi=wp().min(qo,{message:`String must be at least ${qo} characters long`}).max(Nc,{message:`Max ${Nc} characters`}).refine(e=>e.replace(/\s/g,"").length>=qo,{message:`Must contain at least ${qo} non-space characters`}).refine(e=>kp.test(e),{message:"String contains invalid characters; only numbers and letters are allowed"}),_p=O({roomName:bp,roomType:Tt(Ai)}).strict(),Ol=O({roomId:qn,messageString:Zi}).strict(),qx=O({targetUserId:Pr,messageString:Zi}).strict(),Sp=O({roomId:qn,user_to_add:Pr}).strict(),Ll=O({roomId:qn}).strict(),Yt=O({}).strict();var Np=(e=>(e[e.None=0]="None",e[e.Pending=1]="Pending",e[e.Accepted=2]="Accepted",e[e.Blocked=3]="Blocked",e))(Np||{});const jp=Tt(Np),jc=O({userId:Q,friendId:Q,status:jp}).strict();O({friendId:Q}).strict();const Yx=O({token:Z()}).strict(),Xx=O({userId:Q,token:Z()}).strict();var Wi=(e=>(e[e.System=0]="System",e[e.Guest=1]="Guest",e[e.User=2]="User",e))(Wi||{});const Bi=O({id:Q,friendId:Q,username:Z(),alias:Z().nullable(),bio:Z().nullable(),avatarUrl:Z().nullable(),status:jp,createdAt:Rt(),onlineStatus:Rt().optional()}),Ip=O({id:Q,createdAt:Rt(),username:Z(),alias:Z().nullable(),email:Z(),bio:Z().nullable(),accountType:Tt(Wi),avatarUrl:Z().nullable(),has2FA:Kx().optional()}),Cp=Ip.omit({email:!0,accountType:!0}),et=Ip.extend({friends:ge(Bi)});O({id:Q,passwordHash:Z().nullable(),accountType:Tt(Wi)});const Nt=O({userId:Q}).strict(),Ep=O({bio:Z().optional(),alias:Z().optional(),email:Z().optional(),pfp:O({filename:Z(),data:Z()}).optional()}).strict(),ew=Rt().int().gte(0);var Ms=(e=>(e[e.INVITED=0]="INVITED",e[e.JOINED=1]="JOINED",e))(Ms||{});const Gi=O({messageId:Pr,roomId:qn,messageString:Zi,messageDate:ew,userId:Pr}).strict(),aa=O({roomName:bp,roomId:qn,roomType:Tt(Ai)}).strict(),tw=O({userId:Q,userState:Tt(Ms)}).strict(),Ml=O({room:aa,messages:ge(Gi),userConnections:ge(tw),users:ge(Cp)}).strict(),Ic=O({user:Pr,roomId:qn}).strict(),Pp=ge(aa),nw=O({roomId:qn}).strict(),rw=O({jwt:Z(),refresh:Z().optional()}),Cc=O({token:Z()}).strict();O({uid:Q}).strict();const Zr=O({tokens:rw,user:et}),zp=O({username:Z(),email:tx(),password:Z()}),ow=O({requires2FA:yp(!0),userId:Rt(),tempToken:Z()}),Rp=O({username:Z(),password:Z()}),N=O({message:Z()});O({authorization:Z()}).strict();O({target_container:Z(),funcId:Z(),payload:Tn()}).strict();O({recipients:ge(Rt()).nonempty({message:"Recipients array cannot be empty"}),funcId:Z(),payload:Tn(),code:Rt().int()}).strict();const ie=O({source_container:Z(),funcId:Z(),code:Rt().int(),payload:Tn()}).strict(),ue=O({user_id:Rt(),funcId:Z(),payload:Tn()}).strict();O({isInvokeMethod:yp(!0),target_container:Z(),funcId:Z(),userIds:ge(Q).nonempty(),payload:Tn()});const Ft=O({userId:Q,payload:Tn().optional()}).strict(),Tp=ge(ye()).refine(e=>{const t=e.reduce((n,r)=>(n[r]=(n[r]||0)+1,n),{});return Object.values(t).every(n=>n<=2)},{message:"N omore than 2 player IDS in a given pong game."}),$p=O({balls:ye().int().gt(0).lt(1e3),player_list:Tp}).strict(),sw=O({id:ye(),x:ye(),y:ye(),dx:ye().min(-1).max(1),dy:ye().min(-1).max(1)}).strict(),aw=O({x:ye(),y:ye(),l:ye().gt(0),w:ye().gt(0),r:ye(),paddle_id:Be,owner_id:Q}).strict(),lw=O({x:ye(),y:ye()}).strict(),iw=O({board_id:Be,paddle_id:Be,m:sa([nn(),Ae()])}).strict(),cs=O({board_id:Be,balls:ge(sw),paddles:ge(aw),edges:ge(lw)}).strict(),uw=O({board_id:Be,player_list:Tp}).strict(),cw=O({game_id:Be,user_id:Q.optional()}).strict(),dw=O({game_id:Be}).strict(),Vi=Tt(["1v1","multiplayer","tournament_1v1","tournament_multi"]),fw=O({gameMode:Vi,playerIds:ge(Q),playerUsernames:Px(Z(),Z()).optional(),ballCount:ye().int().min(1).max(5),maxScore:ye().int().min(3).max(21),allowPowerups:nn().optional().default(!1)}).strict(),pw=O({userId:Q,username:Z(),isReady:nn(),isHost:nn()}).strict(),La=O({lobbyId:Be,gameMode:Vi,players:ge(pw),tournament:Vx(()=>Dp).optional(),ballCount:ye(),maxScore:ye(),allowPowerups:nn(),status:Tt(["waiting","starting","in_progress"])}).strict(),mw=O({userId:Q,username:Z(),alias:Z().optional()}).strict(),gw=O({matchId:Be,round:ye().int().min(1),player1Id:Q.nullable(),player2Id:Q.nullable(),winnerId:Q.nullable(),status:Tt(["pending","in_progress","completed"])}).strict(),Dp=O({tournamentId:Be,name:Z(),mode:Tt(["tournament_1v1","tournament_multi"]),players:ge(mw),matches:ge(gw),currentRound:ye().int().min(1),totalRounds:ye().int().min(1),status:Tt(["registration","in_progress","completed"]),winnerId:Q.nullable(),ballCount:ye().optional(),maxScore:ye().optional(),onchainTxHashes:ge(Z()).optional()}).strict(),hw=O({tournamentId:Be,alias:Z().min(1).max(20)}).strict(),yw=O({tournamentId:Be,matchId:Be}).strict();O({lobbyId:Be}).strict();O({lobbyId:Be,hostId:Q,hostUsername:Z(),gameMode:Vi,playerCount:ye()}).strict();const Op=O({id:Be,userId:Q,score:Rt(),rank:Rt()});sa([Zr,ow]),O({userId:Q,username:Z()}),O({qrCode:Z(),secret:Z(),uri:Z()}),O({userId:Q,code:Z()}),O({message:Z()}),O({userId:Q}),O({message:Z()}),O({tempToken:Z(),code:Z()}),O({userId:Q}),O({enabled:nn()}),Ae();const L={http:{users:{fetchUserAvatar:{endpoint:"/api/users/pfp",wrapper:Ft,method:"POST",schema:{body:O({file:Z()}),response:{200:Tn(),500:N}}}},auth:{logoutUser:{endpoint:"/api/auth/logout",wrapper:Ft,method:"POST",schema:{body:Ae(),response:{200:Ae(),500:N}}},fetchPersonalData:{endpoint:"/api/auth/gdpr/me",method:"POST",schema:{body:Ft,response:{200:et,401:N,500:N}}},requestAnonymize:{endpoint:"/api/auth/gdpr/anonymize",method:"POST",schema:{body:Ft,response:{200:et,400:N,500:N}}},requestAccountDeletion:{endpoint:"/api/auth/gdpr/delete",method:"POST",schema:{body:Ft,response:{200:Ae(),400:N,500:N}}}}},ws:{users:{test:{funcId:"test",container:"users",schema:{args_wrapper:ue,args:Yt,output_wrapper:ie,output:{Success:{code:0,payload:Z()},Failure:{code:1,payload:N}}}},userOnlineStatusUpdate:{funcId:"user_online_status_update",container:"users",schema:{args_wrapper:ue,args:Ae(),output_wrapper:ie,output:{GetOnlineUsers:{code:0,payload:ge(Q)},GetOfflineUsers:{code:1,payload:ge(Q)},Failure:{code:2,payload:N}}}},requestFriendship:{funcId:"request_friendship",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{ConnectionUpdated:{code:0,payload:Ae()},UserDoesNotExist:{code:1,payload:N},InvalidStatusRequest:{code:3,payload:N}}}},confirmFriendship:{funcId:"confirm_friendship",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{ConnectionUpdated:{code:0,payload:Ae()},UserDoesNotExist:{code:1,payload:N},InvalidStatusRequest:{code:3,payload:N}}}},denyFriendship:{funcId:"deny_friendship",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{ConnectionUpdated:{code:0,payload:Ae()},UserDoesNotExist:{code:1,payload:N},NoPendingRequest:{code:2,payload:N},FailedToUpdate:{code:3,payload:N}}}},removeFriendship:{funcId:"remove_friendship",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{ConnectionUpdated:{code:0,payload:Ae()},UserDoesNotExist:{code:1,payload:N},NotFriends:{code:2,payload:N},FailedToUpdate:{code:3,payload:N}}}},blockUser:{funcId:"block_user",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{ConnectionUpdated:{code:0,payload:Ae()},UserDoesNotExist:{code:1,payload:N},InvalidStatusRequest:{code:3,payload:N}}}},unblockUser:{funcId:"unblock_user",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{ConnectionUpdated:{code:0,payload:Ae()},UserDoesNotExist:{code:1,payload:N},InvalidStatusRequest:{code:3,payload:N}}}},fetchUserConnections:{funcId:"fetch_user_connections",container:"users",schema:{args_wrapper:ue,args:Ae(),output_wrapper:ie,output:{Success:{code:0,payload:ge(Bi)},Failure:{code:1,payload:N}}}},fetchUserGameResults:{funcId:"fetch_user_game_results",container:"users",schema:{args_wrapper:ue,args:Q,output_wrapper:ie,output:{Success:{code:0,payload:ge(Op)},Failure:{code:1,payload:N}}}},requestUserProfileData:{funcId:"user_profile",container:"users",schema:{args_wrapper:ue,args:sa([Q,Z()]),output_wrapper:ie,output:{Success:{code:0,payload:Cp},UserDoesNotExist:{code:1,payload:N}}}},updateProfile:{funcId:"update_profile",container:"users",schema:{args_wrapper:ue,args:Ep,output_wrapper:ie,output:{ProfileUpdated:{code:0,payload:et},FailedToUpdate:{code:1,payload:N}}}}},pong:{getGameState:{funcId:"get_game_state",container:"pong",schema:{args_wrapper:ue,args:Yt,output_wrapper:ie,output:{GameUpdate:{code:0,payload:cs},NotInRoom:{code:1,payload:N},InvalidInput:{code:2,payload:N}}}},movePaddle:{funcId:"move_paddle",container:"pong",schema:{args_wrapper:ue,args:iw,output_wrapper:ie,output:{MessageSent:{code:0,payload:Yt},NotInRoom:{code:1,payload:N},InvalidInput:{code:2,payload:N},NoSuchPaddle:{code:3,payload:N},NotYourPaddle:{code:4,payload:N}}}},startGame:{funcId:"start_game",container:"pong",schema:{args_wrapper:ue,args:$p,output_wrapper:ie,output:{GameInstanceCreated:{code:0,payload:uw},FailedCreateGame:{code:1,payload:N},InvalidInput:{code:2,payload:N}}}},userReportsReady:{funcId:"report_ready_for_pong_game",container:"pong",schema:{args_wrapper:ue,args:dw,output_wrapper:ie,output:{UserIsReady:{code:0,payload:cw},GameHasStarted:{code:1,payload:Yt},FailedToReady:{code:2,payload:N},AlreadyReady:{code:3,payload:N}}}},createLobby:{funcId:"create_pong_lobby",container:"pong",schema:{args_wrapper:ue,args:fw,output_wrapper:ie,output:{LobbyCreated:{code:0,payload:La},InvalidInput:{code:1,payload:N},Failed:{code:2,payload:N}}}},togglePlayerReady:{funcId:"toggle_player_ready_in_lobby",container:"pong",schema:{args_wrapper:ue,args:O({lobbyId:Be}),output_wrapper:ie,output:{LobbyUpdate:{code:0,payload:La},NotInLobby:{code:1,payload:N}}}},leaveLobby:{funcId:"leave_pong_lobby",container:"pong",schema:{args_wrapper:ue,args:O({lobbyId:Be}),output_wrapper:ie,output:{LeftLobby:{code:0,payload:O({message:Z()})},LobbyUpdate:{code:1,payload:La},NotInLobby:{code:2,payload:N}}}},startFromLobby:{funcId:"start_game_from_lobby",container:"pong",schema:{args_wrapper:ue,args:O({lobbyId:Be}),output_wrapper:ie,output:{GameStarted:{code:0,payload:cs},NotAllReady:{code:1,payload:N},NotHost:{code:2,payload:N}}}},setTournamentAlias:{funcId:"set_tournament_alias",container:"pong",schema:{args_wrapper:ue,args:hw,output_wrapper:ie,output:{AliasSet:{code:0,payload:Dp},InvalidAlias:{code:1,payload:N},NotInTournament:{code:2,payload:N}}}},joinTournamentMatch:{funcId:"join_tournament_match",container:"pong",schema:{args_wrapper:ue,args:yw,output_wrapper:ie,output:{MatchStarted:{code:0,payload:cs},MatchNotReady:{code:1,payload:N},NotYourMatch:{code:2,payload:N}}}}},chat:{sendMessage:{funcId:"/api/chat/send_message_to_room",container:"chat",schema:{args_wrapper:ue,args:Ol,output_wrapper:ie,output:{MessageSent:{code:0,payload:Gi},NotInRoom:{code:1,payload:N},MessageTooShort:{code:2,payload:N},InvalidInput:{code:3,payload:N},InvitationNotAccepted:{code:4,payload:N},FailedToStoreMessage:{code:5,payload:N}}}},sendDirectMessage:{funcId:"/api/chat/send_direct_message",container:"chat",schema:{args_wrapper:ue,args:qx,output_wrapper:ie,output:{MessageSent:{code:0,payload:nw},UserNotFound:{code:1,payload:N},MessageTooShort:{code:2,payload:N},InvalidInput:{code:3,payload:N},FailedToStoreMessage:{code:4,payload:N}}}},addUserToRoom:{funcId:"/api/chat/add_user_to_room",container:"chat",schema:{args_wrapper:ue,args:Sp,output_wrapper:ie,output:{UserAdded:{code:0,payload:Ic},NotInRoom:{code:1,payload:N},InvalidInput:{code:2,payload:N},AlreadyInRoom:{code:3,payload:N},NoSuchRoom:{code:4,payload:N},FailedToAddUser:{code:5,payload:N}}}},addRoom:{funcId:"/api/chat/add_a_new_room",container:"chat",schema:{args_wrapper:ue,args:_p,output_wrapper:ie,output:{AddedRoom:{code:0,payload:aa},FailedToAddRoom:{code:1,payload:N}}}},listRooms:{funcId:"/api/chat/list_rooms",container:"chat",schema:{args_wrapper:ue,args:Yt,output_wrapper:ie,output:{FullListGiven:{code:0,payload:Pp},NoListGiven:{code:1,payload:N}}}},joinRoom:{funcId:"/api/chat/join_room",container:"chat",schema:{args_wrapper:ue,args:Ll,output_wrapper:ie,output:{RoomJoined:{code:0,payload:Ic},NoSuchRoom:{code:1,payload:N},FailedToJoinRoom:{code:2,payload:N}}},code:{Joined:0,NoSuchRoom:1,AlreadyInRoom:2}},getRoomData:{funcId:"/api/chat/get_room_data",container:"chat",schema:{args_wrapper:ue,args:Ll,output_wrapper:ie,output:{RoomDataProvided:{code:0,payload:Ml},NoSuchRoom:{code:1,payload:N}}}},userConnected:{funcId:"user_connected",container:"chat",schema:{args_wrapper:ue,args:Yt,output_wrapper:ie,output:{UserConnected:{code:0,payload:Nt}}}}}}};ge(et),ge(Q),ge(et),O({username:Z()}),O({file:Z()}),Tn(),O({userId:Q}),Ae(),ge(jc),Ae(),ge(Bi),ge(jc),ge(Op),Ep.extend({userId:Q}),Ae(),Ae(),_p.extend({owner:Q}),O({userId1:Q,userId2:Q}),O({room:Ml,created:nn()}),Ol.extend({userId:Pr}),Sp.extend({type:Rt()}),Ae(),O({enabled:nn()}),O({userId:Q,username:Z()}),O({qrCode:Z(),secret:Z(),uri:Z()}),O({userId:Q,code:Z()}),O({message:Z()}),O({userId:Q}),O({message:Z()}),O({userId:Q,code:Z()}),O({valid:nn()}),ge(Q),Ae();const Us=[{r:0,g:255,b:0},{r:0,g:128,b:255},{r:255,g:128,b:0},{r:255,g:0,b:255},{r:255,g:255,b:0},{r:0,g:255,b:255},{r:153,g:51,b:255},{r:255,g:51,b:102}];function ft(e,t=!0){const n=e%Us.length,r=Us[n],o=t?1:.6;return`rgb(${Math.round(r.r*o)}, ${Math.round(r.g*o)}, ${Math.round(r.b*o)})`}function vw(e){const t=e%Us.length,n=Us[t];return new le(n.r/255,n.g/255,n.b/255)}const Ec=1e3,Pc=1e3,Xn=.02;function xw({gameState:e,darkMode:t=!0}){const n=v.useRef(null),r=v.useRef(null),o=v.useRef(null),s=v.useRef(new Map),a=v.useRef(new Map),i=v.useRef(new Map),u=v.useRef([]),c=v.useRef(null),m=v.useRef(null),f=v.useRef(new Map),h=v.useRef(new Map);return v.useEffect(()=>{if(!n.current)return;const w=new Fp(n.current,!0,{preserveDrawingBuffer:!0,stencil:!0});o.current=w;const y=new Ap(w),_=t?new le(.05,.05,.1):new le(.9,.92,.95);y.clearColor=_.toColor4(),r.current=y;const b=(j,k,M)=>({play:()=>{try{const E=new(window.AudioContext||window.webkitAudioContext),A=E.createOscillator(),J=E.createGain();A.type="sine",A.frequency.value=j;const xe=E.currentTime;J.gain.setValueAtTime(.3,xe),J.gain.exponentialRampToValueAtTime(.01,xe+k),A.connect(J),J.connect(E.destination),A.start(xe),A.stop(xe+k),A.onended=()=>{A.disconnect(),J.disconnect(),E.close()},console.log(`[Pong Sound] ${M} played with Web Audio API`)}catch(E){console.warn(`[Pong Sound] Failed to play ${M}:`,E)}},dispose:()=>{}}),p=[523.25,587.33,659.25,783.99,880,1046.5,1174.66,1318.51];for(let j=0;j<8;j++)f.current.set(j,b(p[j],.08,`paddle${j}`));console.log("[Pong Sound] 8 paddle sounds initialized (Web Audio API)");const d=new Zp("camera",-Math.PI/2,Math.PI/3,25,un.Zero(),y);d.attachControl(n.current,!0),d.lowerRadiusLimit=10,d.upperRadiusLimit=50;const g=new Wp("hemi",new un(0,1,0),y);g.intensity=.3;const x=new Bp("dir",new un(-1,-2,-1),y);x.position=new un(20,40,20),x.intensity=.8;const I=new Gp(1024,x);I.useBlurExponentialShadowMap=!0,I.blurKernel=32,m.current=I,w.runRenderLoop(()=>{y.render()});const z=()=>w.resize();return window.addEventListener("resize",z),()=>{window.removeEventListener("resize",z),f.current.forEach(j=>j.dispose()),f.current.clear(),s.current.clear(),a.current.clear(),i.current.clear(),u.current=[],c.current=null,h.current.clear(),y.dispose(),w.dispose()}},[]),v.useEffect(()=>{var _;if(!r.current)return;const w=r.current,y=t?new le(.05,.05,.1):new le(.9,.92,.95);if(w.clearColor=y.toColor4(),(_=c.current)!=null&&_.material){const b=c.current.material;b.diffuseColor=t?new le(.1,.1,.15):new le(.85,.9,.85),b.specularColor=t?new le(.1,.1,.1):new le(.3,.3,.3)}u.current.forEach(b=>{if(b.material){const p=b.material;p.diffuseColor=t?new le(.2,.2,.3):new le(.6,.65,.7),p.emissiveColor=t?new le(.1,.1,.2):new le(.3,.35,.4)}}),s.current.forEach(b=>{if(b.material){const p=b.material;p.diffuseColor=t?new le(0,1,0):new le(0,.6,0),p.emissiveColor=t?new le(0,.4,0):new le(0,.2,0)}}),a.current.forEach(b=>{if(b.material){const p=b.material;p.diffuseColor=t?new le(1,0,0):new le(.8,.2,0),p.emissiveColor=t?new le(.5,0,0):new le(.3,.1,0)}})},[t]),v.useEffect(()=>{if(!e||!r.current)return;const w=r.current,y=m.current,_=(d,g,x=0)=>new un((d-Ec/2)*Xn,x,(g-Pc/2)*Xn);if(e.edges&&e.edges.length>0&&u.current.length!==e.edges.length){u.current.forEach(k=>k.dispose()),u.current=[],c.current&&c.current.dispose();const d=e.edges.map(k=>new Vp((k.x-Ec/2)*Xn,(k.y-Pc/2)*Xn)),x=new Hp("floorPoly",d,w,Jp).build();x.position.y=-.1;const I=new Co("floorMat",w);I.diffuseColor=t?new le(.1,.1,.15):new le(.85,.9,.85),I.specularColor=t?new le(.1,.1,.1):new le(.3,.3,.3),x.material=I,x.receiveShadows=!0,c.current=x;const z=.5,j=.2;for(let k=0;k<e.edges.length;k++){const M=e.edges[k],E=e.edges[(k+1)%e.edges.length],A=_(M.x,M.y,0),J=_(E.x,E.y,0),xe=un.Center(A,J),Ue=un.Distance(A,J),Ge=J.subtract(A).normalize(),Oe=ia.CreateBox(`wall_${k}`,{width:Ue,height:z,depth:j},w);Oe.position=xe,Oe.position.y=z/2-.1;const rt=Math.atan2(Ge.z,Ge.x);Oe.rotation.y=-rt;const U=new Co("wallMat",w);U.diffuseColor=t?new le(.2,.2,.3):new le(.6,.65,.7),U.emissiveColor=t?new le(.1,.1,.2):new le(.3,.35,.4),U.alpha=.5,Oe.material=U,u.current.push(Oe)}}const b=new Set;e.paddles.forEach(d=>{b.add(d.paddle_id);let g=s.current.get(d.paddle_id);if(!g){const I=d.w*Xn,z=d.l*Xn;g=ia.CreateBox(`paddle_${d.paddle_id}`,{width:z,height:.5,depth:I},w);const j=new Co("paddleMat",w),k=vw(d.owner_id??d.paddle_id);j.diffuseColor=t?k:k.scale(.6),j.emissiveColor=t?k.scale(.4):k.scale(.2),g.material=j,y&&y.addShadowCaster(g),s.current.set(d.paddle_id,g)}const x=_(d.x,d.y,.25);g.position=x,g.rotation.y=-d.r+Math.PI/2});for(const[d,g]of s.current)b.has(d)||(g.dispose(),s.current.delete(d));const p=new Set;e.balls.forEach(d=>{p.add(d.id);let g=a.current.get(d.id);if(!g){g=ia.CreateSphere(`ball_${d.id}`,{diameter:.4},w);const I=new Co("ballMat",w);I.diffuseColor=t?new le(1,0,0):new le(.8,.2,0),I.emissiveColor=t?new le(.5,0,0):new le(.3,.1,0),g.material=I,y&&y.addShadowCaster(g);const z=new Qp(`ballLight_${d.id}`,new un(0,0,0),w);z.parent=g,z.intensity=.5,z.diffuse=new le(1,0,0),i.current.set(d.id,z),a.current.set(d.id,g),console.log("[Pong Sound] New ball created:",d.id,"with direction:",d.dx,d.dy)}g.position=_(d.x,d.y,.2);const x=h.current.get(d.id);if(x){const I=Math.abs(d.dx-x.dx)>.01,z=Math.abs(d.dy-x.dy)>.01;if(I||z){let j=0,k=1/0;e.paddles.forEach((E,A)=>{const J=Math.sqrt(Math.pow(d.x-E.x,2)+Math.pow(d.y-E.y,2));J<k&&(k=J,j=A)});const M=f.current.get(j);if(M)try{M.play()}catch(E){console.warn("[Pong Sound] Failed to play:",E)}}}h.current.set(d.id,{dx:d.dx,dy:d.dy})});for(const[d,g]of a.current)if(!p.has(d)){const x=i.current.get(d);x&&(x.dispose(),i.current.delete(d)),g.dispose(),a.current.delete(d),h.current.delete(d)}},[e,t]),l.jsx("canvas",{ref:n,style:{width:"100%",height:"100%",display:"block",outline:"none"}})}function ww({isOpen:e,onClose:t,roomUsers:n,currentUserId:r,onCreateGame:o}){const[s,a]=v.useState("1v1"),[i,u]=v.useState([]),[c,m]=v.useState(1),[f,h]=v.useState(5),[w,y]=v.useState(!1);if(!e)return null;const _=x=>{x!==r&&u(I=>I.includes(x)?I.filter(z=>z!==x):[...I,x])},b=()=>{const x=[r,...i];if(s==="1v1"&&x.length!==2){alert("1v1 mode requires exactly 2 players (including yourself)");return}if(s==="tournament_1v1"&&x.length<4){alert("Tournament 1v1 requires at least 4 players");return}if(s==="tournament_multi"&&x.length<4){alert("Multiplayer tournament requires at least 4 players");return}if(s==="multiplayer"&&x.length<2){alert("Multiplayer mode requires at least 2 players");return}o(s,x,{ballCount:c,maxScore:f,allowPowerups:w}),t()},p=()=>{switch(s){case"1v1":return"Classic 1 vs 1 Pong - Two players compete directly";case"multiplayer":return"Multiplayer Pong - Multiple players compete in a free-for-all match";case"tournament_1v1":return"1v1 Tournament - Players compete in bracket-style matches";case"tournament_multi":return"Multiplayer Tournament - Teams compete in bracket-style matches"}},d=()=>{switch(s){case"1v1":return 2;case"multiplayer":return 2;case"tournament_1v1":return 4;case"tournament_multi":return 4}},g=n.filter(x=>x.id!==r);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-500 to-purple-500",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:" Create Pong Game"}),l.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 transition-colors text-2xl",children:""})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Select Game Mode"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>a("1v1"),className:`p-4 border-2 transition-all ${s==="1v1"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"1 vs 1"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Classic Pong"})]}),l.jsxs("button",{onClick:()=>a("multiplayer"),className:`p-4 border-2 transition-all ${s==="multiplayer"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Multiplayer"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Free-for-all"})]}),l.jsxs("button",{onClick:()=>a("tournament_1v1"),className:`p-4 border-2 transition-all ${s==="tournament_1v1"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"1v1 Tournament"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Bracket style"})]}),l.jsxs("button",{onClick:()=>a("tournament_multi"),className:`p-4 border-2 transition-all ${s==="tournament_multi"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Multi Tournament"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Team brackets"})]})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:p()})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:["Select Players (Min: ",d(),")"]}),l.jsxs("div",{className:"bg-gray-50/40 dark:bg-gray-900/70 p-4 max-h-48 overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-100 dark:bg-blue-900/30 mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"You (Host)"})]}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Auto-selected"})]}),g.length>0?g.map(x=>l.jsxs("button",{onClick:()=>_(x.id),className:`w-full flex items-center justify-between p-2 mb-1 transition-colors ${i.includes(x.id)?"bg-blue-100 dark:bg-blue-900/30":"hover:bg-gray-100/40 dark:hover:bg-gray-800"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${x.onlineStatus===1?"bg-green-500":"bg-gray-400"}`}),l.jsx("span",{className:"text-sm font-semibold",style:{color:ft(x.id,!0)},children:x.username})]}),i.includes(x.id)&&l.jsx("span",{className:"text-blue-500",children:""})]},x.id)):l.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No other players available in this room"})]}),l.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",i.length+1," player(s)"]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Game Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Number of Balls: ",c]}),l.jsx("input",{type:"range",min:"1",max:"5",value:c,onChange:x=>m(Number(x.target.value)),className:"w-full"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Max Score: ",f]}),l.jsx("input",{type:"range",min:"3",max:"21",value:f,onChange:x=>h(Number(x.target.value)),className:"w-full"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",id:"powerups",checked:w,onChange:x=>y(x.target.checked),className:"rounded"}),l.jsx("label",{htmlFor:"powerups",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Power-ups (experimental)"})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50/40 dark:bg-gray-900/70 flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600/80 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:b,className:"px-6 py-2 bg-blue-500 text-white hover:bg-blue-600 transition-colors font-semibold",children:"Create Game"})]})]})})}function kw({lobby:e,currentUserId:t,onToggleReady:n,onStartGame:r,onLeaveLobby:o}){if(!e)return null;const s=e.players.find(m=>m.id===t),a=(s==null?void 0:s.isHost)||!1,i=e.players.every(m=>m.isReady),u=a&&i&&e.players.length>=2,c=()=>{switch(e.gameMode){case"1v1":return"1 vs 1";case"multiplayer":return"Multiplayer";case"tournament_1v1":return"1v1 Tournament";case"tournament_multi":return"Multi Tournament"}};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:" Game Lobby"}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c(),"  Lobby #",e.lobbyId]})]}),l.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Leave"})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50/40 dark:bg-gray-900/70",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Game Settings"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Balls:"})," ",l.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.settings.ballCount})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Max Score:"})," ",l.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.settings.maxScore})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Power-ups:"})," ",l.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.settings.allowPowerups?"Yes":"No"})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Players (",e.players.length,")"]}),l.jsx("div",{className:"space-y-2",children:e.players.map(m=>{const f=ft(m.id,!0);return l.jsxs("div",{className:`flex items-center justify-between p-3 ${m.isReady?"bg-green-50 dark:bg-green-900/20 border border-green-500":"bg-gray-50/40 dark:bg-gray-900/70 border border-gray-300 dark:border-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f}}),l.jsxs("span",{className:"font-bold",style:{color:f},children:[m.username,m.isHost&&l.jsx("span",{className:"ml-2 text-xs bg-blue-500 text-white px-2 py-0.5",children:"HOST"}),m.id===t&&l.jsx("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:"(You)"})]})]}),l.jsx("div",{className:"text-sm font-semibold",children:m.isReady?l.jsx("span",{className:"text-green-600 dark:text-green-400",children:" Ready"}):l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Waiting..."})})]},m.id)})})]}),e.status==="starting"&&l.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-500 text-center",children:l.jsx("p",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:" Game starting..."})}),!i&&e.status==="waiting"&&l.jsx("div",{className:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-500 text-center",children:l.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 text-sm",children:" Waiting for all players to be ready..."})}),l.jsxs("div",{className:"flex gap-3",children:[!a&&l.jsx("button",{onClick:n,className:`flex-1 py-3 font-semibold transition-colors ${s!=null&&s.isReady?"bg-gray-500 text-white hover:bg-gray-600":"bg-green-500 text-white hover:bg-green-600"}`,children:s!=null&&s.isReady?"Cancel Ready":"I'm Ready!"}),a&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:n,className:`flex-1 py-3 font-semibold transition-colors ${s!=null&&s.isReady?"bg-gray-500 text-white hover:bg-gray-600":"bg-green-500 text-white hover:bg-green-600"}`,children:s!=null&&s.isReady?"Cancel Ready":"I'm Ready!"}),l.jsx("button",{onClick:r,disabled:!u,className:`flex-1 py-3 font-semibold transition-colors ${u?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 dark:bg-gray-700/50 text-gray-500 dark:text-gray-500 cursor-not-allowed"}`,children:"Start Game"})]})]}),a&&!u&&l.jsx("p",{className:"mt-3 text-xs text-center text-gray-500 dark:text-gray-400",children:i?"Need at least 2 players to start":"All players must be ready before starting"})]})}function bw({tournament:e,currentUserId:t,onEnterAlias:n,onJoinMatch:r}){const o=e.players.find(m=>m.id===t),[s,a]=xt.useState(""),i={};e.matches.forEach(m=>{i[m.round]||(i[m.round]=[]),i[m.round].push(m)});const u=m=>m===e.totalRounds?"Finals":m===e.totalRounds-1?"Semi-Finals":m===e.totalRounds-2?"Quarter-Finals":`Round ${m}`,c=()=>{const m=s.trim();m&&(n(m),a(""))};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-lg p-6",children:[l.jsx("div",{className:"mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:[" ",e.name]}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.mode==="tournament_1v1"?"1v1 Tournament":"Multiplayer Tournament","  ","Round ",e.currentRound," of ",e.totalRounds]})]}),e.status==="completed"&&e.winner&&l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Winner"}),l.jsxs("div",{className:"text-xl font-bold",style:{color:ft(e.winner.id,!0)},children:[" ",e.winner.alias||e.winner.username]})]})]})}),e.status==="registration"&&!(o!=null&&o.alias)&&l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-500 rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-blue-700 dark:text-blue-300 mb-3",children:" Enter Your Tournament Alias"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:s,onChange:m=>a(m.target.value),onKeyDown:m=>m.key==="Enter"&&c(),placeholder:"Enter your alias...",maxLength:20,className:"flex-1 border border-blue-300 dark:border-blue-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-gray-900/70 dark:text-gray-100"}),l.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Submit"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:"Choose a unique alias for this tournament (max 20 characters)"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Participants (",e.players.length,")"]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:e.players.map(m=>l.jsxs("div",{className:"p-2 bg-gray-50/40 dark:bg-gray-900/70 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[l.jsx("div",{className:"text-sm font-medium",style:{color:ft(m.id,!0)},children:m.alias||m.username}),m.id===t&&l.jsx("div",{className:"text-xs text-blue-500",children:"(You)"})]},m.id))})]}),e.status!=="registration"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsx("div",{className:"flex gap-8 min-w-max pb-4",children:Array.from({length:e.totalRounds},(m,f)=>{const h=f+1,w=i[h]||[];return l.jsxs("div",{className:"flex flex-col justify-around min-w-[250px]",children:[l.jsx("h3",{className:"text-center font-bold text-gray-700 dark:text-gray-300 mb-4",children:u(h)}),l.jsx("div",{className:"space-y-8",children:w.map(y=>{var _,b;return l.jsxs("div",{className:`bg-gray-50/40 dark:bg-gray-900/70 rounded-lg p-3 border-2 ${y.status==="in_progress"?"border-blue-500":y.status==="completed"?"border-green-500":"border-gray-300 dark:border-gray-700"}`,children:[l.jsxs("div",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mb-2",children:["Match #",y.matchId]}),l.jsx("div",{className:`p-2 mb-1 rounded ${y.winner===((_=y.player1)==null?void 0:_.id)?"bg-green-100 dark:bg-green-900/30 font-bold":"bg-white/50 dark:bg-gray-800/80"}`,children:l.jsx("div",{className:"text-sm",children:y.player1?l.jsxs("span",{style:{color:ft(y.player1.id,!0)},children:[y.player1.alias||y.player1.username,y.winner===y.player1.id&&" "]}):l.jsx("span",{className:"text-gray-400 italic",children:"TBD"})})}),l.jsx("div",{className:"text-center text-xs text-gray-400 my-1",children:"vs"}),l.jsx("div",{className:`p-2 rounded ${y.winner===((b=y.player2)==null?void 0:b.id)?"bg-green-100 dark:bg-green-900/30 font-bold":"bg-white/50 dark:bg-gray-800/80"}`,children:l.jsx("div",{className:"text-sm",children:y.player2?l.jsxs("span",{style:{color:ft(y.player2.id,!0)},children:[y.player2.alias||y.player2.username,y.winner===y.player2.id&&" "]}):l.jsx("span",{className:"text-gray-400 italic",children:"TBD"})})}),y.status==="pending"&&y.player1&&y.player2&&(y.player1.id===t||y.player2.id===t)&&l.jsx("button",{onClick:()=>r(y.matchId),className:"mt-2 w-full py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Join Match"}),y.status==="in_progress"&&l.jsx("div",{className:"mt-2 text-xs text-center text-blue-500 font-semibold",children:" In Progress..."})]},y.matchId)})})]},h)})})}),e.status==="registration"&&l.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-500 rounded-lg text-center",children:l.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:" Tournament will begin once all players have entered their aliases"})})]})}function Ma({tournamentId:e,onClose:t}){var y,_;const[n,r]=xt.useState(!0),[o,s]=xt.useState(null),[a,i]=xt.useState(null);if(xt.useEffect(()=>{let b=!1;return r(!0),fetch(`/api/pong/tournaments/${e}/stats`).then(async p=>{if(!b){if(!p.ok){let d=`${p.status} ${p.statusText}`;try{const g=await p.json();g&&g.message&&(d=g.message)}catch{}throw new Error(d)}return p.json()}}).then(p=>{b||(p&&p.tournament?i(p.tournament):s((p==null?void 0:p.message)||"Invalid response"))}).catch(p=>s(String(p))).finally(()=>r(!1)),()=>{b=!0}},[e]),n)return l.jsx("div",{className:"p-4",children:"Loading tournament stats..."});if(o)return l.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]});if(!a)return l.jsx("div",{className:"p-4",children:"No data"});const u=Array.isArray(a.players)?a.players.map(b=>({id:b.id??b.userId??b.user_id,username:b.username??b.name??`User ${b.userId??b.id??"?"}`,alias:b.alias})):[],c=Array.isArray(a.matches)?a.matches:[],m=Array.isArray(a.onchainTxHashes)?a.onchainTxHashes:[],[f,h]=xt.useState(null),w=((_=(y=import.meta)==null?void 0:y.env)==null?void 0:_.VITE_EXPLORER_BASE)||"";return l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-6",children:l.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[l.jsxs("h3",{className:"font-bold",children:["Tournament Stats  ",a.name]}),l.jsx("div",{children:l.jsx("button",{onClick:t,className:"px-3 py-1 bg-gray-200 dark:bg-gray-800 rounded",children:"Close"})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:["Status: ",a.status," (id: ",a.tournamentId||a.id||"",")"]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("strong",{children:"Players:"}),l.jsx("ul",{className:"list-disc ml-5",children:u.length===0?l.jsx("li",{className:"text-sm text-gray-500",children:"No players"}):u.map(b=>l.jsxs("li",{children:[b.alias||b.username," (id: ",b.id,")"]},b.id??JSON.stringify(b)))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("strong",{children:"Matches:"}),l.jsx("div",{className:"text-sm",children:c.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No matches yet."}):c.map(b=>l.jsxs("div",{className:"py-1 border-b last:border-b-0",children:["Match #",b.matchId,"  Round ",b.round,"  ",b.status,b.player1Id||b.player2Id?l.jsxs("div",{className:"text-xs text-gray-500",children:["Players: ",b.player1Id??""," vs ",b.player2Id??""]}):null]},b.matchId))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("strong",{children:"On-chain records"}),m.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No on-chain records yet."}):l.jsx("ul",{className:"list-disc ml-5",children:m.map(b=>l.jsxs("li",{className:"text-sm flex items-center gap-3",children:[l.jsx("div",{className:"flex-1",children:w?l.jsx("a",{href:`${w.replace(/\/$/,"")}/tx/${b}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 dark:text-blue-400 underline break-words",children:b}):l.jsx("span",{className:"font-mono text-xs break-words",children:b})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{title:"Copy tx hash",onClick:async()=>{try{await navigator.clipboard.writeText(b),h(b),setTimeout(()=>h(p=>p===b?null:p),1800)}catch{}},className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-xs border hover:bg-gray-200 dark:hover:bg-gray-700",children:"Copy"}),f===b&&l.jsx("span",{className:"text-green-600 dark:text-green-400 text-sm",children:"Copied"})]})]},b))})]})]})]})})}function _w({authResponse:e,darkMode:t=!0,showInviteModal:n=!1,inviteRoomUsers:r=[],onCloseInviteModal:o,pongInvitations:s,setPongInvitations:a,acceptedLobbyId:i,onLobbyJoined:u,onNavigateToChat:c}){var Fe;const{socket:m,payloadReceived:f}=jo(),[h,w]=v.useState(null);v.useState(1);const[y,_]=v.useState(null),[b,p]=v.useState(-1),[d,g]=v.useState(-2),x=v.useRef(!1),I=v.useRef(null),[z,j]=v.useState(null),[k,M]=v.useState("menu"),[E,A]=v.useState(null),[J,xe]=v.useState(null),[Ue,Ge]=v.useState(null),[Oe,rt]=v.useState(!1),[U,G]=v.useState(!1);v.useEffect(()=>()=>{I.current&&(clearInterval(I.current),I.current=null)},[]);const H=v.useRef(E);v.useEffect(()=>{H.current=E},[E]),v.useEffect(()=>()=>{var R;H.current&&((R=m.current)==null?void 0:R.readyState)===WebSocket.OPEN&&(console.log("[Pong] Component unmounting, leaving lobby:",H.current.lobbyId),m.current.send(JSON.stringify({funcId:"leave_pong_lobby",payload:{lobbyId:H.current.lobbyId},target_container:"pong"})))},[]),v.useEffect(()=>{if(!m.current){console.log("[Pong] Socket not ready yet");return}const R=()=>{if(m.current&&m.current.readyState===WebSocket.OPEN){console.log("[Pong] Requesting game state..."),console.log("[Pong] getGameState config:",{funcId:L.ws.pong.getGameState.funcId,container:L.ws.pong.getGameState.container});const W={funcId:L.ws.pong.getGameState.funcId,payload:{},target_container:L.ws.pong.getGameState.container},S=JSON.stringify(W);console.log("[Pong] Sending payload:",S),m.current.send(S),console.log("[Pong] Game state request sent")}else console.warn("[Pong] WebSocket not ready, retrying in 500ms"),setTimeout(R,500)};R()},[m]),v.useCallback(R=>{console.log(`Player with ID '${R.user_id}' is ready for game with ID '${R.game_id}'`)},[h]),v.useEffect(()=>{var R,W,S;if(f){if((f.funcId==="create_pong_lobby"||f.funcId==="pong_lobby_invitation"||f.funcId==="lobby_state_update"||f.funcId==="start_game_from_lobby")&&console.log("[Pong] DEBUG: Received message:",f.funcId,"source_container:",f.source_container,"code:",f.code),f.source_container!=="pong"){(f.funcId==="create_pong_lobby"||f.funcId==="start_game_from_lobby")&&console.log("[Pong] DEBUG:",f.funcId,"filtered out! source_container:",f.source_container);return}if(f.funcId==="create_pong_lobby"&&f.code===0){console.log("[Pong] Received lobby creation/invitation:",f.payload);const T=e&&((R=f.payload.players)==null?void 0:R.some(D=>(D.userId===e.user.id||D.id===e.user.id)&&D.isHost));console.log("[Pong] isHost check: myId=",e==null?void 0:e.user.id,"isHost=",T,"players=",f.payload.players),T&&(A({lobbyId:f.payload.lobbyId,gameMode:f.payload.gameMode,players:f.payload.players.map(D=>({id:D.userId||D.id,username:D.username,isReady:D.isReady,isHost:D.isHost})),settings:{ballCount:f.payload.ballCount,maxScore:f.payload.maxScore,allowPowerups:f.payload.allowPowerups},status:f.payload.status}),(W=f.payload.tournament)!=null&&W.tournamentId&&(console.log("[Pong] Tournament lobby created, setting activeTournamentId:",f.payload.tournament.tournamentId),Ge(f.payload.tournament.tournamentId)),M("lobby"))}if(f.funcId==="pong_lobby_invitation"){console.log("[Pong] Received lobby invitation:",f.payload);const T={inviteId:f.payload.lobbyId||Date.now(),lobbyId:f.payload.lobbyId,hostId:f.payload.hostId,hostUsername:f.payload.hostUsername||`User ${f.payload.hostId}`,gameMode:f.payload.gameMode,playerCount:f.payload.playerCount||0,timestamp:Date.now()};a(D=>[...D,T])}if(f.funcId==="toggle_player_ready_in_lobby"&&f.code===0||f.funcId==="lobby_state_update"){console.log("[Pong] Received lobby update:",f.funcId,f.payload);const T=f.payload;e&&T.players.some(D=>D.userId===e.user.id||D.id===e.user.id)&&(A({lobbyId:T.lobbyId,gameMode:T.gameMode,players:T.players.map(D=>({id:D.userId||D.id,username:D.username,isReady:D.isReady,isHost:D.isHost})),settings:{ballCount:T.ballCount,maxScore:T.maxScore,allowPowerups:T.allowPowerups},status:T.status}),k==="menu"&&M("lobby"))}if(f.funcId==="start_game_from_lobby")if(console.log("[Pong] Received start_game_from_lobby! code:",f.code,"payload:",f.payload),f.code===0){console.log("[Pong] Game started from lobby! Processing game state");const T=f.payload,D=(J==null?void 0:J.tournamentId)||((S=E==null?void 0:E.tournament)==null?void 0:S.tournamentId)||(E==null?void 0:E.tournamentId);D&&(console.log("[Pong] Preserving tournament ID:",D),Ge(D)),de(T),_(T),A(null),setTimeout(()=>{console.log("[Pong] Setting view to 'game' NOW"),M("game")},0)}else console.warn("[Pong] start_game_from_lobby failed with code:",f.code)}},[f,e,k]),v.useEffect(()=>{var W;if(!i)return;const R=window.__acceptedLobbyData;R&&R.lobbyId===i&&(console.log("[Pong] Setting up lobby from stored invitation data:",i),A({lobbyId:R.lobbyId,gameMode:R.gameMode,players:R.players.map(S=>({id:S.userId||S.id,username:S.username,isReady:S.isReady,isHost:S.isHost})),settings:{ballCount:R.ballCount,maxScore:R.maxScore,allowPowerups:R.allowPowerups},status:R.status}),(W=R.tournament)!=null&&W.tournamentId&&(console.log("[Pong] Accepted tournament lobby, setting activeTournamentId:",R.tournament.tournamentId),Ge(R.tournament.tournamentId)),M("lobby"),u&&u(),delete window.__acceptedLobbyData)},[i,u]);const de=v.useCallback(R=>{if(!R){console.log("[Pong] setPlayerIDsHelper: game_data is null");return}if(!e){console.log("[Pong] setPlayerIDsHelper: authResponse is null");return}let W=!0;for(const S of R.paddles)S.owner_id===e.user.id&&(W?(p(S.paddle_id),W=!1):g(S.paddle_id))},[e]);v.useEffect(()=>{var R;if(f){f.funcId!=="get_game_state"&&f.source_container==="pong"&&console.log("[Pong] Processing:",f.funcId);for(const W of Object.values(L.ws.pong)){if(f.funcId!==W.funcId)continue;const S=Object.values(W.schema.output).find(D=>D.code===f.code);if(!S){console.error("Unknown code",f.code);return}const T=S.payload.safeParse(f.payload);if(!T.success){console.warn("[Pong] Invalid payload",T.error);return}switch(f.funcId){case L.ws.pong.getGameState.funcId:if(f.code!==L.ws.pong.getGameState.schema.output.GameUpdate.code){console.warn("[Pong] getGameState returned non-GameUpdate code:",f.code),console.warn("[Pong] Payload:",f.payload),f.code===L.ws.pong.getGameState.schema.output.NotInRoom.code&&console.log("[Pong] User not in any game room - this is normal if no game exists");break}_(T.data),x.current=!0,de(T.data);break;case L.ws.pong.startGame.funcId:console.log("[Pong] Game started, received game info:",T.data),T.data&&typeof T.data.board_id=="number"&&j(T.data.board_id);const D={funcId:L.ws.pong.getGameState.funcId,payload:{},target_container:L.ws.pong.getGameState.container};((R=m.current)==null?void 0:R.readyState)===WebSocket.OPEN&&(m.current.send(JSON.stringify(D)),console.log("[Pong] Requested game state after game creation (handler will respond)"));break;case L.ws.pong.userReportsReady.funcId:console.log("[Pong] Player ready:",T.data),w(T.data);break}return}}},[f,de]);const K=v.useCallback((R,W)=>{var T;const S=JSON.stringify({funcId:R.funcId,payload:W,target_container:R.container});((T=m.current)==null?void 0:T.readyState)===WebSocket.OPEN?m.current.send(S):console.warn("WebSocket not open, cannot send:",R.funcId)},[m]);v.useEffect(()=>{const R=new Set;function W(T){if(y===null||T.key!=="w"&&T.key!=="s"||R.has(T.key)||(R.add(T.key),y.board_id===null))return;const D={board_id:y.board_id,paddle_id:b,m:T.key==="w"};K(L.ws.pong.movePaddle,D)}function S(T){if(y===null||b===-1||T.key!=="w"&&T.key!=="s")return;R.delete(T.key);const D={board_id:y.board_id,paddle_id:b,m:null};K(L.ws.pong.movePaddle,D)}return window.addEventListener("keydown",W),window.addEventListener("keyup",S),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",S)}},[y,K,b]),v.useEffect(()=>{const R=new Set;function W(T){if(y===null||d===-1||T.key!=="o"&&T.key!=="l"||R.has(T.key)||(R.add(T.key),y.board_id===null))return;const D={board_id:y.board_id,paddle_id:d,m:T.key==="o"};K(L.ws.pong.movePaddle,D)}function S(T){if(y===null||T.key!=="o"&&T.key!=="l")return;R.delete(T.key);const D={board_id:y.board_id,paddle_id:d,m:null};K(L.ws.pong.movePaddle,D)}return window.addEventListener("keydown",W),window.addEventListener("keyup",S),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",S)}},[y,K,d]);const[Y,F]=v.useState("4,5,6,7,8"),[X,te]=v.useState(1);v.useCallback(()=>{console.log("[Pong] Start Game clicked");const R=Y.split(",").map(S=>Number.parseInt(S.trim(),10)).filter(S=>!isNaN(S));console.log("[Pong] Parsed player IDs:",R);const W={player_list:R,balls:X};console.log("[Pong] Sending start game payload:",W),K(L.ws.pong.startGame,W)},[Y,X,K]),v.useCallback(R=>{const W={game_id:R};K(L.ws.pong.userReportsReady,W)},[K]);const ve=v.useCallback((R,W,S)=>{var ze;console.log("[Pong] Creating game:",{mode:R,selectedPlayers:W,settings:S});const T={lobbyId:Date.now(),gameMode:R,players:W.map($e=>{var Re,yt;return{id:$e,username:((Re=r.find(Dt=>Dt.id===$e))==null?void 0:Re.username)||`User ${$e}`,isReady:!1,isHost:$e===((yt=e==null?void 0:e.user)==null?void 0:yt.id)}}),settings:{ballCount:S.ballCount,maxScore:S.maxScore,allowPowerups:S.allowPowerups},status:"waiting"};A(T);const D={};W.forEach($e=>{const Re=r.find(yt=>yt.id===$e);D[$e]=(Re==null?void 0:Re.username)||`User ${$e}`});const ee={funcId:"create_pong_lobby",payload:{gameMode:R,playerIds:W,playerUsernames:D,ballCount:S.ballCount,maxScore:S.maxScore,allowPowerups:S.allowPowerups},target_container:"pong"};if(((ze=m.current)==null?void 0:ze.readyState)===WebSocket.OPEN&&(m.current.send(JSON.stringify(ee)),console.log("[Pong] Sent lobby creation to backend:",ee)),R==="tournament_1v1"||R==="tournament_multi"){const $e={tournamentId:Date.now(),name:`${R==="tournament_1v1"?"1v1":"Multiplayer"} Tournament`,mode:R,players:W.map(Re=>{var yt;return{id:Re,username:((yt=r.find(Dt=>Dt.id===Re))==null?void 0:yt.username)||`User ${Re}`}}),matches:[],currentRound:1,totalRounds:Math.ceil(Math.log2(W.length)),status:"registration",winner:null};xe($e),M("tournament")}else M("lobby");rt(!1),o==null||o()},[e,r,o]),Le=v.useCallback(()=>{var W;if(!E||!e)return;console.log("[Pong] Toggling ready state for lobby:",E.lobbyId);const R={lobbyId:E.lobbyId};((W=m.current)==null?void 0:W.readyState)===WebSocket.OPEN?(m.current.send(JSON.stringify({funcId:"toggle_player_ready_in_lobby",payload:R,target_container:"pong"})),console.log("[Pong] Sent toggle ready to backend")):console.warn("[Pong] WebSocket not open, cannot toggle ready")},[E,e,m]),q=v.useCallback(()=>{var W;if(!E||!e)return;console.log("[Pong] Starting game from lobby:",E.lobbyId);const R={lobbyId:E.lobbyId};((W=m.current)==null?void 0:W.readyState)===WebSocket.OPEN?(m.current.send(JSON.stringify({funcId:"start_game_from_lobby",payload:R,target_container:"pong"})),console.log("[Pong] Sent start game from lobby to backend"),A({...E,status:"starting"})):console.warn("[Pong] WebSocket not open, cannot start game")},[E,e,m]),oe=v.useCallback(()=>{var R;E&&((R=m.current)==null?void 0:R.readyState)===WebSocket.OPEN&&(console.log("[Pong] Leaving lobby:",E.lobbyId),m.current.send(JSON.stringify({funcId:"leave_pong_lobby",payload:{lobbyId:E.lobbyId},target_container:"pong"}))),A(null),xe(null),c?c():M("menu")},[E,m,c]),ne=v.useCallback(R=>{!J||!e||xe({...J,players:J.players.map(W=>W.id===e.user.id?{...W,alias:R}:W)})},[J,e]),re=v.useCallback(R=>{console.log("[Pong] Joining tournament match:",R)},[]);return v.useCallback(R=>{console.log("[Pong] Accepting invitation:",R);const W=s.find(S=>S.inviteId===R);if(W){if(a(S=>S.filter(T=>T.inviteId!==R)),W.lobbyData){const S=W.lobbyData,T={lobbyId:S.lobbyId||Date.now(),gameMode:S.gameMode,players:(S.players||[]).map(D=>({id:D.userId||D.id,username:D.username,isReady:D.isReady||!1,isHost:D.isHost||!1})),settings:{ballCount:S.ballCount,maxScore:S.maxScore,allowPowerups:S.allowPowerups},status:S.status||"waiting"};if(A(T),S.tournament){const D=S.tournament,ee={tournamentId:D.tournamentId,name:D.name,mode:D.mode,players:(D.players||[]).map(ze=>({id:ze.userId,username:ze.username,alias:ze.alias})),matches:D.matches||[],currentRound:D.currentRound,totalRounds:D.totalRounds,status:D.status,winner:D.winnerId||null};xe(ee),M("tournament");return}M("lobby");return}M("lobby")}},[s]),v.useCallback(R=>{console.log("[Pong] Declining invitation:",R),a(W=>W.filter(S=>S.inviteId!==R))},[]),l.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gray-100/80 dark:bg-dark-600 p-4 space-y-4",children:[k==="menu"&&l.jsx("div",{className:"w-full max-w-2xl space-y-4",children:l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-lg p-8 text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:" Pong"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Play classic Pong against other players in various game modes"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>rt(!0),className:"w-full py-3 bg-blue-500 text-white hover:bg-blue-600 transition-colors font-semibold",children:" Create Game"}),l.jsx("button",{onClick:()=>{if(e){const R={player_list:[e.user.id],balls:1};K(L.ws.pong.startGame,R),M("game")}},className:"w-full py-3 bg-green-500 text-white hover:bg-green-600 transition-colors font-semibold",children:" Quick Play (Solo)"})]})]})}),k==="lobby"&&E&&e&&l.jsxs("div",{className:"w-full max-w-2xl",children:[l.jsx(kw,{lobby:E,currentUserId:e.user.id,onToggleReady:Le,onStartGame:q,onLeaveLobby:oe}),(J||E.tournamentId)&&l.jsx("div",{className:"mt-4 flex gap-2",children:l.jsx("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600",children:"View Tournament Stats"})}),U&&(J?l.jsx(Ma,{tournamentId:J.tournamentId,onClose:()=>G(!1)}):l.jsx(Ma,{tournamentId:E.tournamentId||Date.now(),onClose:()=>G(!1)}))]}),k==="tournament"&&J&&e&&l.jsxs("div",{className:"w-full max-w-6xl overflow-x-auto",children:[l.jsx(bw,{tournament:J,currentUserId:e.user.id,onEnterAlias:ne,onJoinMatch:re}),l.jsx("div",{className:"mt-4 flex gap-2",children:l.jsx("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600",children:"View Tournament Stats"})}),U&&l.jsx(Ma,{tournamentId:J.tournamentId,onClose:()=>G(!1)}),l.jsx("button",{onClick:oe,className:"mt-4 px-6 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Leave Tournament"})]}),k==="game"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-full flex-1 min-h-[500px] shadow-lg border border-gray-800 bg-black overflow-hidden relative",children:l.jsx(xw,{gameState:y,darkMode:t})}),!y&&l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Waiting for game state..."}),l.jsx("button",{onClick:()=>{var R;E&&((R=m.current)==null?void 0:R.readyState)===WebSocket.OPEN&&(console.log("[Pong] Leaving lobby from game:",E.lobbyId),m.current.send(JSON.stringify({funcId:"leave_pong_lobby",payload:{lobbyId:E.lobbyId},target_container:"pong"}))),M("menu"),_(null),A(null)},className:"px-6 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Leave Game"})]}),l.jsx(ww,{isOpen:n||Oe,onClose:()=>{rt(!1),o==null||o()},roomUsers:r,currentUserId:((Fe=e==null?void 0:e.user)==null?void 0:Fe.id)||0,onCreateGame:ve}),k==="game"&&l.jsxs("div",{style:{position:"fixed",right:16,bottom:16,zIndex:9999},children:[l.jsx("button",{onClick:()=>{console.log("[Pong][DEBUG] Overlay Start Game clicked");const W={player_list:Y.split(",").map(S=>Number.parseInt(S.trim(),10)).filter(S=>!isNaN(S)),balls:X};K(L.ws.pong.startGame,W)},style:{backgroundColor:"#2563eb",color:"white",padding:"8px 12px",borderRadius:8},children:"DEBUG: Start Game"}),z!==null&&l.jsx("div",{style:{marginTop:8},children:l.jsx("button",{onClick:()=>{console.log("[Pong][DEBUG] Overlay Declare Ready clicked, board:",z);const R={game_id:z};K(L.ws.pong.userReportsReady,R)},style:{backgroundColor:"#059669",color:"white",padding:"8px 12px",borderRadius:8},children:"DEBUG: Declare Ready"})}),(J||Ue||(E==null?void 0:E.tournamentId))&&l.jsx("div",{style:{marginTop:8},children:l.jsx("button",{onClick:async()=>{var S,T;const R=(J==null?void 0:J.tournamentId)||Ue||(E==null?void 0:E.tournamentId),W=((S=e==null?void 0:e.user)==null?void 0:S.id)||0;console.log("[Pong][DEBUG] Completing tournament",R,"winner:",W);try{const ee=await(await fetch("/api/pong/debug/complete_tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:R,winnerId:W})})).json();console.log("[Pong][DEBUG] Tournament completed:",ee),ee.tournament&&(xe(ee.tournament),Ge(null),alert(`Tournament completed! Winner: ${ee.tournament.winnerId}
On-chain TX: ${((T=ee.tournament.onchainTxHashes)==null?void 0:T.join(", "))||"none"}`))}catch(D){console.error("[Pong][DEBUG] Failed to complete tournament:",D),alert("Failed to complete tournament: "+D)}},style:{backgroundColor:"#dc2626",color:"white",padding:"8px 12px",borderRadius:8},children:" DEBUG: Complete Tournament"})})]})]})}function zc({userId:e,username:t,initialEnabled:n,isGuest:r,onActiveStateChange:o,startWithSetup:s}){const[a,i]=v.useState(n??null),[u,c]=v.useState(!0),[m,f]=v.useState(s??!1),[h,w]=v.useState(!1);v.useEffect(()=>{y()},[e]),v.useEffect(()=>{s&&f(!0)},[s]);const y=async()=>{try{const d=localStorage.getItem("userData");if(d){const x=JSON.parse(d);if((x==null?void 0:x.has2FA)!==void 0){i(x.has2FA),c(!1);return}}const g=await fetch(`/public_api/auth/2fa/status/${e}`);if(g.ok){const x=await g.json();i(x.enabled)}else i(n??!1)}catch(d){console.error("Failed to check 2FA status:",d),i(n??!1)}finally{c(!1)}},_=d=>{try{const g=localStorage.getItem("userData");if(g){const x=JSON.parse(g);x.has2FA=d,localStorage.setItem("userData",JSON.stringify(x))}}catch(g){console.error("Failed to update localStorage:",g)}},b=()=>{f(!1),i(!0),_(!0),o==null||o(!1)},p=()=>{w(!1),i(!1),_(!1),o==null||o(!1)};return u?l.jsx("div",{className:"p-4 bg-gray-50/40 dark:bg-gray-900/70",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700/50 w-1/3 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700/50 w-2/3"})]})}):m?l.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center",onClick:()=>{f(!1),o==null||o(!1)},children:l.jsx("div",{className:"mx-4 w-full max-w-md",onClick:d=>d.stopPropagation(),children:l.jsx(Ng,{userId:e,username:t,onSetupComplete:b,onCancel:()=>{f(!1),o==null||o(!1)}})})}):h?l.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center",onClick:()=>{w(!1),o==null||o(!1)},children:l.jsx("div",{className:"mx-4 w-full max-w-md",onClick:d=>d.stopPropagation(),children:l.jsx(jg,{userId:e,onDisableComplete:p,onCancel:()=>{w(!1),o==null||o(!1)}})})}):l.jsxs("div",{className:"p-4 bg-gray-50/40 dark:bg-gray-900",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a?"Your account is protected with 2FA":"Add an extra layer of security to your account"})]}),l.jsx("div",{className:"flex items-center",children:a?l.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:[l.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Enabled"]}):l.jsx("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium bg-gray-200 dark:bg-gray-700/50 text-gray-800 dark:text-gray-300",children:"Disabled"})})]}),l.jsx("div",{className:"mt-3",children:r?l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"Two-factor authentication is not available for guest accounts."}):a?l.jsx("button",{onClick:()=>{w(!0),o==null||o(!0)},className:"text-sm px-4 py-2 bg-red-600 hover:bg-red-700 text-white transition-colors",children:"Disable 2FA"}):l.jsx("button",{onClick:()=>{f(!0),o==null||o(!0)},className:"text-sm px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:"Enable 2FA"})})]})}function Lp({userId:e,isOpen:t,onClose:n,onStartDM:r,showToast:o}){const{socket:s,payloadReceived:a,isConnected:i,sendMessage:u}=jo(),[c,m]=v.useState(null),[f,h]=v.useState(!0),[w,y]=v.useState(null),[_,b]=v.useState(!1),[p,d]=v.useState(""),[g,x]=v.useState(""),[I,z]=v.useState(""),[j,k]=v.useState(null),[M,E]=v.useState(null),[A,J]=v.useState(null),[xe,Ue]=v.useState(!1),[Ge,Oe]=v.useState(!1),[rt,U]=v.useState(!1),[G,H]=v.useState([]),de=v.useRef(null),K=v.useRef(null),Y=v.useCallback((q,oe)=>{const ne={funcId:q,payload:oe,target_container:"users"};console.log("[v0] Sending profile request:",ne),console.log("[v0] Payload detail:",JSON.stringify(oe,null,2)),console.log("[v0] Payload type:",typeof oe),u(ne)||(console.warn("[v0] Socket not connected, message queued"),h(!1),y("WebSocket is not connected. Reconnecting..."))},[u]);v.useEffect(()=>{const q=localStorage.getItem("jwt");if(q)try{const oe=JSON.parse(atob(q.split(".")[1]));k(oe.uid)}catch(oe){console.error("[v0] Error decoding JWT:",oe)}},[]),v.useEffect(()=>(t&&e&&(console.log("[v0] ProfileComponent: Fetching profile for userId:",e),h(!0),y(null),K.current&&clearTimeout(K.current),Y(L.ws.users.requestUserProfileData.funcId,e),K.current=setTimeout(()=>{h(!1),y("Request timed out. The profile endpoint may not be implemented or is not responding."),console.error("[v0] Profile request timed out after 5 seconds")},5e3)),()=>{K.current&&(clearTimeout(K.current),K.current=null)}),[t,e]),v.useEffect(()=>{var q,oe,ne;if(a){if(console.log("[v0] Profile component received payload:",a),console.log("[v0] Expected funcId:",L.ws.users.requestUserProfileData.funcId),console.log("[v0] Received funcId:",a.funcId),a.funcId===L.ws.users.requestUserProfileData.funcId)if(K.current&&(clearTimeout(K.current),K.current=null),console.log("[v0] Profile data response matched! Code:",a.code),a.code===0){console.log("[v0] Profile data:",a.payload);const re=a.payload,Fe={userId:re.id,username:re.username,email:re.email,avatar:re.avatarUrl||void 0,bio:re.bio,status:"online",joinDate:re.createdAt?new Date(re.createdAt*1e3).toISOString():void 0,stats:re.stats,isGuest:re.accountType===1,matchHistory:[]};console.log("[v0] Transformed profile:",Fe),m(Fe),d(Fe.bio||""),x(Fe.username),z(Fe.email||""),h(!1),y(null)}else console.error("[v0] Failed to fetch profile:",a.payload),h(!1),y(((q=a.payload)==null?void 0:q.message)||"Failed to load profile");if(a.funcId===L.ws.users.updateProfile.funcId&&a.code===0&&(m(re=>re?{...re,bio:a.payload.bio}:null),b(!1)),a.funcId===L.ws.users.requestFriendship.funcId){if(a.code===0)console.log("[ProfileComponent] Friend request sent successfully"),o&&o("Friend request sent successfully!","success");else if(console.error("[ProfileComponent] Failed to send friend request:",a),o){const re=((oe=a.payload)==null?void 0:oe.message)||((ne=a.payload)==null?void 0:ne.error)||"Failed to send friend request";o(re,"error")}}if(a.funcId===L.ws.users.fetchUserGameResults.funcId&&a.code===0){const re=Array.isArray(a.payload)?a.payload:[];H(re);const Fe=re.length,R=re.filter(S=>S.rank===1).length,W=Fe-R;m(S=>S&&{...S,stats:{gamesPlayed:Fe,wins:R,losses:W},matchHistory:re.map(T=>({id:T.id,score:T.score,rank:T.rank}))})}}},[a,o]),v.useEffect(()=>((async()=>{if(c!=null&&c.avatar)try{const oe=localStorage.getItem("jwt");if(!oe){console.warn("[v0] No JWT token found; cannot fetch avatar");return}const ne=await fetch(L.http.users.fetchUserAvatar.endpoint,{method:"POST",headers:{Authorization:`Bearer ${oe}`,"Content-Type":"application/json"},body:JSON.stringify({file:c.avatar})});if(!ne.ok){console.error("[v0] Failed to fetch avatar:",ne.status);return}const re=await ne.text(),Fe=re.startsWith("data:")?re.split(",")[1]:re,R=atob(Fe),W=R.length,S=new Uint8Array(W);for(let ee=0;ee<W;ee++)S[ee]=R.charCodeAt(ee);const T=new Blob([S],{type:"image/png"}),D=URL.createObjectURL(T);E(D)}catch(oe){console.error("[v0] Error loading avatar:",oe)}})(),()=>{M&&URL.revokeObjectURL(M)}),[c==null?void 0:c.userId]);const F=q=>{var ne;const oe=(ne=q.target.files)==null?void 0:ne[0];if(oe){if(oe.size>5*1024*1024){y("Avatar file must be less than 5MB");return}J(oe);const re=URL.createObjectURL(oe);E(re)}},X=async()=>{try{const q=ne=>new Promise((re,Fe)=>{const R=new FileReader;R.onerror=()=>Fe(new Error("Failed to read file")),R.onload=()=>{const S=R.result.split(",")[1];re(S)},R.readAsDataURL(ne)}),oe=A?{filename:A.name,data:await q(A)}:void 0;if(Y(L.ws.users.updateProfile.funcId,{alias:g,email:I,bio:p,pfp:oe}),await new Promise(ne=>setTimeout(ne,800)),A){const ne=await fetch("/api/users/pfp",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`,"Content-Type":"application/json"},body:JSON.stringify({file:A.name})});if(ne.ok){const Fe=`data:image/png;base64,${await ne.text()}`;E(Fe),c&&m({...c,avatar:A.name});const R=localStorage.getItem("userData");if(R){const W=JSON.parse(R);W.avatar=A.name,localStorage.setItem("userData",JSON.stringify(W)),window.dispatchEvent(new Event("storage"))}}}b(!1),J(null)}catch(q){console.error("Error saving profile:",q),o&&o("Failed to save profile","error")}},te=()=>{e&&(console.log("[ProfileComponent] Sending friend request to userId:",e),Y(L.ws.users.requestFriendship.funcId,e))},ve=()=>{if(!e)return;const q={funcId:L.ws.users.fetchUserGameResults.funcId,payload:e,target_container:"users"};u(q),U(!0)},Le=j===e;return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:n,children:l.jsx("div",{className:"bg-white/50 dark:bg-dark-800 shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",onClick:q=>q.stopPropagation(),children:f?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),l.jsx("p",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading profile..."})]}):w?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-700 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Error"}),l.jsx("button",{onClick:n,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:""})]}),l.jsxs("div",{className:"py-8 px-6 text-center",children:[l.jsx("div",{className:"text-red-600 mb-4 text-4xl",children:""}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:w}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Check the console for more details. The backend may need to implement the profile endpoint."}),l.jsx("button",{onClick:n,className:"mt-4 px-4 py-2 bg-gray-200 dark:bg-dark-700 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-dark-600 transition-colors",children:"Close"})]})]}):c?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-700 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"User Profile"}),l.jsx("button",{onClick:n,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:""})]}),l.jsx("div",{className:"p-6 space-y-6 overflow-y-auto",children:xe&&Le&&j&&!c.isGuest?l.jsx(zc,{userId:j,username:c.username,isGuest:c.isGuest,onActiveStateChange:q=>{Ue(q),q||Oe(!1)},startWithSetup:Ge}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"relative h-20 w-20 rounded-full overflow-hidden bg-gray-200 dark:bg-dark-700",children:[c.avatar?l.jsx("img",{src:M||"/placeholder.svg",alt:c.username,className:"h-full w-full object-cover"}):l.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-500 text-white text-2xl font-bold",children:c.username.slice(0,2).toUpperCase()}),Le&&_&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:de,onChange:F}),l.jsx("button",{onClick:()=>{var q;return(q=de.current)==null?void 0:q.click()},className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs py-1 text-center",children:"Change Avatar"})]})]}),l.jsxs("div",{children:[_&&Le?l.jsx("input",{type:"text",value:g,onChange:q=>x(q.target.value),className:"text-2xl font-bold border-b border-gray-300 dark:border-dark-600 focus:outline-none focus:border-blue-500 bg-white/50 dark:bg-dark-800 text-gray-900 dark:text-white"}):l.jsx("h3",{className:"text-2xl font-bold",style:{color:ft(e,!0)},children:c.username}),c.status&&l.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${c.status==="online"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":c.status==="in-game"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-gray-100/40 dark:bg-dark-700 text-gray-800 dark:text-gray-200"}`,children:c.status})]})]}),Le&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Email"}),_?l.jsx("input",{type:"email",value:I,onChange:q=>z(q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/50 dark:bg-dark-700 text-gray-900 dark:text-white"}):l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.email})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Bio"}),_?l.jsx("div",{className:"space-y-2",children:l.jsx("textarea",{value:p,onChange:q=>d(q.target.value),placeholder:"Tell us about yourself...",className:"w-full min-h-[100px] px-3 py-2 border border-gray-300 dark:border-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/50 dark:bg-dark-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})}):l.jsx("div",{children:l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.bio||"No bio yet"})})]}),Le&&l.jsx("div",{className:"flex space-x-2 mt-4",children:_?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm",children:"Save Changes"}),l.jsx("button",{onClick:()=>{b(!1),d(c.bio||""),x(c.username),z(c.email||""),J(null)},className:"px-4 py-2 bg-gray-200 dark:bg-dark-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-dark-600 transition-colors text-sm",children:"Cancel"})]}):l.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm",children:"Edit Profile"})}),Le&&!_&&j&&!c.isGuest&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-dark-700",children:[l.jsx("h4",{className:"text-sm font-semibold mb-3 text-gray-900 dark:text-white",children:"Security Settings"}),l.jsx(zc,{userId:j,username:c.username,isGuest:c.isGuest,onActiveStateChange:q=>{Ue(q),q&&Oe(!0)}}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("navigate",{detail:"gdpr"}))}catch{}n()},className:"px-3 py-2 mt-2 bg-gray-100 dark:bg-dark-700 text-sm hover:bg-gray-200 dark:hover:bg-dark-600 rounded",children:"Manage My Data (GDPR)"})})]}),c.stats&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Stats"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.stats.gamesPlayed}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Games Played"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.stats.wins}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Wins"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:c.stats.losses}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Losses"})]})]}),l.jsx("div",{className:"mt-3 flex justify-center",children:l.jsx("button",{onClick:ve,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"View Match History"})}),rt&&l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsx("h5",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Recent Matches"}),G.slice(0,5).map(q=>l.jsxs("div",{className:"flex justify-between text-[11px] bg-gray-50/40 dark:bg-gray-900/70 px-2 py-1 rounded border border-gray-200 dark:border-gray-700",children:[l.jsxs("span",{children:["#",q.id,"  Score ",q.score]}),l.jsx("span",{className:q.rank===1?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:q.rank===1?"Win":"Loss"})]},q.id)),G.length>5&&l.jsxs("div",{className:"text-center text-[10px] text-gray-500 dark:text-gray-400",children:["Showing 5 of ",G.length]})]})]}),!Le&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:te,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Friend"}),l.jsx("button",{onClick:()=>{r&&e&&(r(e),n())},className:"flex-1 px-4 py-2 bg-white/50 dark:bg-dark-700 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-50/40 dark:hover:bg-dark-600 transition-colors",children:"Send Message"})]})]})})]}):l.jsx("div",{className:"py-8 px-6 text-center text-gray-500 dark:text-gray-400",children:"Profile not found"})})}):null}const Mp=v.createContext(void 0);function Sw({children:e}){const[t,n]=v.useState([]),[r,o]=v.useState(()=>{}),[s,a]=v.useState(()=>{}),i=v.useCallback(c=>{r(c)},[r]),u=v.useCallback(c=>{s(c)},[s]);return l.jsx(Mp.Provider,{value:{pendingRequests:t,setPendingRequests:n,handleAcceptFriendship:i,handleDenyFriendship:u,setAcceptHandler:o,setDenyHandler:a},children:e})}function Up(){const e=xt.useContext(Mp);if(!e)throw new Error("useFriendshipContext must be used within FriendshipProvider");return e}const Nw=({messages:e,onSendMessage:t,currentRoom:n,currentRoomName:r,onInvitePong:o,onBlockUser:s,blockedUsers:a,onOpenProfile:i,roomUsers:u})=>{const[c,m]=v.useState(""),f=[{name:"me",description:"Send an action/emote message"},{name:"whisper",description:"(alias /w) Not implemented private whisper",aliases:["w"]},{name:"invite",description:"Invite a user to current room"},{name:"debug",description:"Send raw WebSocket message (debug)"},{name:"help",description:"Show available commands"}],[h,w]=v.useState(!1),[y,_]=v.useState(f),[b,p]=v.useState(0),d=v.useRef(null),g=()=>{var k;(k=d.current)==null||k.scrollIntoView({behavior:"smooth"})};v.useEffect(()=>{g()},[e]);const x=()=>{!c.trim()||!n||(t(c),m(""),w(!1))},I=c.startsWith("/");v.useEffect(()=>{if(!I){w(!1);return}const k=c.slice(1).split(/\s+/)[0].toLowerCase();if(k.length===0){_(f),w(!0),p(0);return}const M=f.filter(E=>E.name.startsWith(k)||(E.aliases||[]).some(A=>A.startsWith(k)));_(M.length>0?M:[]),w(!0),p(0)},[c]);const z=k=>{const M=c.split(/\s+/);M[0]=`/${k.name}`;const E=M.join(" ");m(M.length===1?E+" ":E),w(!1)},j=k=>{if(h&&y.length>0)if(k.key==="ArrowDown")k.preventDefault(),p(M=>(M+1)%y.length);else if(k.key==="ArrowUp")k.preventDefault(),p(M=>(M-1+y.length)%y.length);else if(k.key==="Tab")k.preventDefault(),z(y[b]);else if(k.key==="Enter"){const M=c.slice(1).split(/\s+/)[0];if(!(M&&y.some(E=>E.name===M||(E.aliases||[]).includes(M)))){if(M.length>0){z(y[b]);return}}}else k.key==="Escape"&&w(!1);k.key==="Enter"&&x()};return l.jsxs("div",{className:"flex flex-col glass-light-xs dark:glass-dark-xs glass-border shadow-lg h-[600px] overflow-hidden",role:"region","aria-label":"Chat room",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-500/70 to-purple-500/70",role:"banner",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white",id:"chat-room-title",children:n?`${r||"Room"}`:"Select a room"}),n&&l.jsxs("p",{className:"text-xs text-white opacity-75","aria-label":"Room ID",children:["ID: ",n]})]}),n&&l.jsx("button",{onClick:()=>o(u),className:"bg-green-500 text-white text-sm px-3 py-1 hover:bg-green-600 transition-all","aria-label":"Invite users to play Pong",children:" Invite to Pong"})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto glass-light-xs dark:glass-dark-xs glass-border p-4 space-y-3",role:"log","aria-live":"polite","aria-label":"Chat messages",children:[e.length>0?e.filter(k=>!a.includes(k.user)).map((k,M)=>{const E=k.userId!==void 0?ft(k.userId,!0):void 0;return l.jsx("div",{className:"flex justify-start",children:l.jsxs("div",{className:"px-4 py-2 max-w-[70%] shadow-sm glass-light-xs dark:glass-dark-xs glass-border text-gray-800 dark:text-gray-200",role:"article","aria-label":`Message from ${k.user}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{onClick:()=>i(k.user),className:"block text-xs font-bold mb-1 hover:underline cursor-pointer",style:{color:E},children:k.user}),l.jsx("button",{onClick:()=>s(k.user),className:"text-xs text-red-500 hover:underline",children:a.includes(k.user)?"Unblock":"Block"})]}),l.jsx("p",{className:"text-sm",children:k.content}),k.timestamp&&l.jsx("span",{className:"block text-xs text-gray-400 mt-1",children:new Date(k.timestamp).toLocaleTimeString()})]})},M)}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n?"No messages yet. Start the conversation!":"Join a room to start chatting"})}),l.jsx("div",{ref:d})]}),n&&l.jsxs("div",{className:"w-48 glass-light-xs dark:glass-dark-xs glass-border overflow-y-auto",role:"complementary","aria-label":"Online users list",children:[l.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Users (",u.length,")"]})}),l.jsxs("div",{className:"p-2 space-y-1",children:[u.map(k=>{const M=ft(k.id,!0);return l.jsxs("div",{onClick:()=>i(k.username),className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700/40 cursor-pointer transition-colors",role:"button",tabIndex:0,"aria-label":`View ${k.username}'s profile, ${k.onlineStatus===1?"online":"offline"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${k.onlineStatus===1?"bg-green-500":"bg-gray-400"}`}),l.jsx("span",{className:"text-sm font-bold truncate",style:{color:M},children:k.username})]},k.id)}),u.length===0&&l.jsx("div",{className:"text-xs text-gray-400 text-center py-4",children:"No users"})]})]})]}),l.jsx("div",{className:"p-4 glass-light-xs dark:glass-dark-xs glass-border",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",placeholder:n?"Type a message...":"Select a room first...",className:`w-full border rounded-full px-4 py-2 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 glass-light-xs dark:glass-dark-xs ${I?"border-purple-500 text-purple-600 dark:text-purple-400 focus:ring-purple-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-400"} disabled:bg-gray-100/30 dark:disabled:bg-gray-900/30 dark:bg-transparent`,value:c,onChange:k=>m(k.target.value),onKeyDown:j,"aria-label":"Message input","aria-describedby":"chat-room-title",disabled:!n}),h&&I&&y.length>0&&l.jsxs("div",{className:"absolute left-0 right-0 bottom-full mb-2 glass-light-sm dark:glass-dark-sm glass-border shadow-lg z-50 overflow-hidden max-h-64 overflow-y-auto",role:"listbox","aria-label":"Command suggestions",children:[y.map((k,M)=>l.jsxs("button",{type:"button",onClick:()=>z(k),className:`w-full text-left px-4 py-2 text-sm flex flex-col ${M===b?"bg-purple-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"}`,role:"option","aria-selected":M===b,children:[l.jsxs("span",{className:"font-medium",children:["/",k.name,k.aliases?` (${k.aliases.map(E=>`/${E}`).join(", ")})`:""]}),l.jsx("span",{className:M===b?"text-purple-100":"text-gray-500 dark:text-gray-400",children:k.description})]},k.name)),y.length===0&&l.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No matching commands"}),l.jsxs("div",{className:"px-4 py-1 text-[11px] bg-gray-50 dark:bg-gray-900/70 text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:[l.jsx("span",{className:"mr-2",children:" to navigate"}),l.jsx("span",{className:"mr-2",children:"Tab to autocomplete"}),l.jsx("span",{children:"Enter to send"})]})]})]}),l.jsx("button",{onClick:x,disabled:!n,className:`px-6 py-2 rounded-full active:scale-95 transition-all ${n?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 cursor-not-allowed"}`,children:"Send"})]})})]})},jw=({rooms:e,currentRoom:t,onSelectRoom:n,onCreateRoom:r,onRefreshRooms:o,onStartDM:s,selfUserId:a,userMap:i})=>{const[u,c]=v.useState(""),[m,f]=v.useState(!1),h=v.useCallback(y=>{try{if((y==null?void 0:y.roomType)===2&&typeof y.roomName=="string"&&y.roomName.startsWith("DM ")){const _=y.roomName.split(" ");if(_.length===3){const b=Number(_[1]),p=Number(_[2]);if(!Number.isNaN(b)&&!Number.isNaN(p)){const d=b===a?p:p===a?b:null;if(d!=null)return i[d]||`DM with User ${d}`}}}}catch{}return y.roomName},[a,i]),w=()=>{u.trim()&&(r(u),c(""),f(!1))};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border h-[600px] flex flex-col overflow-hidden",role:"navigation","aria-label":"Chat rooms list",children:[l.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-500/70 to-pink-500/70",children:l.jsx("h2",{className:"text-lg font-semibold text-white",id:"room-list-title",children:"Chat Rooms"})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:e.length>0?e.map(y=>l.jsxs("button",{onClick:()=>n(y.roomId),className:`w-full text-left px-4 py-3 transition-all ${t===y.roomId?"bg-blue-500 text-white shadow-md":"bg-gray-50 dark:bg-gray-700/45 hover:bg-gray-100 dark:hover:bg-gray-600/45 text-gray-800 dark:text-gray-200"}`,"aria-label":`Join room ${h(y)}`,"aria-current":t===y.roomId?"true":"false",children:[l.jsx("div",{className:"font-medium",children:h(y)}),l.jsxs("div",{className:"text-xs opacity-75",children:["ID: ",y.roomId]})]},y.roomId)):l.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-center text-sm italic py-8",children:"No rooms available. Create one!"})}),l.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 space-y-2",children:m?l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",placeholder:"Room name...",value:u,onChange:y=>c(y.target.value),onKeyDown:y=>y.key==="Enter"&&w(),className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-400 dark:bg-gray-700/70 dark:text-gray-200",autoFocus:!0,"aria-label":"New room name"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:w,className:"flex-1 bg-purple-500 text-white px-3 py-2 hover:bg-purple-600 text-sm","aria-label":"Create new room",children:"Create"}),l.jsx("button",{onClick:()=>{f(!1),c("")},className:"flex-1 bg-gray-200 text-gray-700 px-3 py-2 hover:bg-gray-300 text-sm","aria-label":"Cancel room creation",children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>f(!0),className:"w-full bg-purple-500 text-white px-4 py-2 hover:bg-purple-600 transition-all","aria-label":"Show create room form",children:"+ Create Room"}),l.jsx("button",{onClick:o,className:"w-full bg-gray-100 text-gray-700 px-4 py-2 hover:bg-gray-200 transition-all","aria-label":"Refresh rooms list",children:" Refresh Rooms"}),l.jsx("button",{onClick:()=>{const y=prompt("Enter username or user ID to start DM:");y&&s(y)},className:"w-full bg-blue-500 text-white px-4 py-2 hover:bg-blue-600 transition-all","aria-label":"Start direct message",children:" Direct Message"})]})})]})};function Iw({selfUserId:e,showToast:t,onOpenPongInvite:n}){const{socket:r,payloadReceived:o,isConnected:s,sendMessage:a}=jo(),{setPendingRequests:i,setAcceptHandler:u,setDenyHandler:c}=Up(),[m,f]=v.useState([]),[h,w]=v.useState(null),y=v.useRef(()=>{}),[_,b]=v.useState(null),[p,d]=v.useState(null),[g,x]=v.useState({}),[I,z]=v.useState([]),[j,k]=v.useState(null),[M,E]=v.useState(!1),[A,J]=v.useState({}),[xe,Ue]=v.useState([]),[Ge,Oe]=v.useState(null),[rt,U]=v.useState([]),[G,H]=v.useState(null),de=h!=null?g[String(h)]||[]:[],K=v.useCallback(S=>{if(!S)return null;try{if((S==null?void 0:S.roomType)===2&&typeof S.roomName=="string"&&S.roomName.startsWith("DM ")){const T=S.roomName.split(" ");if(T.length===3){const D=Number(T[1]),ee=Number(T[2]);if(!Number.isNaN(D)&&!Number.isNaN(ee)){const ze=D===e?ee:ee===e?D:null;if(ze!=null)return A[ze]||`DM with User ${ze}`}}}}catch{}return(S==null?void 0:S.roomName)||null},[e,A]),Y=v.useCallback((S,T,D)=>{let ee=D;ee||(S.includes("friendship")||S.includes("user_connections")||S.includes("confirm_")||S.includes("deny_")||S.includes("request_")||S==="user_profile"?ee="users":ee="chat");const ze={funcId:S,payload:T,target_container:ee};console.log("[v0] Sending to socket:",ze),a(ze)||console.warn("[v0] Socket not connected, message queued:",S)},[a]);v.useEffect(()=>{y.current=Y},[Y]),v.useEffect(()=>{var S,T,D,ee,ze,$e;if(o)switch(!((S=o.funcId)!=null&&S.includes("game_state"))&&!((T=o.source_container)!=null&&T.includes("pong"))&&console.log("[Chat] Received:",o.funcId),o.funcId){case L.ws.users.fetchUserConnections.funcId:console.log("Setting user connections:",o.payload);const Re=o.payload||[],yt={};Re.forEach(P=>{P&&typeof P.id=="number"&&typeof P.username=="string"&&(yt[P.id]=P.username)}),J(P=>({...P,...yt})),console.log("Updated userMap with",Object.keys(yt).length,"users from connections");const Dt=Re.filter(P=>P.status===1).map(P=>({userId:P.id,username:P.username,alias:P.alias}));Ue(Dt),console.log("Pending friendship requests:",Dt);break;case L.ws.chat.sendMessage.funcId:try{const P=o.payload;if(console.log("=== Incoming message ==="),console.log("Full payload:",JSON.stringify(P,null,2)),console.log("userId:",P.userId),console.log("userId type:",typeof P.userId),!P||!P.roomId){console.error("Invalid message payload:",P);break}if(!P.userId||typeof P.userId!="number"){console.error(" Invalid userId in message:",P.userId,"Full payload:",P),console.error("Message will be skipped because userId is missing or invalid");break}const pe=P.messageDate<3250368e4?new Date(P.messageDate*1e3).toISOString():new Date(P.messageDate).toISOString();let me=A[P.userId];me||(console.log(`Username not in map for user ${P.userId}, fetching...`),F(P.userId),me=`User ${P.userId}`);const ae={user:me,content:P.messageString,timestamp:pe,userId:P.userId};console.log(" Transformed message:",ae);const ot=String(P.roomId);x(Ve=>({...Ve,[ot]:[...Ve[ot]||[],ae]}))}catch(P){console.error("Error processing message:",P)}break;case L.ws.chat.listRooms.funcId:console.log("Setting rooms:",o.payload);const ut=o.payload;if(console.log("Number of rooms received:",ut==null?void 0:ut.length),Array.isArray(ut)&&ut.forEach(P=>{console.log(`  - Room ${P.roomId}: "${P.roomName}" (type: ${P.roomType})`)}),f(o.payload),Ge!=null&&Array.isArray(ut)){const P=ut.find(pe=>{if(pe.roomType!==2||typeof pe.roomName!="string"||!pe.roomName.startsWith("DM "))return!1;const me=pe.roomName.split(" ");if(me.length!==3)return!1;const ae=Number(me[1]),ot=Number(me[2]);return Number.isNaN(ae)||Number.isNaN(ot)?!1:(ae===e||ot===e)&&(ae===Ge||ot===Ge)});P&&(ve(P.roomId),Oe(null))}const Qt=o.payload;Array.isArray(Qt)&&(console.log("Fetching data for",Qt.length,"rooms to populate usernames"),Qt.forEach((P,pe)=>{setTimeout(()=>{Y(L.ws.chat.getRoomData.funcId,{roomId:P.roomId})},pe*50)}));break;case L.ws.chat.joinRoom.funcId:try{console.log("Joined room - full payload:",JSON.stringify(o.payload,null,2));const P=o.payload;if(P.roomId){const pe=String(P.roomId);console.log("Successfully joined room:",pe),g[pe]&&g[pe].length>0?console.log("Found",g[pe].length,"messages in memory for this room"):(console.log("No messages in memory for this room - starting fresh"),x(me=>({...me,[pe]:me[pe]||[]}))),Number(P.roomId)===h&&typeof P.user=="number"&&P.user!==e?(console.log(`[joinRoom] User ${P.user} joined our current room ${P.roomId}, refreshing user list`),Y(L.ws.chat.getRoomData.funcId,{roomId:Number(P.roomId)})):Number(P.roomId)===h&&P.user===e&&console.log(`[joinRoom] We joined room ${P.roomId} (already refreshed by handleSelectRoom)`)}}catch(P){console.error("Error processing join room:",P)}break;case L.ws.chat.addRoom.funcId:if(o.code===0)console.log("Room added, refreshing list"),Y(L.ws.chat.listRooms.funcId,{});else{const P=((D=o.payload)==null?void 0:D.message)||((ee=o.payload)==null?void 0:ee.error)||"Failed to create room. Please check room name (min 3 characters, alphanumeric only).";console.error("Failed to create room:",P),t&&t(P,"error")}break;case L.ws.chat.addUserToRoom.funcId:try{const P=o.payload;console.log("Invite sent to user for room:",P),P&&typeof P.user=="number"&&(A[P.user]||F(P.user))}catch(P){console.error("Error handling addUserToRoom event:",P)}break;case L.ws.chat.getRoomData.funcId:try{console.log("Received full room data:",o.payload);const P=o.payload,pe=String(P.room.roomId);if(Array.isArray(P.users)){const me={};if(P.users.forEach(ae=>{ae&&typeof ae.id=="number"&&typeof ae.username=="string"&&(me[ae.id]=ae.username)}),J(ae=>({...ae,...me})),Number(pe)===h)if(Array.isArray(P.userConnections)){console.log(`[getRoomData] Filtering users for room ${pe}`),console.log(`[getRoomData] ChatRoomUserAccessType.JOINED = ${Ms.JOINED}`),console.log("[getRoomData] userConnections:",JSON.stringify(P.userConnections)),console.log("[getRoomData] all users:",JSON.stringify(P.users));const ae=new Set(P.userConnections.filter(Ve=>{const la=Ve&&Ve.userState===Ms.JOINED;return console.log(`[getRoomData] User ${Ve==null?void 0:Ve.userId} state=${Ve==null?void 0:Ve.userState} isJoined=${la}`),la}).map(Ve=>Ve.userId));console.log("[getRoomData] joinedIds:",Array.from(ae));const ot=(P.users||[]).filter(Ve=>ae.has(Ve.id));console.log("[getRoomData] Final joinedUsers:",JSON.stringify(ot)),U(ot)}else console.log("[getRoomData] No userConnections array, using all users"),U(P.users||[])}if(Array.isArray(P.messages)){const me=P.messages.filter(ae=>typeof ae.userId=="number").map(ae=>{var ot;return{user:P.users&&((ot=P.users.find(Ve=>Ve.id===ae.userId))==null?void 0:ot.username)||A[ae.userId]||`User ${ae.userId}`,content:ae.messageString,timestamp:new Date(ae.messageDate*1e3).toISOString(),userId:ae.userId}});x(ae=>({...ae,[pe]:me}))}else x(me=>({...me,[pe]:me[pe]||[]}))}catch(P){console.error("Error processing getRoomData:",P)}break;case L.ws.users.confirmFriendship.funcId:console.log("Friendship accepted response:",o),o.code===0?(console.log(" Friendship request accepted successfully"),Y(L.ws.users.fetchUserConnections.funcId,null)):console.error(" Failed to accept friendship:",o);break;case L.ws.users.denyFriendship.funcId:console.log("Friendship denied response:",o),o.code===0?(console.log(" Friendship request denied successfully"),Y(L.ws.users.fetchUserConnections.funcId,null)):console.error(" Failed to deny friendship:",o);break;case L.ws.chat.sendDirectMessage.funcId:if(console.log("sendDirectMessage response:",o),o.code===0&&o.payload){console.log(" Direct message sent successfully");const P=o.payload;String(P.roomId),Y(L.ws.chat.listRooms.funcId,{}),setTimeout(()=>{Y(L.ws.chat.getRoomData.funcId,{roomId:Number(P.roomId)})},100),setTimeout(()=>{w(P.roomId)},200)}else if(console.error(" Failed to send direct message:",o),t){const P=((ze=o.payload)==null?void 0:ze.message)||(($e=o.payload)==null?void 0:$e.error)||`Failed to send DM (code: ${o.code})`;t(P,"error")}break;case"user_connected":if(console.log("User connected event:",o.payload),o.code===0&&o.payload){const P=o.payload.userId;P&&typeof P=="number"&&(console.log(`User ${P} connected, fetching username...`),F(P),U(pe=>pe.map(me=>me.id===P?{...me,onlineStatus:1}:me)))}break;case"user_disconnected":if(console.log("User disconnected event:",o.payload),o.payload&&typeof o.payload.userId=="number"){const P=o.payload.userId;U(pe=>pe.map(me=>me.id===P?{...me,onlineStatus:0}:me))}break;case L.ws.users.requestUserProfileData.funcId:if(console.log("[requestUserProfileData] Response received:",o),o.code===0&&o.payload){const P=o.payload;P.id&&P.username&&(console.log(`[requestUserProfileData] Adding to userMap: ${P.id} -> ${P.username}`),J(pe=>({...pe,[P.id]:P.username})),G===P.username&&(console.log(`[requestUserProfileData] Opening profile for ${P.username} (id: ${P.id})`),k(P.id),E(!0),H(null)))}else console.warn("[requestUserProfileData] Failed to fetch profile:",o),G&&(t&&t(`Cannot open profile for ${G} - user not found`,"error"),H(null));break;default:o.source_container!=="pong"&&console.log("Unhandled funcId:",o.funcId)}},[o,Y]);const F=v.useCallback(S=>{try{console.log(`[fetchUsername] Fetching username for user ${S} via WebSocket...`),y.current(L.ws.users.requestUserProfileData.funcId,S)}catch(T){console.warn(`[fetchUsername] Error fetching username for user ${S}:`,T)}},[]);v.useEffect(()=>{console.log("Requesting room list and user connections on mount"),Y(L.ws.chat.listRooms.funcId,{}),Y(L.ws.users.fetchUserConnections.funcId,null)},[]);const X=S=>{if(!S.startsWith("/"))return null;const T=S.trim().split(/\s+/),D=T[0].substring(1).toLowerCase(),ee=T.slice(1);return{command:D,args:ee}},te=v.useCallback(S=>{var D,ee;if(!h)return;const T=X(S);if(T){const{command:ze,args:$e}=T;switch(console.log("Slash command detected:",ze,$e),ze){case"me":Y(L.ws.chat.sendMessage.funcId,{roomId:h,messageString:`*${$e.join(" ")}*`});break;case"whisper":case"w":t&&t("Private whisper feature is not implemented yet.","error");break;case"invite":if($e.length!==1){t&&t("Usage: /invite <username or userId>","error");return}if(p===2){t&&t("Cannot invite users into a direct message room.","error");return}const Re=$e[0],yt=/^\d+$/.test(Re);let Dt=null;if(yt)Dt=Number(Re),Y(L.ws.chat.addUserToRoom.funcId,{roomId:h,user_to_add:Dt});else{console.log("Looking for username:",Re,"in userMap:",A);const ut=Object.entries(A).find(([,Qt])=>Qt.toLowerCase()===Re.toLowerCase());if(ut)Dt=Number(ut[0]),Y(L.ws.chat.addUserToRoom.funcId,{roomId:h,user_to_add:Dt});else{console.log(`Searching for user: ${Re}`);const Qt=P=>{var pe,me;try{const ae=JSON.parse(P.data);if(ae.funcId===L.ws.users.requestUserProfileData.funcId)if((pe=r.current)==null||pe.removeEventListener("message",Qt),ae.code===0&&((me=ae.payload)!=null&&me.id)){const ot=ae.payload.id;console.log(`Found user ${Re} with ID ${ot}`),Y(L.ws.chat.addUserToRoom.funcId,{roomId:h,user_to_add:ot})}else t&&t(`User "${Re}" not found. Please check the username and try again.`,"error")}catch(ae){console.error("Error handling search response:",ae)}};(D=r.current)==null||D.addEventListener("message",Qt),Y(L.ws.users.requestUserProfileData.funcId,Re),setTimeout(()=>{var P;(P=r.current)==null||P.removeEventListener("message",Qt)},5e3)}}break;case"debug":if($e.length===0){t&&t("Usage: /debug <raw JSON string>","error");return}try{const ut=$e.join(" ");((ee=r.current)==null?void 0:ee.readyState)===WebSocket.OPEN?(r.current.send(ut),t&&t("Debug message sent","success")):t&&t("WebSocket not connected","error")}catch(ut){t&&t(`Error sending debug message: ${ut}`,"error")}break;case"help":t&&t("Commands: /me, /whisper, /invite, /debug, /help","success");break;default:t&&t(`Unknown command: /${ze}`,"error")}return}Y(L.ws.chat.sendMessage.funcId,{roomId:h,messageString:S})},[h,Y,A]),ve=v.useCallback(S=>{const T=m.find(D=>D.roomId===S);console.log("Selecting room:",S,T),w(S),b(K(T)),d((T==null?void 0:T.roomType)??null),U([]),Y(L.ws.chat.joinRoom.funcId,{roomId:S}),Y(L.ws.chat.getRoomData.funcId,{roomId:S})},[m,K]),Le=v.useCallback(S=>{console.log("[v0] handleCreateRoom called with roomName:",S),console.log("[v0] Creating room with funcId:",L.ws.chat.addRoom.funcId),Y(L.ws.chat.addRoom.funcId,{roomName:S,roomType:1})},[]),q=v.useCallback(()=>{console.log("Refreshing rooms"),Y(L.ws.chat.listRooms.funcId,{})},[]),oe=v.useCallback(S=>{h&&(console.log("Inviting to pong in room:",h),n?n(S):t&&t("Pong invitation feature not yet implemented","error"))},[h,t,n]),ne=v.useCallback(S=>{console.log("Accepting friendship request from:",S),Y(L.ws.users.confirmFriendship.funcId,S),setTimeout(()=>{Y(L.ws.users.fetchUserConnections.funcId,null)},500)},[]),re=v.useCallback(S=>{console.log("Denying friendship request from:",S),Y(L.ws.users.denyFriendship.funcId,S),setTimeout(()=>{Y(L.ws.users.fetchUserConnections.funcId,null)},500)},[]);v.useEffect(()=>{localStorage.getItem("FRIENDSHIP_TEST_MODE")==="true"||i(xe)},[xe,i]),v.useEffect(()=>{u(()=>ne),c(()=>re)},[ne,re,u,c]);const Fe=v.useCallback(S=>{z(T=>T.includes(S)?T.filter(D=>D!==S):[...T,S])},[]),R=v.useCallback(S=>{console.log("=== Opening profile ==="),console.log("Username received:",S);const T=S.match(/User (\d+)/);if(T&&T[1]){const ee=Number.parseInt(T[1],10);if(!isNaN(ee)){k(ee),E(!0);return}}const D=Object.entries(A).find(([,ee])=>ee===S);if(D){const ee=Number(D[0]);k(ee),E(!0);return}console.log(`[handleOpenProfile] Username "${S}" not in userMap, fetching by username...`),H(S),y.current(L.ws.users.requestUserProfileData.funcId,S)},[A]),W=v.useCallback(S=>{console.log("Starting DM with:",S);const T=typeof S=="number"||/^\d+$/.test(String(S));let D;if(T)D=typeof S=="number"?S:Number(S),console.log("Using userId directly:",D);else{const ee=Object.entries(A).find(([,ze])=>ze===S);if(!ee){t&&t(`Cannot start DM - user "${S}" not found in current session. Try entering their user ID number instead.`,"error");return}D=Number(ee[0]),console.log("Resolved username to userId:",D)}Y(L.ws.chat.sendDirectMessage.funcId,{targetUserId:D,messageString:"Started a conversation"}),Oe(D),setTimeout(()=>{Y(L.ws.chat.listRooms.funcId,{})},100)},[Y,A]);return l.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[l.jsx("div",{className:"w-full max-w-6xl",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsx(jw,{rooms:m,currentRoom:h,onSelectRoom:ve,onCreateRoom:Le,onRefreshRooms:q,onStartDM:W,selfUserId:e,userMap:A})}),l.jsx("div",{className:"md:col-span-2",children:l.jsx(Nw,{messages:de,onSendMessage:te,currentRoom:h,currentRoomName:_,onInvitePong:oe,onBlockUser:Fe,blockedUsers:I,onOpenProfile:R,roomUsers:rt})})]})}),M&&j&&l.jsx(Lp,{userId:j,isOpen:M,onClose:()=>{E(!1),k(null)},onStartDM:W,showToast:t})]})}function Cw({whenCompletedSuccesfully:e}){const[t,n]=v.useState(""),[r,o]=v.useState(""),[s,a]=v.useState(""),[i,u]=v.useState(""),[c,m]=v.useState({}),[f,h]=v.useState(!1),[w,y]=v.useState(null),[_,b]=v.useState(!1),[p,d]=v.useState(!1),g=k=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k),x=k=>k.length<8?"Password must be at least 8 characters":/[A-Z]/.test(k)?/[a-z]/.test(k)?/[0-9]/.test(k)?null:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter",I=k=>k.length<3?"Username must be at least 3 characters":k.length>20?"Username must be less than 20 characters":/^[a-zA-Z0-9_]+$/.test(k)?null:"Username can only contain letters, numbers, and underscores",z=async(k,M,E)=>{const A=`https://${window.location.host}/public_api/auth/create/user`,J=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:k,email:M,password:E})});if(!J.ok){const Ue=await J.text();throw new Error(Ue||"Registration failed")}return await J.json()},j=async()=>{y(null),m({});const k={},M=I(t);M&&(k.registerUsername=M),r?g(r)||(k.registerEmail="Please enter a valid email"):k.registerEmail="Email is required";const E=x(s);if(E&&(k.registerPassword=E),s!==i&&(k.registerConfirmPassword="Passwords do not match"),Object.keys(k).length>0){m(k);return}h(!0);try{const A=await z(t,r,s);e(A)}catch(A){A instanceof Error?y(A.message):y("Registration failed")}finally{h(!1)}};return l.jsx("div",{className:"flex items-start justify-center px-4 py-4",children:l.jsxs("div",{className:"w-full max-w-md shadow-lg glass-light-sm dark:glass-dark-sm glass-border p-4 md:p-6 mt-4 md:mt-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4 text-gray-900 dark:text-white",children:"Create Account"}),l.jsx("p",{className:"text-center mb-4 text-gray-500 dark:text-gray-300",children:"Fill in your details to register"}),w&&l.jsxs("div",{className:"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 p-2 mb-4 text-center",children:[" ",w]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-username",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Username"}),l.jsx("input",{id:"register-username",type:"text",placeholder:"johndoe",value:t,onChange:k=>n(k.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/80 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerUsername?"border-red-500 dark:border-red-400":""}`,disabled:f}),c.registerUsername&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerUsername})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-email",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Email"}),l.jsx("input",{id:"register-email",type:"email",placeholder:"you@example.com",value:r,onChange:k=>o(k.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/80 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerEmail?"border-red-500 dark:border-red-400":""}`,disabled:f}),c.registerEmail&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerEmail})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-password",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Password"}),l.jsx("input",{id:"register-password",type:_?"text":"password",placeholder:"",value:s,onChange:k=>a(k.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerPassword?"border-red-500 dark:border-red-400":""}`,disabled:f}),l.jsxs("button",{type:"button",onClick:()=>b(!_),className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[_?"Hide":"Show"," Password"]}),c.registerPassword&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerPassword})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-confirm-password",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Confirm Password"}),l.jsx("input",{id:"register-confirm-password",type:p?"text":"password",placeholder:"",value:i,onChange:k=>u(k.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerConfirmPassword?"border-red-500 dark:border-red-400":""}`,disabled:f}),l.jsxs("button",{type:"button",onClick:()=>d(!p),className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[p?"Hide":"Show"," Password"]}),c.registerConfirmPassword&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerConfirmPassword})]}),l.jsx("button",{onClick:j,className:"w-full bg-blue-600 dark:bg-blue-600 text-white py-2 hover:bg-blue-700 dark:hover:bg-blue-700 transition-colors",disabled:f,children:f?"Creating account...":"Create Account"})]})]})})}function Ew({showToast:e,onNavigateBack:t}){const[n,r]=v.useState(!1),[o,s]=v.useState(null),a=()=>localStorage.getItem("jwt"),i=()=>{try{const f=localStorage.getItem("jwt");if(!f)return null;const h=JSON.parse(atob(f.split(".")[1]));return typeof(h==null?void 0:h.uid)=="number"?h.uid:h!=null&&h.uid?Number(h.uid):null}catch{return null}},u=async()=>{r(!0),s(null);try{const f=i();if(!f){e==null||e("Not signed in","error"),r(!1);return}const h=await fetch("/api/auth/gdpr/me",{method:"POST",headers:{Authorization:`Bearer ${a()}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({userId:f})});if(!h.ok)throw new Error("Failed to fetch");const w=await h.json();s(w),e==null||e("Personal data fetched","success")}catch(f){console.error("fetchMyData error",f),e==null||e("Failed to fetch personal data","error")}finally{r(!1)}},c=async()=>{if(confirm("Are you sure you want to request anonymization? This will remove personal identifiers.")){r(!0);try{const f=i();if(!f){e==null||e("Not signed in","error"),r(!1);return}if(!(await fetch("/api/auth/gdpr/anonymize",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a()}`},credentials:"include",body:JSON.stringify({userId:f})})).ok)throw new Error("Anonymize failed");e==null||e("Anonymization request successful","success"),await u(),t==null||t()}catch(f){console.error("doAnonymize error",f),e==null||e("Anonymization failed","error")}finally{r(!1)}}},m=async()=>{if(confirm("Are you sure you want to request account deletion? This is irreversible.")){r(!0);try{const f=i();if(!f){e==null||e("Not signed in","error"),r(!1);return}if(!(await fetch("/api/auth/gdpr/delete",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a()}`},credentials:"include",body:JSON.stringify({userId:f})})).ok)throw new Error("Delete failed");e==null||e("Account deletion requested","success"),t==null||t()}catch(f){console.error("doDelete error",f),e==null||e("Account deletion failed","error")}finally{r(!1)}}};return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Manage My Data (GDPR)"}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:()=>t==null?void 0:t(),className:"px-3 py-1 text-sm bg-gray-200 rounded",children:"Back"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Use the controls below to view, anonymize or delete your personal data."}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:u,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"View My Data"}),l.jsx("button",{onClick:c,disabled:n,className:"px-4 py-2 bg-yellow-600 text-white rounded",children:"Request Anonymization"}),l.jsx("button",{onClick:m,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded",children:"Request Account Deletion"})]}),l.jsxs("div",{children:[n&&l.jsx("div",{className:"text-sm text-gray-500",children:"Processing"}),o&&l.jsx("pre",{className:"mt-3 max-h-80 overflow-auto bg-gray-100 dark:bg-dark-700 p-3 rounded text-xs text-gray-800 dark:text-gray-200",children:JSON.stringify(o,null,2)})]})]})]})})}const Pw=({isLoading:e=!1})=>{const{pendingRequests:t,handleAcceptFriendship:n,handleDenyFriendship:r,setPendingRequests:o}=Up(),s=xt.useRef(null),a=v.useRef(null),i=v.useRef(null);xt.useEffect(()=>{try{const b=localStorage.getItem("jwt");if(b){const p=JSON.parse(atob(b.split(".")[1]));typeof p.uid=="number"&&(s.current=p.uid)}}catch{}},[]);const[u,c]=v.useState(!1),[m,f]=v.useState(null),[h,w]=v.useState({top:0,right:0});xt.useEffect(()=>{if(u&&i.current){const b=i.current.getBoundingClientRect();w({top:b.bottom+8,right:window.innerWidth-b.right})}},[u]),v.useEffect(()=>{if(!u)return;function b(p){const d=a.current,g=i.current;g&&g.contains(p.target)||d&&d.contains(p.target)||c(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[u]);const y=v.useCallback(async b=>{f(b);try{await n(b)}finally{f(null)}},[n]),_=v.useCallback(async b=>{f(b);try{await r(b)}finally{f(null)}},[r]);return l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:i,onClick:()=>c(!u),className:"relative p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100/40 dark:hover:bg-gray-700 transition-colors",title:"Friend requests",children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),t.length>0&&l.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full",children:t.length})]}),u&&Vf.createPortal(l.jsxs("div",{ref:a,className:"fixed w-80 glass-light-sm dark:glass-dark-sm glass-border shadow-xl dark:shadow-dark-700 z-[9999]",style:{top:`${h.top}px`,right:`${h.right}px`},children:[l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Friend Requests (",t.length,")"]})}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length>0?l.jsx("div",{className:"space-y-2 p-2",children:t.filter(b=>b.userId!==s.current).map(b=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/40 dark:bg-gray-700/80 rounded-lg hover:bg-gray-100/40 dark:hover:bg-gray-600/80 transition",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[l.jsx("p",{className:"text-sm font-bold truncate",style:{color:ft(b.userId,!0)},children:b.username}),b.alias&&l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:b.alias})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>y(b.userId),disabled:m===b.userId||e,className:"px-3 py-1 text-xs font-medium bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Accept"}),l.jsx("button",{onClick:()=>_(b.userId),disabled:m===b.userId||e,className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Deny"})]})]},b.userId))}):l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No pending friend requests"})})]}),document.body)]})},zw=["Friends","Requests","Blocked"];function Rw({isOpen:e,onClose:t}){const{sendMessage:n,payloadReceived:r}=jo(),[o,s]=v.useState("Friends"),[a,i]=v.useState([]),[u,c]=v.useState(!1),[m,f]=xt.useState(null);xt.useEffect(()=>{try{const p=localStorage.getItem("jwt");if(p){const d=JSON.parse(atob(p.split(".")[1]));typeof d.uid=="number"&&f(d.uid)}}catch{}},[]);const h=v.useCallback((p,d)=>{n({funcId:p,payload:d,target_container:"users"})},[n]);v.useEffect(()=>{if(!e)return;c(!0),h(L.ws.users.fetchUserConnections.funcId,null);const p=setTimeout(()=>c(!1),2e3);return()=>clearTimeout(p)},[e]),v.useEffect(()=>{if(r){if(r.funcId===L.ws.users.fetchUserConnections.funcId){const p=Array.isArray(r.payload)?r.payload:[];i(p),c(!1)}(r.funcId===L.ws.users.blockUser.funcId||r.funcId===L.ws.users.unblockUser.funcId||r.funcId===L.ws.users.confirmFriendship.funcId||r.funcId===L.ws.users.denyFriendship.funcId||r.funcId===L.ws.users.removeFriendship.funcId)&&setTimeout(()=>h(L.ws.users.fetchUserConnections.funcId,null),200)}},[r]);const w=v.useMemo(()=>a.filter(p=>p.status===2),[a]),y=v.useMemo(()=>a.filter(p=>p.status===3),[a]),_=v.useMemo(()=>a.filter(p=>p.status===1),[a]),b=({item:p})=>l.jsxs("div",{className:"flex gap-2",children:[p.status===1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>h(L.ws.users.confirmFriendship.funcId,p.id),className:"px-3 py-1 text-xs font-medium bg-green-500 text-white hover:bg-green-600",children:"Accept"}),l.jsx("button",{onClick:()=>h(L.ws.users.denyFriendship.funcId,p.id),className:"px-3 py-1 text-xs font-medium bg-red-500 text-white hover:bg-red-600",children:"Deny"})]}),p.status===2&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>h(L.ws.users.removeFriendship.funcId,p.friendId),className:"px-3 py-1 text-xs font-medium bg-gray-500 text-white hover:bg-gray-600",children:"Unfriend"}),l.jsx("button",{onClick:()=>h(L.ws.users.blockUser.funcId,p.friendId),className:"px-3 py-1 text-xs font-medium bg-red-500 text-white hover:bg-red-600",children:"Block"})]}),p.status===3&&l.jsx("button",{onClick:()=>h(L.ws.users.unblockUser.funcId,p.friendId),className:"px-3 py-1 text-xs font-medium bg-gray-100/40 dark:bg-dark-700 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50/40 dark:hover:bg-dark-600",children:"Unblock"})]});return e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40",onClick:p=>{p.target===p.currentTarget&&t()},children:l.jsxs("div",{className:"w-full max-w-2xl glass-light-sm dark:glass-dark-sm glass-border shadow-lg overflow-hidden",onClick:p=>p.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-dark-700",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Friends & Privacy"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100/40 dark:hover:bg-dark-700",children:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"px-4 pt-3",children:l.jsx("div",{className:"flex gap-2 mb-3",children:zw.map(p=>l.jsx("button",{onClick:()=>s(p),className:`px-3 py-1.5 text-sm ${o===p?"bg-blue-600 text-white":"bg-gray-100/40 dark:bg-dark-700 text-gray-700 dark:text-gray-200"}`,children:p},p))})}),l.jsx("div",{className:"px-4 pb-4 max-h-[60vh] overflow-y-auto",children:u?l.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"Loading..."}):l.jsxs("div",{className:"space-y-2",children:[(o==="Friends"?w:o==="Blocked"?y:_).map(p=>{const d=m!==null&&p.friendId===m?p.id:p.friendId;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/40 dark:bg-dark-700",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",style:{color:ft(d,!0)},children:p.username}),p.alias&&l.jsx("div",{className:"text-xs",style:{color:ft(d,!0),opacity:.8},children:p.alias})]}),l.jsx(b,{item:p})]},`${p.id}-${p.status}`)}),o==="Friends"&&w.length===0&&l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No friends yet"}),o==="Requests"&&_.length===0&&l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No pending requests"}),o==="Blocked"&&y.length===0&&l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No blocked users"})]})})]})}):null}function Tw({username:e,userId:t,avatarUrl:n,onLogout:r,isLoggingOut:o,onFriendsClick:s}){const[a,i]=v.useState(!1),[u,c]=v.useState(!1),m=v.useRef(null),f=ft(t,!0);return v.useEffect(()=>{function h(w){m.current&&!m.current.contains(w.target)&&i(!1)}if(a)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[a]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative z-[9999]",ref:m,children:[l.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-2 px-3 py-2 hover:bg-gray-100/40 dark:hover:bg-dark-700 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-dark-700 flex items-center justify-center",children:n?l.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover"}):l.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:e.slice(0,2).toUpperCase()})}),l.jsx("span",{className:"text-sm font-bold",style:{color:f},children:e}),l.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&l.jsxs("div",{className:"absolute right-0 mt-2 w-56 glass-light-sm dark:glass-dark-sm glass-border shadow-lg dark:shadow-dark-700 py-2 z-[10000]",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-dark-700",children:[l.jsx("p",{className:"text-sm font-bold",style:{color:f},children:e}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["User ID: ",t]})]}),l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>{c(!0),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100/40 dark:hover:bg-dark-700 flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"View my profile"]}),l.jsxs("button",{onClick:()=>{i(!1),s==null||s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100/40 dark:hover:bg-dark-700 flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Manage friends"]})]}),l.jsx("div",{className:"border-t border-gray-200 dark:border-dark-700 pt-1 mt-1",children:l.jsxs("button",{onClick:()=>{i(!1),r()},disabled:o,className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${o?"text-red-400 dark:text-red-500 cursor-not-allowed":"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),o?"Logging out...":"Logout"]})})]})]}),u&&l.jsx(Lp,{userId:t,isOpen:u,onClose:()=>c(!1)})]})}function $w({invitations:e,onAccept:t,onDecline:n}){if(console.log("[PongInviteNotifications] Rendering with",e.length,"invitations:",e),e.length===0)return null;const r=o=>{switch(o){case"1v1":return"1v1";case"multiplayer":return"Multiplayer";case"tournament_1v1":return"1v1 Tournament";case"tournament_multi":return"Multi Tournament"}};return l.jsx("div",{className:"fixed top-20 right-6 z-50 space-y-2 max-w-sm",children:e.map(o=>l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm shadow-xl border-2 border-blue-500 p-4 animate-slide-in",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-3xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Pong Invitation"}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[l.jsx("span",{className:"font-bold",style:{color:ft(o.hostId,!0)},children:o.hostUsername})," ","invited you to play"," ",l.jsx("span",{className:"font-medium",children:r(o.gameMode)})]}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[o.playerCount," player(s)"]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:()=>t(o.inviteId),className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors font-medium",children:"Accept"}),l.jsx("button",{onClick:()=>n(o.inviteId),className:"flex-1 px-3 py-2 bg-gray-300 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200 text-sm rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600/80 transition-colors",children:"Decline"})]})]},o.inviteId))})}function Dw({authResponse:e,setPongInvitations:t}){const{payloadReceived:n}=jo();return v.useEffect(()=>{var o,s,a;if(!n||!e||(n.funcId==="create_pong_lobby"&&console.log("[PongInvitationHandler] Received:",JSON.stringify(n)),n.source_container!=="pong")||n.funcId!=="create_pong_lobby"||n.code!==0)return;console.log("[PongInvitationHandler] Processing lobby invitation:",n.payload);const r=(o=n.payload.players)==null?void 0:o.some(i=>(i.userId===e.user.id||i.id===e.user.id)&&i.isHost);if(console.log("[PongInvitationHandler] isHost check: myId=",e.user.id,"isHost=",r),!r){console.log("[PongInvitationHandler] We're invited! Creating notification...");const i=(s=n.payload.players)==null?void 0:s.find(c=>c.isHost),u={inviteId:n.payload.lobbyId||Date.now(),lobbyId:n.payload.lobbyId,hostId:(i==null?void 0:i.userId)||(i==null?void 0:i.id)||0,hostUsername:(i==null?void 0:i.username)||`User ${(i==null?void 0:i.userId)||(i==null?void 0:i.id)}`,gameMode:n.payload.gameMode,playerCount:((a=n.payload.players)==null?void 0:a.length)||0,timestamp:Date.now(),lobbyData:n.payload};console.log("[PongInvitationHandler] Adding invitation to state:",u),t(c=>[...c,u])}},[n,e,t]),null}function Ow({isOpen:e,onClose:t,settings:n,onUpdateSettings:r}){if(!e)return null;const o=s=>{r({...n,[s]:!n[s]})};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-labelledby":"accessibility-title","aria-modal":"true",onClick:t,children:l.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/95 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col border-2 border-gray-300 dark:border-gray-600",onClick:s=>s.stopPropagation(),children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-blue-500/90",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{id:"accessibility-title",className:"text-2xl font-bold text-white",children:" Accessibility Settings"}),l.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 transition-colors text-2xl","aria-label":"Close accessibility settings",children:""})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Customize the interface to meet your accessibility needs"}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"high-contrast",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"High Contrast Mode"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Increases contrast for better visibility"})]}),l.jsx("button",{id:"high-contrast",onClick:()=>o("highContrast"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.highContrast?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.highContrast,"aria-label":"Toggle high contrast mode",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.highContrast?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"large-text",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"Large Text"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Increases font size across the app"})]}),l.jsx("button",{id:"large-text",onClick:()=>o("largeText"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.largeText?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.largeText,"aria-label":"Toggle large text",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.largeText?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"reduced-motion",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"Reduced Motion"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Minimizes animations and transitions"})]}),l.jsx("button",{id:"reduced-motion",onClick:()=>o("reducedMotion"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.reducedMotion?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.reducedMotion,"aria-label":"Toggle reduced motion",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.reducedMotion?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"screen-reader",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"Screen Reader Mode"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Optimizes interface for screen readers"})]}),l.jsx("button",{id:"screen-reader",onClick:()=>o("screenReaderMode"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.screenReaderMode?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.screenReaderMode,"aria-label":"Toggle screen reader mode",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.screenReaderMode?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:" Keyboard Shortcuts"}),l.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Tab"})," - Navigate between elements"]}),l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Enter"})," - Activate buttons/links"]}),l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Esc"})," - Close modals/dialogs"]}),l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Ctrl + /"})," - Show command help"]})]})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50/40 dark:bg-gray-900/60 flex justify-end",children:l.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-500 text-white hover:bg-blue-600 transition-colors font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Done"})})]})})}function Rc(e,t,n=365){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};path=/;SameSite=Lax;expires=${r.toUTCString()}`}function Lw(e){const t=document.cookie.split("; ").find(n=>n.startsWith(e+"="));return t?decodeURIComponent(t.split("=")[1]):null}function Mw(){const[e,t]=v.useState(!1);v.useEffect(()=>{Lw("cookie_consent")||t(!0)},[]);const n=async()=>{Rc("cookie_consent","accepted"),t(!1)},r=async()=>{Rc("cookie_consent","rejected"),t(!1)};return e?l.jsxs("div",{style:{position:"fixed",bottom:12,left:12,right:12,background:"#111",color:"#fff",padding:12,borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:9999},children:[l.jsx("div",{style:{maxWidth:"70%"},children:"We use cookies to improve your experience. You may accept or reject non-essential cookies."}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:n,style:{background:"#28a745",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6},children:"Accept"}),l.jsx("button",{onClick:r,style:{background:"#6c757d",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6},children:"Reject"})]})]}):null}function Uw(){var K,Y;const[e,t]=v.useState(null),[n,r]=v.useState("chat"),[o,s]=v.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),[a,i]=v.useState(!1),[u,c]=v.useState([]),[m,f]=v.useState([]),[h,w]=v.useState(null),[y,_]=v.useState(!1),[b,p]=v.useState({highContrast:!1,largeText:!1,reducedMotion:!1,screenReaderMode:!1});v.useEffect(()=>{console.log("[AppRoot] pongInvitations updated:",m)},[m]);const d=()=>{const F=!o;s(F),F?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))};v.useEffect(()=>{const F=document.documentElement,X=document.body;if(b.highContrast?(F.classList.add("high-contrast"),console.log("[Accessibility] High contrast mode enabled")):F.classList.remove("high-contrast"),b.largeText?(F.style.fontSize="18px",X.style.fontSize="18px",console.log("[Accessibility] Large text mode enabled")):(F.style.fontSize="",X.style.fontSize=""),b.reducedMotion){F.classList.add("reduce-motion");const te=document.createElement("style");te.id="reduce-motion-override",te.textContent=`
        * {
          animation-play-state: paused !important;
          transition: none !important;
        }
      `,document.getElementById("reduce-motion-override")||document.head.appendChild(te),console.log("[Accessibility] Reduced motion mode enabled")}else{F.classList.remove("reduce-motion");const te=document.getElementById("reduce-motion-override");te&&te.remove()}b.screenReaderMode?(F.classList.add("screen-reader-mode"),console.log("[Accessibility] Screen reader mode enabled")):F.classList.remove("screen-reader-mode")},[b]);function g(F){if(t(F),F!=null&&F.user)try{localStorage.setItem("userData",JSON.stringify(F.user))}catch(X){console.warn("Could not persist user data:",X)}}v.useEffect(()=>{const F=async()=>{const te=localStorage.getItem("userData"),ve=te?JSON.parse(te):e==null?void 0:e.user;if(ve!=null&&ve.id&&(ve!=null&&ve.avatar))try{const Le=await fetch("/api/users/pfp",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`,"Content-Type":"application/json"},body:JSON.stringify({file:ve.avatar})});if(Le.ok){const q=await Le.text();xe(`data:image/png;base64,${q}`)}}catch(Le){console.warn("Failed to fetch user avatar:",Le)}};F();const X=()=>{F()};return window.addEventListener("storage",X),()=>{window.removeEventListener("storage",X)}},[(K=e==null?void 0:e.user)==null?void 0:K.id,(Y=e==null?void 0:e.user)==null?void 0:Y.avatarUrl]);const[x,I]=v.useState(!0),[z,j]=v.useState(!1),[k,M]=v.useState(!1),[E,A]=v.useState(!1),[J,xe]=v.useState(void 0);function Ue(F){var X,te;try{(X=F==null?void 0:F.tokens)!=null&&X.jwt&&localStorage.setItem("jwt",F.tokens.jwt),(te=F==null?void 0:F.tokens)!=null&&te.refresh&&localStorage.setItem("refreshToken",F.tokens.refresh)}catch(ve){console.warn("Could not persist tokens:",ve)}}v.useEffect(()=>{let F=!1;async function X(){if(I(!0),e){I(!1);return}const te=new URLSearchParams(window.location.search),ve=te.get("jwt"),Le=te.get("refresh");if(ve&&Le)try{localStorage.setItem("jwt",ve),localStorage.setItem("refreshToken",Le);const oe=await fetch("/public_api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:Le})});if(oe.ok){const ne=await oe.json();F||(Ue(ne),ne!=null&&ne.user&&localStorage.setItem("userData",JSON.stringify(ne.user)),t(ne)),window.history.replaceState({},document.title,window.location.pathname),I(!1);return}}catch(oe){console.warn("OAuth token validation failed:",oe)}const q=localStorage.getItem("refreshToken");try{if(q){const ne=await fetch("/public_api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:q})});if(ne.ok){const re=await ne.json();F||(Ue(re),re!=null&&re.user&&localStorage.setItem("userData",JSON.stringify(re.user)),t(re)),I(!1);return}else localStorage.removeItem("refreshToken")}const oe=await fetch("/public_api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(oe.ok){const ne=await oe.json();F||(Ue(ne),ne!=null&&ne.user&&localStorage.setItem("userData",JSON.stringify(ne.user)),t(ne)),I(!1);return}}catch(oe){console.warn("Auto-login failed:",oe)}F||I(!1)}return X(),()=>{F=!0}},[]),v.useEffect(()=>{const F=X=>{try{const te=X;(te==null?void 0:te.detail)==="gdpr"&&r("gdpr")}catch{}};return window.addEventListener("navigate",F),()=>window.removeEventListener("navigate",F)},[]);const[Ge,Oe]=v.useState(null),[rt,U]=v.useState(null),G=(F,X)=>{Oe(F),U(X),setTimeout(()=>{Oe(null),U(null)},5e3)};async function H(){j(!0);try{const F=await fetch("/public_api/auth/create/guest",{method:"GET"});if(!F.ok)throw new Error("Guest creation failed");const X=await F.json();Ue(X),t(X)}catch(F){G("Guest login failed: "+((F==null?void 0:F.message)||"unknown"),"error")}finally{j(!1)}}async function de(){var F;if(!k){M(!0);try{bg()}catch{}try{let X=!1;const te=localStorage.getItem("jwt");if((F=e==null?void 0:e.user)!=null&&F.id&&te)try{(await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.user.id})})).ok&&(X=!0)}catch{}localStorage.removeItem("jwt"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),sessionStorage.removeItem("jwt"),t(null),G(X?"Logged out successfully":"Logged out locally (server revoke may have failed)",X?"success":"error")}finally{M(!1)}}}return l.jsxs("div",{className:"min-h-screen bg-cover bg-center bg-fixed transition-colors duration-200",style:{backgroundImage:o?"url(/static/react_dist/bg_dark.png)":"url(/static/react_dist/bg_light.png)"},children:[l.jsx("a",{href:"#main-content",className:"skip-to-main",children:"Skip to main content"}),l.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",style:{backgroundColor:o?"rgba(0, 0, 0, 0.2)":"rgba(0, 0, 0, 0.05)"}}),l.jsxs("div",{className:"relative",children:[l.jsx(Mw,{}),Ge&&l.jsx("div",{className:`fixed top-6 right-6 z-50 px-4 py-2 rounded shadow-md ${rt==="success"?"bg-green-600":"bg-red-600"} text-white`,children:Ge}),e?l.jsx(Sw,{children:l.jsxs(_g,{AuthResponseObject:e,showToast:G,children:[l.jsx(Dw,{authResponse:e,setPongInvitations:f}),l.jsx($w,{invitations:m,onAccept:F=>{console.log("[AppRoot] Accepting invitation:",F);const X=m.find(te=>te.inviteId===F);X&&(w(X.lobbyId),X.lobbyData&&(window.__acceptedLobbyData=X.lobbyData)),f(te=>te.filter(ve=>ve.inviteId!==F)),r("pong")},onDecline:F=>{console.log("[AppRoot] Declining invitation:",F),f(X=>X.filter(te=>te.inviteId!==F))}}),l.jsxs("div",{className:"flex flex-col h-screen",children:[l.jsx("header",{className:"bg-gray-100/95 dark:bg-gray-800/90 border-b border-gray-200 dark:border-gray-700 shadow dark:shadow-dark-700 relative",children:l.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transcendence"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("nav",{className:"flex space-x-4",children:[l.jsx("button",{onClick:()=>r("chat"),className:`px-4 py-2 ${n==="chat"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:"Chat"}),l.jsx("button",{onClick:()=>r("pong"),className:`px-4 py-2 ${n==="pong"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:"Pong"})]}),l.jsx("button",{onClick:d,className:"p-2","aria-label":o?"Switch to light mode":"Switch to dark mode",children:o?l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),l.jsx("button",{onClick:()=>_(!0),className:"p-2","aria-label":"Open accessibility settings",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),l.jsx(Pw,{isLoading:!1}),l.jsx(Tw,{username:e.user.username,userId:e.user.id,avatarUrl:J,onLogout:de,isLoggingOut:k,onFriendsClick:()=>A(!0)})]})]})})}),l.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden flex justify-center relative",role:"main",style:{zIndex:1},children:l.jsx("div",{className:"w-full max-w-5xl px-4 py-6 flex flex-col",children:l.jsx("div",{className:"shadow dark:shadow-dark-700 h-full",children:l.jsx("div",{className:"glass-light-sm dark:glass-dark-sm border border-gray-200 dark:border-gray-700 h-full flex flex-col",children:n==="chat"?l.jsx("div",{className:"p-6 h-full flex flex-col",children:l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(Iw,{selfUserId:e.user.id,showToast:G,onOpenPongInvite:F=>{c(F),i(!0),r("pong")}})})}):n==="gdpr"?l.jsx("div",{className:"p-6 h-full flex flex-col",children:l.jsx(Ew,{showToast:G,onNavigateBack:()=>r("chat")})}):l.jsx("div",{className:"p-6 h-full flex",children:l.jsx(_w,{authResponse:e,darkMode:o,showInviteModal:a,inviteRoomUsers:u,onCloseInviteModal:()=>{i(!1),c([])},pongInvitations:m,setPongInvitations:f,acceptedLobbyId:h,onLobbyJoined:()=>w(null),onNavigateToChat:()=>r("chat")})})})})})}),E&&l.jsx(Rw,{isOpen:E,onClose:()=>A(!1)}),y&&l.jsx(Ow,{isOpen:y,onClose:()=>_(!1),settings:b,onUpdateSettings:p})]})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4",children:x?l.jsx("div",{children:"Restoring session"}):l.jsxs("div",{className:"max-w-4xl w-full space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to Transcendence"}),l.jsx("button",{onClick:d,className:"mt-4 p-2",children:o?l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]}),l.jsxs("div",{className:"mt-8 py-8 px-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx(Ig,{onLoginSuccess:g})}),l.jsx("div",{children:l.jsx(Cw,{whenCompletedSuccesfully:g})})]}),l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsx("button",{onClick:H,className:"bg-gray-100 dark:bg-gray-700/80 px-6 py-2 hover:bg-gray-200 dark:hover:bg-gray-600/80 transition-colors",children:"Continue as Guest"})})]})]})})]})]})}Ua.createRoot(document.getElementById("root")).render(l.jsx(xt.StrictMode,{children:l.jsx(Uw,{})}));
