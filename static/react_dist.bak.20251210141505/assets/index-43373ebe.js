var Tm=Object.defineProperty;var $m=(e,t,n)=>t in e?Tm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bo=(e,t,n)=>($m(e,typeof t!="symbol"?t+"":t,n),n);import{C as xe,E as Dm,S as Om,A as Lm,V as Kt,H as Um,D as Mm,a as Fm,b as Am,P as Zm,e as Wm,c as Vo,M as Ca,Q as Go,d as Bm,f as Vm}from"./babylon-dc316dc3.js";function Gm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Hm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gd={exports:{}},sa={},hd={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),Jm=Symbol.for("react.portal"),Qm=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),e0=Symbol.for("react.forward_ref"),t0=Symbol.for("react.suspense"),n0=Symbol.for("react.memo"),r0=Symbol.for("react.lazy"),Su=Symbol.iterator;function o0(e){return e===null||typeof e!="object"?null:(e=Su&&e[Su]||e["@@iterator"],typeof e=="function"?e:null)}var yd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vd=Object.assign,xd={};function Br(e,t,n){this.props=e,this.context=t,this.refs=xd,this.updater=n||yd}Br.prototype.isReactComponent={};Br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wd(){}wd.prototype=Br.prototype;function li(e,t,n){this.props=e,this.context=t,this.refs=xd,this.updater=n||yd}var ii=li.prototype=new wd;ii.constructor=li;vd(ii,Br.prototype);ii.isPureReactComponent=!0;var _u=Array.isArray,bd=Object.prototype.hasOwnProperty,ui={current:null},kd={key:!0,ref:!0,__self:!0,__source:!0};function Sd(e,t,n){var r,o={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)bd.call(t,r)&&!kd.hasOwnProperty(r)&&(o[r]=t[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return{$$typeof:Uo,type:e,key:s,ref:a,props:o,_owner:ui.current}}function s0(e,t){return{$$typeof:Uo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ci(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uo}function a0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Nu=/\/+/g;function Ea(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a0(""+e.key):t.toString(36)}function ys(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Uo:case Jm:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Ea(a,0):r,_u(o)?(n="",e!=null&&(n=e.replace(Nu,"$&/")+"/"),ys(o,t,n,"",function(c){return c})):o!=null&&(ci(o)&&(o=s0(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Nu,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",_u(e))for(var i=0;i<e.length;i++){s=e[i];var u=r+Ea(s,i);a+=ys(s,t,n,u,o)}else if(u=o0(e),typeof u=="function")for(e=u.call(e),i=0;!(s=e.next()).done;)s=s.value,u=r+Ea(s,i++),a+=ys(s,t,n,u,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ho(e,t,n){if(e==null)return e;var r=[],o=0;return ys(e,r,"","",function(s){return t.call(n,s,o++)}),r}function l0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},vs={transition:null},i0={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:vs,ReactCurrentOwner:ui};function _d(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Ho,forEach:function(e,t,n){Ho(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ho(e,function(){t++}),t},toArray:function(e){return Ho(e,function(t){return t})||[]},only:function(e){if(!ci(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Br;ce.Fragment=Qm;ce.Profiler=qm;ce.PureComponent=li;ce.StrictMode=Km;ce.Suspense=t0;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i0;ce.act=_d;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vd({},e.props),o=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=ui.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)bd.call(t,u)&&!kd.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:Uo,type:e.type,key:o,ref:s,props:r,_owner:a}};ce.createContext=function(e){return e={$$typeof:Xm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ym,_context:e},e.Consumer=e};ce.createElement=Sd;ce.createFactory=function(e){var t=Sd.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:e0,render:e}};ce.isValidElement=ci;ce.lazy=function(e){return{$$typeof:r0,_payload:{_status:-1,_result:e},_init:l0}};ce.memo=function(e,t){return{$$typeof:n0,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=vs.transition;vs.transition={};try{e()}finally{vs.transition=t}};ce.unstable_act=_d;ce.useCallback=function(e,t){return pt.current.useCallback(e,t)};ce.useContext=function(e){return pt.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};ce.useEffect=function(e,t){return pt.current.useEffect(e,t)};ce.useId=function(){return pt.current.useId()};ce.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return pt.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};ce.useRef=function(e){return pt.current.useRef(e)};ce.useState=function(e){return pt.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return pt.current.useTransition()};ce.version="18.3.1";hd.exports=ce;var g=hd.exports;const ht=Hm(g),u0=Gm({__proto__:null,default:ht},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0=g,d0=Symbol.for("react.element"),f0=Symbol.for("react.fragment"),p0=Object.prototype.hasOwnProperty,m0=c0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g0={key:!0,ref:!0,__self:!0,__source:!0};function Nd(e,t,n){var r,o={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)p0.call(t,r)&&!g0.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:d0,type:e,key:s,ref:a,props:o,_owner:m0.current}}sa.Fragment=f0;sa.jsx=Nd;sa.jsxs=Nd;gd.exports=sa;var l=gd.exports,al={},jd={exports:{}},jt={},Id={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,Q){var Y=L.length;L.push(Q);e:for(;0<Y;){var ge=Y-1>>>1,oe=L[ge];if(0<o(oe,Q))L[ge]=Q,L[Y]=oe,Y=ge;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],Y=L.pop();if(Y!==Q){L[0]=Y;e:for(var ge=0,oe=L.length,Xe=oe>>>1;ge<Xe;){var We=2*(ge+1)-1,M=L[We],re=We+1,le=L[re];if(0>o(M,Y))re<oe&&0>o(le,M)?(L[ge]=le,L[re]=Y,ge=re):(L[ge]=M,L[We]=Y,ge=We);else if(re<oe&&0>o(le,Y))L[ge]=le,L[re]=Y,ge=re;else break e}}return Q}function o(L,Q){var Y=L.sortIndex-Q.sortIndex;return Y!==0?Y:L.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],p=1,f=null,h=3,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(L){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=L)r(c),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(c)}}function v(L){if(w=!1,y(L),!x)if(n(u)!==null)x=!0,Ce(N);else{var Q=n(c);Q!==null&&me(v,Q.startTime-L)}}function N(L,Q){x=!1,w&&(w=!1,m(C),C=-1),b=!0;var Y=h;try{for(y(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||L&&!H());){var ge=f.callback;if(typeof ge=="function"){f.callback=null,h=f.priorityLevel;var oe=ge(f.expirationTime<=Q);Q=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(u)&&r(u),y(Q)}else r(u);f=n(u)}if(f!==null)var Xe=!0;else{var We=n(c);We!==null&&me(v,We.startTime-Q),Xe=!1}return Xe}finally{f=null,h=Y,b=!1}}var k=!1,I=null,C=-1,D=5,E=-1;function H(){return!(e.unstable_now()-E<D)}function G(){if(I!==null){var L=e.unstable_now();E=L;var Q=!0;try{Q=I(!0,L)}finally{Q?$():(k=!1,I=null)}}else k=!1}var $;if(typeof d=="function")$=function(){d(G)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ve=X.port2;X.port1.onmessage=G,$=function(){ve.postMessage(null)}}else $=function(){S(G,0)};function Ce(L){I=L,k||(k=!0,$())}function me(L,Q){C=S(function(){L(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){x||b||(x=!0,Ce(N))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var Y=h;h=Q;try{return L()}finally{h=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Y=h;h=L;try{return Q()}finally{h=Y}},e.unstable_scheduleCallback=function(L,Q,Y){var ge=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ge+Y:ge):Y=ge,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,L={id:p++,callback:Q,priorityLevel:L,startTime:Y,expirationTime:oe,sortIndex:-1},Y>ge?(L.sortIndex=Y,t(c,L),n(u)===null&&L===n(c)&&(w?(m(C),C=-1):w=!0,me(v,Y-ge))):(L.sortIndex=oe,t(u,L),x||b||(x=!0,Ce(N))),L},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(L){var Q=h;return function(){var Y=h;h=Q;try{return L.apply(this,arguments)}finally{h=Y}}}})(Cd);Id.exports=Cd;var h0=Id.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0=g,Nt=h0;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ed=new Set,xo={};function sr(e,t){$r(e,t),$r(e+"Capture",t)}function $r(e,t){for(xo[e]=t,e=0;e<t.length;e++)Ed.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ll=Object.prototype.hasOwnProperty,v0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ju={},Iu={};function x0(e){return ll.call(Iu,e)?!0:ll.call(ju,e)?!1:v0.test(e)?Iu[e]=!0:(ju[e]=!0,!1)}function w0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b0(e,t,n,r){if(t===null||typeof t>"u"||w0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,o,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nt[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nt[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nt[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nt[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nt[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nt[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var di=/[\-:]([a-z])/g;function fi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(di,fi);nt[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(di,fi);nt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(di,fi);nt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});nt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function pi(e,t,n,r){var o=nt.hasOwnProperty(t)?nt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b0(t,n,o,r)&&(n=null),r||o===null?x0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yn=y0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jo=Symbol.for("react.element"),pr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),mi=Symbol.for("react.strict_mode"),il=Symbol.for("react.profiler"),Pd=Symbol.for("react.provider"),Rd=Symbol.for("react.context"),gi=Symbol.for("react.forward_ref"),ul=Symbol.for("react.suspense"),cl=Symbol.for("react.suspense_list"),hi=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),zd=Symbol.for("react.offscreen"),Cu=Symbol.iterator;function Kr(e){return e===null||typeof e!="object"?null:(e=Cu&&e[Cu]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,Pa;function so(e){if(Pa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Pa=t&&t[1]||""}return`
`+Pa+e}var Ra=!1;function za(e,t){if(!e||Ra)return"";Ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),a=o.length-1,i=s.length-1;1<=a&&0<=i&&o[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==s[i]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{Ra=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?so(e):""}function k0(e){switch(e.tag){case 5:return so(e.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 2:case 15:return e=za(e.type,!1),e;case 11:return e=za(e.type.render,!1),e;case 1:return e=za(e.type,!0),e;default:return""}}function dl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case pr:return"Portal";case il:return"Profiler";case mi:return"StrictMode";case ul:return"Suspense";case cl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rd:return(e.displayName||"Context")+".Consumer";case Pd:return(e._context.displayName||"Context")+".Provider";case gi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hi:return t=e.displayName||null,t!==null?t:dl(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return dl(e(t))}catch{}}return null}function S0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dl(t);case 8:return t===mi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Td(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _0(e){var t=Td(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qo(e){e._valueTracker||(e._valueTracker=_0(e))}function $d(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Td(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fl(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Eu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dd(e,t){t=t.checked,t!=null&&pi(e,"checked",t,!1)}function pl(e,t){Dd(e,t);var n=On(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ml(e,t.type,n):t.hasOwnProperty("defaultValue")&&ml(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ml(e,t,n){(t!=="number"||Ps(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ao=Array.isArray;function Ir(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ru(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(ao(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function Od(e,t){var n=On(t.value),r=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ld(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ld(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ko,Ud=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ko.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N0=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(e){N0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uo[t]=uo[e]})});function Md(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||uo.hasOwnProperty(e)&&uo[e]?(""+t).trim():t+"px"}function Fd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Md(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var j0=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(e,t){if(t){if(j0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function vl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xl=null;function yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wl=null,Cr=null,Er=null;function Tu(e){if(e=Ao(e)){if(typeof wl!="function")throw Error(O(280));var t=e.stateNode;t&&(t=ca(t),wl(e.stateNode,e.type,t))}}function Ad(e){Cr?Er?Er.push(e):Er=[e]:Cr=e}function Zd(){if(Cr){var e=Cr,t=Er;if(Er=Cr=null,Tu(e),t)for(e=0;e<t.length;e++)Tu(t[e])}}function Wd(e,t){return e(t)}function Bd(){}var Ta=!1;function Vd(e,t,n){if(Ta)return e(t,n);Ta=!0;try{return Wd(e,t,n)}finally{Ta=!1,(Cr!==null||Er!==null)&&(Bd(),Zd())}}function bo(e,t){var n=e.stateNode;if(n===null)return null;var r=ca(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var bl=!1;if(fn)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){bl=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{bl=!1}function I0(e,t,n,r,o,s,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(p){this.onError(p)}}var co=!1,Rs=null,zs=!1,kl=null,C0={onError:function(e){co=!0,Rs=e}};function E0(e,t,n,r,o,s,a,i,u){co=!1,Rs=null,I0.apply(C0,arguments)}function P0(e,t,n,r,o,s,a,i,u){if(E0.apply(this,arguments),co){if(co){var c=Rs;co=!1,Rs=null}else throw Error(O(198));zs||(zs=!0,kl=c)}}function ar(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $u(e){if(ar(e)!==e)throw Error(O(188))}function R0(e){var t=e.alternate;if(!t){if(t=ar(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return $u(o),e;if(s===r)return $u(o),t;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=o,r=s;else{for(var a=!1,i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function Hd(e){return e=R0(e),e!==null?Jd(e):null}function Jd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jd(e);if(t!==null)return t;e=e.sibling}return null}var Qd=Nt.unstable_scheduleCallback,Du=Nt.unstable_cancelCallback,z0=Nt.unstable_shouldYield,T0=Nt.unstable_requestPaint,Ze=Nt.unstable_now,$0=Nt.unstable_getCurrentPriorityLevel,vi=Nt.unstable_ImmediatePriority,Kd=Nt.unstable_UserBlockingPriority,Ts=Nt.unstable_NormalPriority,D0=Nt.unstable_LowPriority,qd=Nt.unstable_IdlePriority,aa=null,en=null;function O0(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(aa,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:M0,L0=Math.log,U0=Math.LN2;function M0(e){return e>>>=0,e===0?32:31-(L0(e)/U0|0)|0}var qo=64,Yo=4194304;function lo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $s(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~o;i!==0?r=lo(i):(s&=a,s!==0&&(r=lo(s)))}else a=n&~o,a!==0?r=lo(a):s!==0&&(r=lo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),o=1<<n,r|=e[n],t&=~o;return r}function F0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Vt(s),i=1<<a,u=o[a];u===-1?(!(i&n)||i&r)&&(o[a]=F0(i,t)):u<=t&&(e.expiredLanes|=i),s&=~i}}function Sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yd(){var e=qo;return qo<<=1,!(qo&4194240)&&(qo=64),e}function $a(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function Z0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Vt(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function xi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ne=0;function Xd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ef,wi,tf,nf,rf,_l=!1,Xo=[],Cn=null,En=null,Pn=null,ko=new Map,So=new Map,Sn=[],W0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ou(e,t){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(t.pointerId)}}function Yr(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ao(t),t!==null&&wi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function B0(e,t,n,r,o){switch(t){case"focusin":return Cn=Yr(Cn,e,t,n,r,o),!0;case"dragenter":return En=Yr(En,e,t,n,r,o),!0;case"mouseover":return Pn=Yr(Pn,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return ko.set(s,Yr(ko.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,So.set(s,Yr(So.get(s)||null,e,t,n,r,o)),!0}return!1}function of(e){var t=Hn(e.target);if(t!==null){var n=ar(t);if(n!==null){if(t=n.tag,t===13){if(t=Gd(n),t!==null){e.blockedOn=t,rf(e.priority,function(){tf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xl=r,n.target.dispatchEvent(r),xl=null}else return t=Ao(n),t!==null&&wi(t),e.blockedOn=n,!1;t.shift()}return!0}function Lu(e,t,n){xs(e)&&n.delete(t)}function V0(){_l=!1,Cn!==null&&xs(Cn)&&(Cn=null),En!==null&&xs(En)&&(En=null),Pn!==null&&xs(Pn)&&(Pn=null),ko.forEach(Lu),So.forEach(Lu)}function Xr(e,t){e.blockedOn===t&&(e.blockedOn=null,_l||(_l=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,V0)))}function _o(e){function t(o){return Xr(o,e)}if(0<Xo.length){Xr(Xo[0],e);for(var n=1;n<Xo.length;n++){var r=Xo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Cn!==null&&Xr(Cn,e),En!==null&&Xr(En,e),Pn!==null&&Xr(Pn,e),ko.forEach(t),So.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)of(n),n.blockedOn===null&&Sn.shift()}var Pr=yn.ReactCurrentBatchConfig,Ds=!0;function G0(e,t,n,r){var o=Ne,s=Pr.transition;Pr.transition=null;try{Ne=1,bi(e,t,n,r)}finally{Ne=o,Pr.transition=s}}function H0(e,t,n,r){var o=Ne,s=Pr.transition;Pr.transition=null;try{Ne=4,bi(e,t,n,r)}finally{Ne=o,Pr.transition=s}}function bi(e,t,n,r){if(Ds){var o=Nl(e,t,n,r);if(o===null)Ba(e,t,r,Os,n),Ou(e,r);else if(B0(o,e,t,n,r))r.stopPropagation();else if(Ou(e,r),t&4&&-1<W0.indexOf(e)){for(;o!==null;){var s=Ao(o);if(s!==null&&ef(s),s=Nl(e,t,n,r),s===null&&Ba(e,t,r,Os,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Ba(e,t,r,null,n)}}var Os=null;function Nl(e,t,n,r){if(Os=null,e=yi(r),e=Hn(e),e!==null)if(t=ar(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Os=e,null}function sf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($0()){case vi:return 1;case Kd:return 4;case Ts:case D0:return 16;case qd:return 536870912;default:return 16}default:return 16}}var jn=null,ki=null,ws=null;function af(){if(ws)return ws;var e,t=ki,n=t.length,r,o="value"in jn?jn.value:jn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[s-r];r++);return ws=o.slice(e,1<r?1-r:void 0)}function bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function es(){return!0}function Uu(){return!1}function It(e){function t(n,r,o,s,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?es:Uu,this.isPropagationStopped=Uu,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=It(Vr),Fo=Me({},Vr,{view:0,detail:0}),J0=It(Fo),Da,Oa,eo,la=Me({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eo&&(eo&&e.type==="mousemove"?(Da=e.screenX-eo.screenX,Oa=e.screenY-eo.screenY):Oa=Da=0,eo=e),Da)},movementY:function(e){return"movementY"in e?e.movementY:Oa}}),Mu=It(la),Q0=Me({},la,{dataTransfer:0}),K0=It(Q0),q0=Me({},Fo,{relatedTarget:0}),La=It(q0),Y0=Me({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),X0=It(Y0),eg=Me({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tg=It(eg),ng=Me({},Vr,{data:0}),Fu=It(ng),rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ag(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sg[e])?!!t[e]:!1}function _i(){return ag}var lg=Me({},Fo,{key:function(e){if(e.key){var t=rg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?og[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(e){return e.type==="keypress"?bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ig=It(lg),ug=Me({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Au=It(ug),cg=Me({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),dg=It(cg),fg=Me({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=It(fg),mg=Me({},la,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gg=It(mg),hg=[9,13,27,32],Ni=fn&&"CompositionEvent"in window,fo=null;fn&&"documentMode"in document&&(fo=document.documentMode);var yg=fn&&"TextEvent"in window&&!fo,lf=fn&&(!Ni||fo&&8<fo&&11>=fo),Zu=String.fromCharCode(32),Wu=!1;function uf(e,t){switch(e){case"keyup":return hg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gr=!1;function vg(e,t){switch(e){case"compositionend":return cf(t);case"keypress":return t.which!==32?null:(Wu=!0,Zu);case"textInput":return e=t.data,e===Zu&&Wu?null:e;default:return null}}function xg(e,t){if(gr)return e==="compositionend"||!Ni&&uf(e,t)?(e=af(),ws=ki=jn=null,gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lf&&t.locale!=="ko"?null:t.data;default:return null}}var wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wg[e.type]:t==="textarea"}function df(e,t,n,r){Ad(r),t=Ls(t,"onChange"),0<t.length&&(n=new Si("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var po=null,No=null;function bg(e){kf(e,0)}function ia(e){var t=vr(e);if($d(t))return e}function kg(e,t){if(e==="change")return t}var ff=!1;if(fn){var Ua;if(fn){var Ma="oninput"in document;if(!Ma){var Vu=document.createElement("div");Vu.setAttribute("oninput","return;"),Ma=typeof Vu.oninput=="function"}Ua=Ma}else Ua=!1;ff=Ua&&(!document.documentMode||9<document.documentMode)}function Gu(){po&&(po.detachEvent("onpropertychange",pf),No=po=null)}function pf(e){if(e.propertyName==="value"&&ia(No)){var t=[];df(t,No,e,yi(e)),Vd(bg,t)}}function Sg(e,t,n){e==="focusin"?(Gu(),po=t,No=n,po.attachEvent("onpropertychange",pf)):e==="focusout"&&Gu()}function _g(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ia(No)}function Ng(e,t){if(e==="click")return ia(t)}function jg(e,t){if(e==="input"||e==="change")return ia(t)}function Ig(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Ig;function jo(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ll.call(t,o)||!Ht(e[o],t[o]))return!1}return!0}function Hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ju(e,t){var n=Hu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hu(n)}}function mf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gf(){for(var e=window,t=Ps();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ps(e.document)}return t}function ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Cg(e){var t=gf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mf(n.ownerDocument.documentElement,n)){if(r!==null&&ji(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=Ju(n,s);var a=Ju(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Eg=fn&&"documentMode"in document&&11>=document.documentMode,hr=null,jl=null,mo=null,Il=!1;function Qu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Il||hr==null||hr!==Ps(r)||(r=hr,"selectionStart"in r&&ji(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mo&&jo(mo,r)||(mo=r,r=Ls(jl,"onSelect"),0<r.length&&(t=new Si("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}function ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionend:ts("Transition","TransitionEnd")},Fa={},hf={};fn&&(hf=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function ua(e){if(Fa[e])return Fa[e];if(!yr[e])return e;var t=yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hf)return Fa[e]=t[n];return e}var yf=ua("animationend"),vf=ua("animationiteration"),xf=ua("animationstart"),wf=ua("transitionend"),bf=new Map,Ku="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){bf.set(e,t),sr(t,[e])}for(var Aa=0;Aa<Ku.length;Aa++){var Za=Ku[Aa],Pg=Za.toLowerCase(),Rg=Za[0].toUpperCase()+Za.slice(1);Fn(Pg,"on"+Rg)}Fn(yf,"onAnimationEnd");Fn(vf,"onAnimationIteration");Fn(xf,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(wf,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function qu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,P0(r,t,void 0,e),e.currentTarget=null}function kf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==s&&o.isPropagationStopped())break e;qu(o,i,c),s=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==s&&o.isPropagationStopped())break e;qu(o,i,c),s=u}}}if(zs)throw e=kl,zs=!1,kl=null,e}function Re(e,t){var n=t[zl];n===void 0&&(n=t[zl]=new Set);var r=e+"__bubble";n.has(r)||(Sf(t,e,2,!1),n.add(r))}function Wa(e,t,n){var r=0;t&&(r|=4),Sf(n,e,r,t)}var ns="_reactListening"+Math.random().toString(36).slice(2);function Io(e){if(!e[ns]){e[ns]=!0,Ed.forEach(function(n){n!=="selectionchange"&&(zg.has(n)||Wa(n,!1,e),Wa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ns]||(t[ns]=!0,Wa("selectionchange",!1,t))}}function Sf(e,t,n,r){switch(sf(t)){case 1:var o=G0;break;case 4:o=H0;break;default:o=bi}n=o.bind(null,t,n,e),o=void 0,!bl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ba(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;i!==null;){if(a=Hn(i),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}i=i.parentNode}}r=r.return}Vd(function(){var c=s,p=yi(n),f=[];e:{var h=bf.get(e);if(h!==void 0){var b=Si,x=e;switch(e){case"keypress":if(bs(n)===0)break e;case"keydown":case"keyup":b=ig;break;case"focusin":x="focus",b=La;break;case"focusout":x="blur",b=La;break;case"beforeblur":case"afterblur":b=La;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=K0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=dg;break;case yf:case vf:case xf:b=X0;break;case wf:b=pg;break;case"scroll":b=J0;break;case"wheel":b=gg;break;case"copy":case"cut":case"paste":b=tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Au}var w=(t&4)!==0,S=!w&&e==="scroll",m=w?h!==null?h+"Capture":null:h;w=[];for(var d=c,y;d!==null;){y=d;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,m!==null&&(v=bo(d,m),v!=null&&w.push(Co(d,v,y)))),S)break;d=d.return}0<w.length&&(h=new b(h,x,null,n,p),f.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",h&&n!==xl&&(x=n.relatedTarget||n.fromElement)&&(Hn(x)||x[pn]))break e;if((b||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,b?(x=n.relatedTarget||n.toElement,b=c,x=x?Hn(x):null,x!==null&&(S=ar(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(b=null,x=c),b!==x)){if(w=Mu,v="onMouseLeave",m="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(w=Au,v="onPointerLeave",m="onPointerEnter",d="pointer"),S=b==null?h:vr(b),y=x==null?h:vr(x),h=new w(v,d+"leave",b,n,p),h.target=S,h.relatedTarget=y,v=null,Hn(p)===c&&(w=new w(m,d+"enter",x,n,p),w.target=y,w.relatedTarget=S,v=w),S=v,b&&x)t:{for(w=b,m=x,d=0,y=w;y;y=dr(y))d++;for(y=0,v=m;v;v=dr(v))y++;for(;0<d-y;)w=dr(w),d--;for(;0<y-d;)m=dr(m),y--;for(;d--;){if(w===m||m!==null&&w===m.alternate)break t;w=dr(w),m=dr(m)}w=null}else w=null;b!==null&&Yu(f,h,b,w,!1),x!==null&&S!==null&&Yu(f,S,x,w,!0)}}e:{if(h=c?vr(c):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var N=kg;else if(Bu(h))if(ff)N=jg;else{N=_g;var k=Sg}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Ng);if(N&&(N=N(e,c))){df(f,N,n,p);break e}k&&k(e,h,c),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&ml(h,"number",h.value)}switch(k=c?vr(c):window,e){case"focusin":(Bu(k)||k.contentEditable==="true")&&(hr=k,jl=c,mo=null);break;case"focusout":mo=jl=hr=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,Qu(f,n,p);break;case"selectionchange":if(Eg)break;case"keydown":case"keyup":Qu(f,n,p)}var I;if(Ni)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else gr?uf(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(lf&&n.locale!=="ko"&&(gr||C!=="onCompositionStart"?C==="onCompositionEnd"&&gr&&(I=af()):(jn=p,ki="value"in jn?jn.value:jn.textContent,gr=!0)),k=Ls(c,C),0<k.length&&(C=new Fu(C,e,null,n,p),f.push({event:C,listeners:k}),I?C.data=I:(I=cf(n),I!==null&&(C.data=I)))),(I=yg?vg(e,n):xg(e,n))&&(c=Ls(c,"onBeforeInput"),0<c.length&&(p=new Fu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:c}),p.data=I))}kf(f,t)})}function Co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ls(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=bo(e,n),s!=null&&r.unshift(Co(e,s,o)),s=bo(e,t),s!=null&&r.push(Co(e,s,o))),e=e.return}return r}function dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yu(e,t,n,r,o){for(var s=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,o?(u=bo(n,s),u!=null&&a.unshift(Co(n,u,i))):o||(u=bo(n,s),u!=null&&a.push(Co(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Tg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function Xu(e){return(typeof e=="string"?e:""+e).replace(Tg,`
`).replace($g,"")}function rs(e,t,n){if(t=Xu(t),Xu(e)!==t&&n)throw Error(O(425))}function Us(){}var Cl=null,El=null;function Pl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rl=typeof setTimeout=="function"?setTimeout:void 0,Dg=typeof clearTimeout=="function"?clearTimeout:void 0,ec=typeof Promise=="function"?Promise:void 0,Og=typeof queueMicrotask=="function"?queueMicrotask:typeof ec<"u"?function(e){return ec.resolve(null).then(e).catch(Lg)}:Rl;function Lg(e){setTimeout(function(){throw e})}function Va(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),_o(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);_o(t)}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Gr,Eo="__reactProps$"+Gr,pn="__reactContainer$"+Gr,zl="__reactEvents$"+Gr,Ug="__reactListeners$"+Gr,Mg="__reactHandles$"+Gr;function Hn(e){var t=e[Xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[Xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tc(e);e!==null;){if(n=e[Xt])return n;e=tc(e)}return t}e=n,n=e.parentNode}return null}function Ao(e){return e=e[Xt]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function ca(e){return e[Eo]||null}var Tl=[],xr=-1;function An(e){return{current:e}}function ze(e){0>xr||(e.current=Tl[xr],Tl[xr]=null,xr--)}function Ee(e,t){xr++,Tl[xr]=e.current,e.current=t}var Ln={},lt=An(Ln),vt=An(!1),er=Ln;function Dr(e,t){var n=e.type.contextTypes;if(!n)return Ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function xt(e){return e=e.childContextTypes,e!=null}function Ms(){ze(vt),ze(lt)}function nc(e,t,n){if(lt.current!==Ln)throw Error(O(168));Ee(lt,t),Ee(vt,n)}function _f(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(O(108,S0(e)||"Unknown",o));return Me({},n,r)}function Fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ln,er=lt.current,Ee(lt,e),Ee(vt,vt.current),!0}function rc(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=_f(e,t,er),r.__reactInternalMemoizedMergedChildContext=e,ze(vt),ze(lt),Ee(lt,e)):ze(vt),Ee(vt,n)}var an=null,da=!1,Ga=!1;function Nf(e){an===null?an=[e]:an.push(e)}function Fg(e){da=!0,Nf(e)}function Zn(){if(!Ga&&an!==null){Ga=!0;var e=0,t=Ne;try{var n=an;for(Ne=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}an=null,da=!1}catch(o){throw an!==null&&(an=an.slice(e+1)),Qd(vi,Zn),o}finally{Ne=t,Ga=!1}}return null}var wr=[],br=0,As=null,Zs=0,zt=[],Tt=0,tr=null,ln=1,un="";function Vn(e,t){wr[br++]=Zs,wr[br++]=As,As=e,Zs=t}function jf(e,t,n){zt[Tt++]=ln,zt[Tt++]=un,zt[Tt++]=tr,tr=e;var r=ln;e=un;var o=32-Vt(r)-1;r&=~(1<<o),n+=1;var s=32-Vt(t)+o;if(30<s){var a=o-o%5;s=(r&(1<<a)-1).toString(32),r>>=a,o-=a,ln=1<<32-Vt(t)+o|n<<o|r,un=s+e}else ln=1<<s|n<<o|r,un=e}function Ii(e){e.return!==null&&(Vn(e,1),jf(e,1,0))}function Ci(e){for(;e===As;)As=wr[--br],wr[br]=null,Zs=wr[--br],wr[br]=null;for(;e===tr;)tr=zt[--Tt],zt[Tt]=null,un=zt[--Tt],zt[Tt]=null,ln=zt[--Tt],zt[Tt]=null}var _t=null,St=null,$e=!1,Bt=null;function If(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function oc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,St=Rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tr!==null?{id:ln,overflow:un}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_t=e,St=null,!0):!1;default:return!1}}function $l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dl(e){if($e){var t=St;if(t){var n=t;if(!oc(e,t)){if($l(e))throw Error(O(418));t=Rn(n.nextSibling);var r=_t;t&&oc(e,t)?If(r,n):(e.flags=e.flags&-4097|2,$e=!1,_t=e)}}else{if($l(e))throw Error(O(418));e.flags=e.flags&-4097|2,$e=!1,_t=e}}}function sc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function os(e){if(e!==_t)return!1;if(!$e)return sc(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pl(e.type,e.memoizedProps)),t&&(t=St)){if($l(e))throw Cf(),Error(O(418));for(;t;)If(e,t),t=Rn(t.nextSibling)}if(sc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){St=Rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}St=null}}else St=_t?Rn(e.stateNode.nextSibling):null;return!0}function Cf(){for(var e=St;e;)e=Rn(e.nextSibling)}function Or(){St=_t=null,$e=!1}function Ei(e){Bt===null?Bt=[e]:Bt.push(e)}var Ag=yn.ReactCurrentBatchConfig;function to(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var i=o.refs;a===null?delete i[s]:i[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function ss(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ac(e){var t=e._init;return t(e._payload)}function Ef(e){function t(m,d){if(e){var y=m.deletions;y===null?(m.deletions=[d],m.flags|=16):y.push(d)}}function n(m,d){if(!e)return null;for(;d!==null;)t(m,d),d=d.sibling;return null}function r(m,d){for(m=new Map;d!==null;)d.key!==null?m.set(d.key,d):m.set(d.index,d),d=d.sibling;return m}function o(m,d){return m=Dn(m,d),m.index=0,m.sibling=null,m}function s(m,d,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<d?(m.flags|=2,d):y):(m.flags|=2,d)):(m.flags|=1048576,d)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function i(m,d,y,v){return d===null||d.tag!==6?(d=Xa(y,m.mode,v),d.return=m,d):(d=o(d,y),d.return=m,d)}function u(m,d,y,v){var N=y.type;return N===mr?p(m,d,y.props.children,v,y.key):d!==null&&(d.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===bn&&ac(N)===d.type)?(v=o(d,y.props),v.ref=to(m,d,y),v.return=m,v):(v=Cs(y.type,y.key,y.props,null,m.mode,v),v.ref=to(m,d,y),v.return=m,v)}function c(m,d,y,v){return d===null||d.tag!==4||d.stateNode.containerInfo!==y.containerInfo||d.stateNode.implementation!==y.implementation?(d=el(y,m.mode,v),d.return=m,d):(d=o(d,y.children||[]),d.return=m,d)}function p(m,d,y,v,N){return d===null||d.tag!==7?(d=Xn(y,m.mode,v,N),d.return=m,d):(d=o(d,y),d.return=m,d)}function f(m,d,y){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Xa(""+d,m.mode,y),d.return=m,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Jo:return y=Cs(d.type,d.key,d.props,null,m.mode,y),y.ref=to(m,null,d),y.return=m,y;case pr:return d=el(d,m.mode,y),d.return=m,d;case bn:var v=d._init;return f(m,v(d._payload),y)}if(ao(d)||Kr(d))return d=Xn(d,m.mode,y,null),d.return=m,d;ss(m,d)}return null}function h(m,d,y,v){var N=d!==null?d.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:i(m,d,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jo:return y.key===N?u(m,d,y,v):null;case pr:return y.key===N?c(m,d,y,v):null;case bn:return N=y._init,h(m,d,N(y._payload),v)}if(ao(y)||Kr(y))return N!==null?null:p(m,d,y,v,null);ss(m,y)}return null}function b(m,d,y,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(y)||null,i(d,m,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jo:return m=m.get(v.key===null?y:v.key)||null,u(d,m,v,N);case pr:return m=m.get(v.key===null?y:v.key)||null,c(d,m,v,N);case bn:var k=v._init;return b(m,d,y,k(v._payload),N)}if(ao(v)||Kr(v))return m=m.get(y)||null,p(d,m,v,N,null);ss(d,v)}return null}function x(m,d,y,v){for(var N=null,k=null,I=d,C=d=0,D=null;I!==null&&C<y.length;C++){I.index>C?(D=I,I=null):D=I.sibling;var E=h(m,I,y[C],v);if(E===null){I===null&&(I=D);break}e&&I&&E.alternate===null&&t(m,I),d=s(E,d,C),k===null?N=E:k.sibling=E,k=E,I=D}if(C===y.length)return n(m,I),$e&&Vn(m,C),N;if(I===null){for(;C<y.length;C++)I=f(m,y[C],v),I!==null&&(d=s(I,d,C),k===null?N=I:k.sibling=I,k=I);return $e&&Vn(m,C),N}for(I=r(m,I);C<y.length;C++)D=b(I,m,C,y[C],v),D!==null&&(e&&D.alternate!==null&&I.delete(D.key===null?C:D.key),d=s(D,d,C),k===null?N=D:k.sibling=D,k=D);return e&&I.forEach(function(H){return t(m,H)}),$e&&Vn(m,C),N}function w(m,d,y,v){var N=Kr(y);if(typeof N!="function")throw Error(O(150));if(y=N.call(y),y==null)throw Error(O(151));for(var k=N=null,I=d,C=d=0,D=null,E=y.next();I!==null&&!E.done;C++,E=y.next()){I.index>C?(D=I,I=null):D=I.sibling;var H=h(m,I,E.value,v);if(H===null){I===null&&(I=D);break}e&&I&&H.alternate===null&&t(m,I),d=s(H,d,C),k===null?N=H:k.sibling=H,k=H,I=D}if(E.done)return n(m,I),$e&&Vn(m,C),N;if(I===null){for(;!E.done;C++,E=y.next())E=f(m,E.value,v),E!==null&&(d=s(E,d,C),k===null?N=E:k.sibling=E,k=E);return $e&&Vn(m,C),N}for(I=r(m,I);!E.done;C++,E=y.next())E=b(I,m,C,E.value,v),E!==null&&(e&&E.alternate!==null&&I.delete(E.key===null?C:E.key),d=s(E,d,C),k===null?N=E:k.sibling=E,k=E);return e&&I.forEach(function(G){return t(m,G)}),$e&&Vn(m,C),N}function S(m,d,y,v){if(typeof y=="object"&&y!==null&&y.type===mr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Jo:e:{for(var N=y.key,k=d;k!==null;){if(k.key===N){if(N=y.type,N===mr){if(k.tag===7){n(m,k.sibling),d=o(k,y.props.children),d.return=m,m=d;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===bn&&ac(N)===k.type){n(m,k.sibling),d=o(k,y.props),d.ref=to(m,k,y),d.return=m,m=d;break e}n(m,k);break}else t(m,k);k=k.sibling}y.type===mr?(d=Xn(y.props.children,m.mode,v,y.key),d.return=m,m=d):(v=Cs(y.type,y.key,y.props,null,m.mode,v),v.ref=to(m,d,y),v.return=m,m=v)}return a(m);case pr:e:{for(k=y.key;d!==null;){if(d.key===k)if(d.tag===4&&d.stateNode.containerInfo===y.containerInfo&&d.stateNode.implementation===y.implementation){n(m,d.sibling),d=o(d,y.children||[]),d.return=m,m=d;break e}else{n(m,d);break}else t(m,d);d=d.sibling}d=el(y,m.mode,v),d.return=m,m=d}return a(m);case bn:return k=y._init,S(m,d,k(y._payload),v)}if(ao(y))return x(m,d,y,v);if(Kr(y))return w(m,d,y,v);ss(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,d!==null&&d.tag===6?(n(m,d.sibling),d=o(d,y),d.return=m,m=d):(n(m,d),d=Xa(y,m.mode,v),d.return=m,m=d),a(m)):n(m,d)}return S}var Lr=Ef(!0),Pf=Ef(!1),Ws=An(null),Bs=null,kr=null,Pi=null;function Ri(){Pi=kr=Bs=null}function zi(e){var t=Ws.current;ze(Ws),e._currentValue=t}function Ol(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rr(e,t){Bs=e,Pi=kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(Pi!==e)if(e={context:e,memoizedValue:t,next:null},kr===null){if(Bs===null)throw Error(O(308));kr=e,Bs.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Jn=null;function Ti(e){Jn===null?Jn=[e]:Jn.push(e)}function Rf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ti(t)):(n.next=o.next,o.next=n),t.interleaved=n,mn(e,r)}function mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function $i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,mn(e,n)}return o=r.interleaved,o===null?(t.next=t,Ti(r)):(t.next=o.next,o.next=t),r.interleaved=t,mn(e,n)}function ks(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xi(e,n)}}function lc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var o=e.updateQueue;kn=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==a&&(i===null?p.firstBaseUpdate=c:i.next=c,p.lastBaseUpdate=u))}if(s!==null){var f=o.baseState;a=0,p=c=u=null,i=s;do{var h=i.lane,b=i.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:b,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var x=e,w=i;switch(h=t,b=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){f=x.call(b,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,h=typeof x=="function"?x.call(b,f,h):x,h==null)break e;f=Me({},f,h);break e;case 2:kn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[i]:h.push(i))}else b={eventTime:b,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(c=p=b,u=f):p=p.next=b,a|=h;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;h=i,i=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(p===null&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);rr|=a,e.lanes=a,e.memoizedState=f}}function ic(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(O(191,o));o.call(r)}}}var Zo={},tn=An(Zo),Po=An(Zo),Ro=An(Zo);function Qn(e){if(e===Zo)throw Error(O(174));return e}function Di(e,t){switch(Ee(Ro,t),Ee(Po,e),Ee(tn,Zo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hl(t,e)}ze(tn),Ee(tn,t)}function Ur(){ze(tn),ze(Po),ze(Ro)}function Tf(e){Qn(Ro.current);var t=Qn(tn.current),n=hl(t,e.type);t!==n&&(Ee(Po,e),Ee(tn,n))}function Oi(e){Po.current===e&&(ze(tn),ze(Po))}var Le=An(0);function Gs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ha=[];function Li(){for(var e=0;e<Ha.length;e++)Ha[e]._workInProgressVersionPrimary=null;Ha.length=0}var Ss=yn.ReactCurrentDispatcher,Ja=yn.ReactCurrentBatchConfig,nr=0,Ue=null,Qe=null,qe=null,Hs=!1,go=!1,zo=0,Zg=0;function rt(){throw Error(O(321))}function Ui(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function Mi(e,t,n,r,o,s){if(nr=s,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ss.current=e===null||e.memoizedState===null?Gg:Hg,e=n(r,o),go){s=0;do{if(go=!1,zo=0,25<=s)throw Error(O(301));s+=1,qe=Qe=null,t.updateQueue=null,Ss.current=Jg,e=n(r,o)}while(go)}if(Ss.current=Js,t=Qe!==null&&Qe.next!==null,nr=0,qe=Qe=Ue=null,Hs=!1,t)throw Error(O(300));return e}function Fi(){var e=zo!==0;return zo=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ue.memoizedState=qe=e:qe=qe.next=e,qe}function Ut(){if(Qe===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=qe===null?Ue.memoizedState:qe.next;if(t!==null)qe=t,Qe=e;else{if(e===null)throw Error(O(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},qe===null?Ue.memoizedState=qe=e:qe=qe.next=e}return qe}function To(e,t){return typeof t=="function"?t(e):t}function Qa(e){var t=Ut(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=Qe,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var i=a=null,u=null,c=s;do{var p=c.lane;if((nr&p)===p)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=f,a=r):u=u.next=f,Ue.lanes|=p,rr|=p}c=c.next}while(c!==null&&c!==s);u===null?a=r:u.next=i,Ht(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Ue.lanes|=s,rr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ka(e){var t=Ut(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do s=e(s,a.action),a=a.next;while(a!==o);Ht(s,t.memoizedState)||(yt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function $f(){}function Df(e,t){var n=Ue,r=Ut(),o=t(),s=!Ht(r.memoizedState,o);if(s&&(r.memoizedState=o,yt=!0),r=r.queue,Ai(Uf.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,$o(9,Lf.bind(null,n,r,o,t),void 0,null),Ye===null)throw Error(O(349));nr&30||Of(n,t,o)}return o}function Of(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lf(e,t,n,r){t.value=n,t.getSnapshot=r,Mf(t)&&Ff(e)}function Uf(e,t,n){return n(function(){Mf(t)&&Ff(e)})}function Mf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function Ff(e){var t=mn(e,1);t!==null&&Gt(t,e,1,-1)}function uc(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=Vg.bind(null,Ue,e),[t.memoizedState,e]}function $o(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Af(){return Ut().memoizedState}function _s(e,t,n,r){var o=Yt();Ue.flags|=e,o.memoizedState=$o(1|t,n,void 0,r===void 0?null:r)}function fa(e,t,n,r){var o=Ut();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var a=Qe.memoizedState;if(s=a.destroy,r!==null&&Ui(r,a.deps)){o.memoizedState=$o(t,n,s,r);return}}Ue.flags|=e,o.memoizedState=$o(1|t,n,s,r)}function cc(e,t){return _s(8390656,8,e,t)}function Ai(e,t){return fa(2048,8,e,t)}function Zf(e,t){return fa(4,2,e,t)}function Wf(e,t){return fa(4,4,e,t)}function Bf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vf(e,t,n){return n=n!=null?n.concat([e]):null,fa(4,4,Bf.bind(null,t,e),n)}function Zi(){}function Gf(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ui(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hf(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ui(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jf(e,t,n){return nr&21?(Ht(n,t)||(n=Yd(),Ue.lanes|=n,rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function Wg(e,t){var n=Ne;Ne=n!==0&&4>n?n:4,e(!0);var r=Ja.transition;Ja.transition={};try{e(!1),t()}finally{Ne=n,Ja.transition=r}}function Qf(){return Ut().memoizedState}function Bg(e,t,n){var r=$n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kf(e))qf(t,n);else if(n=Rf(e,t,n,r),n!==null){var o=ft();Gt(n,e,r,o),Yf(n,t,r)}}function Vg(e,t,n){var r=$n(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kf(e))qf(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,i=s(a,n);if(o.hasEagerState=!0,o.eagerState=i,Ht(i,a)){var u=t.interleaved;u===null?(o.next=o,Ti(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=Rf(e,t,o,r),n!==null&&(o=ft(),Gt(n,e,r,o),Yf(n,t,r))}}function Kf(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function qf(e,t){go=Hs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xi(e,n)}}var Js={readContext:Lt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Gg={readContext:Lt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:cc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_s(4194308,4,Bf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _s(4194308,4,e,t)},useInsertionEffect:function(e,t){return _s(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Bg.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:uc,useDebugValue:Zi,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=uc(!1),t=e[0];return e=Wg.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,o=Yt();if($e){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),Ye===null)throw Error(O(349));nr&30||Of(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,cc(Uf.bind(null,r,s,e),[e]),r.flags|=2048,$o(9,Lf.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Yt(),t=Ye.identifierPrefix;if($e){var n=un,r=ln;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Hg={readContext:Lt,useCallback:Gf,useContext:Lt,useEffect:Ai,useImperativeHandle:Vf,useInsertionEffect:Zf,useLayoutEffect:Wf,useMemo:Hf,useReducer:Qa,useRef:Af,useState:function(){return Qa(To)},useDebugValue:Zi,useDeferredValue:function(e){var t=Ut();return Jf(t,Qe.memoizedState,e)},useTransition:function(){var e=Qa(To)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:$f,useSyncExternalStore:Df,useId:Qf,unstable_isNewReconciler:!1},Jg={readContext:Lt,useCallback:Gf,useContext:Lt,useEffect:Ai,useImperativeHandle:Vf,useInsertionEffect:Zf,useLayoutEffect:Wf,useMemo:Hf,useReducer:Ka,useRef:Af,useState:function(){return Ka(To)},useDebugValue:Zi,useDeferredValue:function(e){var t=Ut();return Qe===null?t.memoizedState=e:Jf(t,Qe.memoizedState,e)},useTransition:function(){var e=Ka(To)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:$f,useSyncExternalStore:Df,useId:Qf,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ll(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pa={isMounted:function(e){return(e=e._reactInternals)?ar(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ft(),o=$n(e),s=cn(r,o);s.payload=t,n!=null&&(s.callback=n),t=zn(e,s,o),t!==null&&(Gt(t,e,o,r),ks(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ft(),o=$n(e),s=cn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=zn(e,s,o),t!==null&&(Gt(t,e,o,r),ks(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ft(),r=$n(e),o=cn(n,r);o.tag=2,t!=null&&(o.callback=t),t=zn(e,o,r),t!==null&&(Gt(t,e,r,n),ks(t,e,r))}};function dc(e,t,n,r,o,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!jo(n,r)||!jo(o,s):!0}function Xf(e,t,n){var r=!1,o=Ln,s=t.contextType;return typeof s=="object"&&s!==null?s=Lt(s):(o=xt(t)?er:lt.current,r=t.contextTypes,s=(r=r!=null)?Dr(e,o):Ln),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function fc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function Ul(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},$i(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Lt(s):(s=xt(t)?er:lt.current,o.context=Dr(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ll(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&pa.enqueueReplaceState(o,o.state,null),Vs(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Mr(e,t){try{var n="",r=t;do n+=k0(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function qa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qg=typeof WeakMap=="function"?WeakMap:Map;function ep(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Ql=r),Ml(e,t)},n}function tp(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ml(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ml(e,t),typeof r!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function pc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qg;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=uh.bind(null,e,t,n),t.then(e,e))}function mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,zn(n,t,1))),n.lanes|=1),e)}var Kg=yn.ReactCurrentOwner,yt=!1;function ct(e,t,n,r){t.child=e===null?Pf(t,null,n,r):Lr(t,e.child,n,r)}function hc(e,t,n,r,o){n=n.render;var s=t.ref;return Rr(t,o),r=Mi(e,t,n,r,s,o),n=Fi(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,gn(e,t,o)):($e&&n&&Ii(t),t.flags|=1,ct(e,t,r,o),t.child)}function yc(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Ki(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,np(e,t,s,r,o)):(e=Cs(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:jo,n(a,r)&&e.ref===t.ref)return gn(e,t,o)}return t.flags|=1,e=Dn(s,r),e.ref=t.ref,e.return=t,t.child=e}function np(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(jo(s,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,gn(e,t,o)}return Fl(e,t,n,r,o)}function rp(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(_r,kt),kt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(_r,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(_r,kt),kt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ee(_r,kt),kt|=r;return ct(e,t,o,n),t.child}function op(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fl(e,t,n,r,o){var s=xt(n)?er:lt.current;return s=Dr(t,s),Rr(t,o),n=Mi(e,t,n,r,s,o),r=Fi(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,gn(e,t,o)):($e&&r&&Ii(t),t.flags|=1,ct(e,t,n,o),t.child)}function vc(e,t,n,r,o){if(xt(n)){var s=!0;Fs(t)}else s=!1;if(Rr(t,o),t.stateNode===null)Ns(e,t),Xf(t,n,r),Ul(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Lt(c):(c=xt(n)?er:lt.current,c=Dr(t,c));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&fc(t,a,r,c),kn=!1;var h=t.memoizedState;a.state=h,Vs(t,r,a,o),u=t.memoizedState,i!==r||h!==u||vt.current||kn?(typeof p=="function"&&(Ll(t,n,p,r),u=t.memoizedState),(i=kn||dc(t,n,i,r,h,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zf(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:Zt(t.type,i),a.props=c,f=t.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Lt(u):(u=xt(n)?er:lt.current,u=Dr(t,u));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==u)&&fc(t,a,r,u),kn=!1,h=t.memoizedState,a.state=h,Vs(t,r,a,o);var x=t.memoizedState;i!==f||h!==x||vt.current||kn?(typeof b=="function"&&(Ll(t,n,b,r),x=t.memoizedState),(c=kn||dc(t,n,c,r,h,x,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,s,o)}function Al(e,t,n,r,o,s){op(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&rc(t,n,!1),gn(e,t,s);r=t.stateNode,Kg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Lr(t,e.child,null,s),t.child=Lr(t,null,i,s)):ct(e,t,i,s),t.memoizedState=r.state,o&&rc(t,n,!0),t.child}function sp(e){var t=e.stateNode;t.pendingContext?nc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nc(e,t.context,!1),Di(e,t.containerInfo)}function xc(e,t,n,r,o){return Or(),Ei(o),t.flags|=256,ct(e,t,n,r),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function Wl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ap(e,t,n){var r=t.pendingProps,o=Le.current,s=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(o&2)!==0),i?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ee(Le,o&1),e===null)return Dl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ha(a,r,0,null),e=Xn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Wl(n),t.memoizedState=Zl,e):Wi(t,a));if(o=e.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return qg(e,t,a,r,i,o,n);if(s){s=r.fallback,a=t.mode,o=e.child,i=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Dn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),i!==null?s=Dn(i,s):(s=Xn(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Wl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Zl,r}return s=e.child,e=s.sibling,r=Dn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Wi(e,t){return t=ha({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function as(e,t,n,r){return r!==null&&Ei(r),Lr(t,e.child,null,n),e=Wi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qg(e,t,n,r,o,s,a){if(n)return t.flags&256?(t.flags&=-257,r=qa(Error(O(422))),as(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ha({mode:"visible",children:r.children},o,0,null),s=Xn(s,o,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Lr(t,e.child,null,a),t.child.memoizedState=Wl(a),t.memoizedState=Zl,s);if(!(t.mode&1))return as(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var i=r.dgst;return r=i,s=Error(O(419)),r=qa(s,r,void 0),as(e,t,a,r)}if(i=(a&e.childLanes)!==0,yt||i){if(r=Ye,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,mn(e,o),Gt(r,e,o,-1))}return Qi(),r=qa(Error(O(421))),as(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=ch.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,St=Rn(o.nextSibling),_t=t,$e=!0,Bt=null,e!==null&&(zt[Tt++]=ln,zt[Tt++]=un,zt[Tt++]=tr,ln=e.id,un=e.overflow,tr=t),t=Wi(t,r.children),t.flags|=4096,t)}function wc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ol(e.return,t,n)}function Ya(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function lp(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(ct(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,n,t);else if(e.tag===19)wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee(Le,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Gs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ya(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Gs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ya(t,!0,n,null,s);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ns(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=Dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yg(e,t,n){switch(t.tag){case 3:sp(t),Or();break;case 5:Tf(t);break;case 1:xt(t.type)&&Fs(t);break;case 4:Di(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ee(Ws,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?ap(e,t,n):(Ee(Le,Le.current&1),e=gn(e,t,n),e!==null?e.sibling:null);Ee(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return lp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ee(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,rp(e,t,n)}return gn(e,t,n)}var ip,Bl,up,cp;ip=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bl=function(){};up=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qn(tn.current);var s=null;switch(n){case"input":o=fl(e,o),r=fl(e,r),s=[];break;case"select":o=Me({},o,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":o=gl(e,o),r=gl(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Us)}yl(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var i=o[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(i=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Re("scroll",e),s||i===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};cp=function(e,t,n,r){n!==r&&(t.flags|=4)};function no(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xg(e,t,n){var r=t.pendingProps;switch(Ci(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return xt(t.type)&&Ms(),ot(t),null;case 3:return r=t.stateNode,Ur(),ze(vt),ze(lt),Li(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(os(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(Yl(Bt),Bt=null))),Bl(e,t),ot(t),null;case 5:Oi(t);var o=Qn(Ro.current);if(n=t.type,e!==null&&t.stateNode!=null)up(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return ot(t),null}if(e=Qn(tn.current),os(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xt]=t,r[Eo]=s,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(o=0;o<io.length;o++)Re(io[o],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Eu(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":Ru(r,s),Re("invalid",r)}yl(n,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?r.textContent!==i&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,i,e),o=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,i,e),o=["children",""+i]):xo.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":Qo(r),Pu(r,s,!0);break;case"textarea":Qo(r),zu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Us)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ld(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xt]=t,e[Eo]=r,ip(e,t,!1,!1),t.stateNode=e;e:{switch(a=vl(n,r),n){case"dialog":Re("cancel",e),Re("close",e),o=r;break;case"iframe":case"object":case"embed":Re("load",e),o=r;break;case"video":case"audio":for(o=0;o<io.length;o++)Re(io[o],e);o=r;break;case"source":Re("error",e),o=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),o=r;break;case"details":Re("toggle",e),o=r;break;case"input":Eu(e,r),o=fl(e,r),Re("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Me({},r,{value:void 0}),Re("invalid",e);break;case"textarea":Ru(e,r),o=gl(e,r),Re("invalid",e);break;default:o=r}yl(n,o),i=o;for(s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="style"?Fd(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ud(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wo(e,u):typeof u=="number"&&wo(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Re("scroll",e):u!=null&&pi(e,s,u,a))}switch(n){case"input":Qo(e),Pu(e,r,!1);break;case"textarea":Qo(e),zu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+On(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ir(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ir(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Us)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)cp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=Qn(Ro.current),Qn(tn.current),os(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xt]=t,(s=r.nodeValue!==n)&&(e=_t,e!==null))switch(e.tag){case 3:rs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=t,t.stateNode=r}return ot(t),null;case 13:if(ze(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&St!==null&&t.mode&1&&!(t.flags&128))Cf(),Or(),t.flags|=98560,s=!1;else if(s=os(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(O(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Xt]=t}else Or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),s=!1}else Bt!==null&&(Yl(Bt),Bt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Ke===0&&(Ke=3):Qi())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return Ur(),Bl(e,t),e===null&&Io(t.stateNode.containerInfo),ot(t),null;case 10:return zi(t.type._context),ot(t),null;case 17:return xt(t.type)&&Ms(),ot(t),null;case 19:if(ze(Le),s=t.memoizedState,s===null)return ot(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)no(s,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Gs(e),a!==null){for(t.flags|=128,no(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(Le,Le.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ze()>Fr&&(t.flags|=128,r=!0,no(s,!1),t.lanes=4194304)}else{if(!r)if(e=Gs(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),no(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!$e)return ot(t),null}else 2*Ze()-s.renderingStartTime>Fr&&n!==1073741824&&(t.flags|=128,r=!0,no(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=Le.current,Ee(Le,r?n&1|2:n&1),t):(ot(t),null);case 22:case 23:return Ji(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function eh(e,t){switch(Ci(t),t.tag){case 1:return xt(t.type)&&Ms(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ur(),ze(vt),ze(lt),Li(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oi(t),null;case 13:if(ze(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));Or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Le),null;case 4:return Ur(),null;case 10:return zi(t.type._context),null;case 22:case 23:return Ji(),null;case 24:return null;default:return null}}var ls=!1,at=!1,th=typeof WeakSet=="function"?WeakSet:Set,B=null;function Sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Vl(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var bc=!1;function nh(e,t){if(Cl=Ds,e=gf(),ji(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,p=0,f=e,h=null;t:for(;;){for(var b;f!==n||o!==0&&f.nodeType!==3||(i=a+o),f!==s||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(b=f.firstChild)!==null;)h=f,f=b;for(;;){if(f===e)break t;if(h===n&&++c===o&&(i=a),h===s&&++p===r&&(u=a),(b=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=b}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(El={focusedElem:e,selectionRange:n},Ds=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,S=x.memoizedState,m=t.stateNode,d=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:Zt(t.type,w),S);m.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(v){Ae(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return x=bc,bc=!1,x}function ho(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Vl(t,n,s)}o=o.next}while(o!==r)}}function ma(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Gl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dp(e){var t=e.alternate;t!==null&&(e.alternate=null,dp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[Eo],delete t[zl],delete t[Ug],delete t[Mg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fp(e){return e.tag===5||e.tag===3||e.tag===4}function kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Us));else if(r!==4&&(e=e.child,e!==null))for(Hl(e,t,n),e=e.sibling;e!==null;)Hl(e,t,n),e=e.sibling}function Jl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Jl(e,t,n),e=e.sibling;e!==null;)Jl(e,t,n),e=e.sibling}var et=null,Wt=!1;function wn(e,t,n){for(n=n.child;n!==null;)pp(e,t,n),n=n.sibling}function pp(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(aa,n)}catch{}switch(n.tag){case 5:at||Sr(n,t);case 6:var r=et,o=Wt;et=null,wn(e,t,n),et=r,Wt=o,et!==null&&(Wt?(e=et,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(Wt?(e=et,n=n.stateNode,e.nodeType===8?Va(e.parentNode,n):e.nodeType===1&&Va(e,n),_o(e)):Va(et,n.stateNode));break;case 4:r=et,o=Wt,et=n.stateNode.containerInfo,Wt=!0,wn(e,t,n),et=r,Wt=o;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Vl(n,t,a),o=o.next}while(o!==r)}wn(e,t,n);break;case 1:if(!at&&(Sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,wn(e,t,n),at=r):wn(e,t,n);break;default:wn(e,t,n)}}function Sc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new th),t.forEach(function(r){var o=dh.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function At(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:et=i.stateNode,Wt=!1;break e;case 3:et=i.stateNode.containerInfo,Wt=!0;break e;case 4:et=i.stateNode.containerInfo,Wt=!0;break e}i=i.return}if(et===null)throw Error(O(160));pp(s,a,o),et=null,Wt=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){Ae(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mp(t,e),t=t.sibling}function mp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),qt(e),r&4){try{ho(3,e,e.return),ma(3,e)}catch(w){Ae(e,e.return,w)}try{ho(5,e,e.return)}catch(w){Ae(e,e.return,w)}}break;case 1:At(t,e),qt(e),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(At(t,e),qt(e),r&512&&n!==null&&Sr(n,n.return),e.flags&32){var o=e.stateNode;try{wo(o,"")}catch(w){Ae(e,e.return,w)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&Dd(o,s),vl(i,a);var c=vl(i,s);for(a=0;a<u.length;a+=2){var p=u[a],f=u[a+1];p==="style"?Fd(o,f):p==="dangerouslySetInnerHTML"?Ud(o,f):p==="children"?wo(o,f):pi(o,p,f,c)}switch(i){case"input":pl(o,s);break;case"textarea":Od(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Ir(o,!!s.multiple,b,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ir(o,!!s.multiple,s.defaultValue,!0):Ir(o,!!s.multiple,s.multiple?[]:"",!1))}o[Eo]=s}catch(w){Ae(e,e.return,w)}}break;case 6:if(At(t,e),qt(e),r&4){if(e.stateNode===null)throw Error(O(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(w){Ae(e,e.return,w)}}break;case 3:if(At(t,e),qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(t.containerInfo)}catch(w){Ae(e,e.return,w)}break;case 4:At(t,e),qt(e);break;case 13:At(t,e),qt(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Gi=Ze())),r&4&&Sc(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(at=(c=at)||p,At(t,e),at=c):At(t,e),qt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&e.mode&1)for(B=e,p=e.child;p!==null;){for(f=B=p;B!==null;){switch(h=B,b=h.child,h.tag){case 0:case 11:case 14:case 15:ho(4,h,h.return);break;case 1:Sr(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){Ae(r,n,w)}}break;case 5:Sr(h,h.return);break;case 22:if(h.memoizedState!==null){Nc(f);continue}}b!==null?(b.return=h,B=b):Nc(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{o=f.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=Md("display",a))}catch(w){Ae(e,e.return,w)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Ae(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:At(t,e),qt(e),r&4&&Sc(e);break;case 21:break;default:At(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fp(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(wo(o,""),r.flags&=-33);var s=kc(e);Jl(e,s,o);break;case 3:case 4:var a=r.stateNode.containerInfo,i=kc(e);Hl(e,i,a);break;default:throw Error(O(161))}}catch(u){Ae(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rh(e,t,n){B=e,gp(e)}function gp(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var o=B,s=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||ls;if(!a){var i=o.alternate,u=i!==null&&i.memoizedState!==null||at;i=ls;var c=at;if(ls=a,(at=u)&&!c)for(B=o;B!==null;)a=B,u=a.child,a.tag===22&&a.memoizedState!==null?jc(o):u!==null?(u.return=a,B=u):jc(o);for(;s!==null;)B=s,gp(s),s=s.sibling;B=o,ls=i,at=c}_c(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,B=s):_c(e)}}function _c(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:at||ma(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!at)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Zt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ic(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ic(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&_o(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}at||t.flags&512&&Gl(t)}catch(h){Ae(t,t.return,h)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Nc(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function jc(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ma(4,t)}catch(u){Ae(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Ae(t,o,u)}}var s=t.return;try{Gl(t)}catch(u){Ae(t,s,u)}break;case 5:var a=t.return;try{Gl(t)}catch(u){Ae(t,a,u)}}}catch(u){Ae(t,t.return,u)}if(t===e){B=null;break}var i=t.sibling;if(i!==null){i.return=t.return,B=i;break}B=t.return}}var oh=Math.ceil,Qs=yn.ReactCurrentDispatcher,Bi=yn.ReactCurrentOwner,Ot=yn.ReactCurrentBatchConfig,we=0,Ye=null,Ge=null,tt=0,kt=0,_r=An(0),Ke=0,Do=null,rr=0,ga=0,Vi=0,yo=null,gt=null,Gi=0,Fr=1/0,on=null,Ks=!1,Ql=null,Tn=null,is=!1,In=null,qs=0,vo=0,Kl=null,js=-1,Is=0;function ft(){return we&6?Ze():js!==-1?js:js=Ze()}function $n(e){return e.mode&1?we&2&&tt!==0?tt&-tt:Ag.transition!==null?(Is===0&&(Is=Yd()),Is):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:sf(e.type)),e):1}function Gt(e,t,n,r){if(50<vo)throw vo=0,Kl=null,Error(O(185));Mo(e,n,r),(!(we&2)||e!==Ye)&&(e===Ye&&(!(we&2)&&(ga|=n),Ke===4&&_n(e,tt)),wt(e,r),n===1&&we===0&&!(t.mode&1)&&(Fr=Ze()+500,da&&Zn()))}function wt(e,t){var n=e.callbackNode;A0(e,t);var r=$s(e,e===Ye?tt:0);if(r===0)n!==null&&Du(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Du(n),t===1)e.tag===0?Fg(Ic.bind(null,e)):Nf(Ic.bind(null,e)),Og(function(){!(we&6)&&Zn()}),n=null;else{switch(Xd(r)){case 1:n=vi;break;case 4:n=Kd;break;case 16:n=Ts;break;case 536870912:n=qd;break;default:n=Ts}n=Sp(n,hp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hp(e,t){if(js=-1,Is=0,we&6)throw Error(O(327));var n=e.callbackNode;if(zr()&&e.callbackNode!==n)return null;var r=$s(e,e===Ye?tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ys(e,r);else{t=r;var o=we;we|=2;var s=vp();(Ye!==e||tt!==t)&&(on=null,Fr=Ze()+500,Yn(e,t));do try{lh();break}catch(i){yp(e,i)}while(1);Ri(),Qs.current=s,we=o,Ge!==null?t=0:(Ye=null,tt=0,t=Ke)}if(t!==0){if(t===2&&(o=Sl(e),o!==0&&(r=o,t=ql(e,o))),t===1)throw n=Do,Yn(e,0),_n(e,r),wt(e,Ze()),n;if(t===6)_n(e,r);else{if(o=e.current.alternate,!(r&30)&&!sh(o)&&(t=Ys(e,r),t===2&&(s=Sl(e),s!==0&&(r=s,t=ql(e,s))),t===1))throw n=Do,Yn(e,0),_n(e,r),wt(e,Ze()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:Gn(e,gt,on);break;case 3:if(_n(e,r),(r&130023424)===r&&(t=Gi+500-Ze(),10<t)){if($s(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){ft(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Rl(Gn.bind(null,e,gt,on),t);break}Gn(e,gt,on);break;case 4:if(_n(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-Vt(r);s=1<<a,a=t[a],a>o&&(o=a),r&=~s}if(r=o,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oh(r/1960))-r,10<r){e.timeoutHandle=Rl(Gn.bind(null,e,gt,on),r);break}Gn(e,gt,on);break;case 5:Gn(e,gt,on);break;default:throw Error(O(329))}}}return wt(e,Ze()),e.callbackNode===n?hp.bind(null,e):null}function ql(e,t){var n=yo;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=Ys(e,t),e!==2&&(t=gt,gt=n,t!==null&&Yl(t)),e}function Yl(e){gt===null?gt=e:gt.push.apply(gt,e)}function sh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Ht(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _n(e,t){for(t&=~Vi,t&=~ga,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function Ic(e){if(we&6)throw Error(O(327));zr();var t=$s(e,0);if(!(t&1))return wt(e,Ze()),null;var n=Ys(e,t);if(e.tag!==0&&n===2){var r=Sl(e);r!==0&&(t=r,n=ql(e,r))}if(n===1)throw n=Do,Yn(e,0),_n(e,t),wt(e,Ze()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,gt,on),wt(e,Ze()),null}function Hi(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(Fr=Ze()+500,da&&Zn())}}function or(e){In!==null&&In.tag===0&&!(we&6)&&zr();var t=we;we|=1;var n=Ot.transition,r=Ne;try{if(Ot.transition=null,Ne=1,e)return e()}finally{Ne=r,Ot.transition=n,we=t,!(we&6)&&Zn()}}function Ji(){kt=_r.current,ze(_r)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Dg(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Ci(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ms();break;case 3:Ur(),ze(vt),ze(lt),Li();break;case 5:Oi(r);break;case 4:Ur();break;case 13:ze(Le);break;case 19:ze(Le);break;case 10:zi(r.type._context);break;case 22:case 23:Ji()}n=n.return}if(Ye=e,Ge=e=Dn(e.current,null),tt=kt=t,Ke=0,Do=null,Vi=ga=rr=0,gt=yo=null,Jn!==null){for(t=0;t<Jn.length;t++)if(n=Jn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=o,r.next=a}n.pending=r}Jn=null}return e}function yp(e,t){do{var n=Ge;try{if(Ri(),Ss.current=Js,Hs){for(var r=Ue.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Hs=!1}if(nr=0,qe=Qe=Ue=null,go=!1,zo=0,Bi.current=null,n===null||n.return===null){Ke=1,Do=t,Ge=null;break}e:{var s=e,a=n.return,i=n,u=t;if(t=tt,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,p=i,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=mc(a);if(b!==null){b.flags&=-257,gc(b,a,i,s,t),b.mode&1&&pc(s,c,t),t=b,u=c;var x=t.updateQueue;if(x===null){var w=new Set;w.add(u),t.updateQueue=w}else x.add(u);break e}else{if(!(t&1)){pc(s,c,t),Qi();break e}u=Error(O(426))}}else if($e&&i.mode&1){var S=mc(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),gc(S,a,i,s,t),Ei(Mr(u,i));break e}}s=u=Mr(u,i),Ke!==4&&(Ke=2),yo===null?yo=[s]:yo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=ep(s,u,t);lc(s,m);break e;case 1:i=u;var d=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof d.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Tn===null||!Tn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=tp(s,i,t);lc(s,v);break e}}s=s.return}while(s!==null)}wp(n)}catch(N){t=N,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(1)}function vp(){var e=Qs.current;return Qs.current=Js,e===null?Js:e}function Qi(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ye===null||!(rr&268435455)&&!(ga&268435455)||_n(Ye,tt)}function Ys(e,t){var n=we;we|=2;var r=vp();(Ye!==e||tt!==t)&&(on=null,Yn(e,t));do try{ah();break}catch(o){yp(e,o)}while(1);if(Ri(),we=n,Qs.current=r,Ge!==null)throw Error(O(261));return Ye=null,tt=0,Ke}function ah(){for(;Ge!==null;)xp(Ge)}function lh(){for(;Ge!==null&&!z0();)xp(Ge)}function xp(e){var t=kp(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?wp(e):Ge=t,Bi.current=null}function wp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eh(n,t),n!==null){n.flags&=32767,Ge=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Ge=null;return}}else if(n=Xg(n,t,kt),n!==null){Ge=n;return}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);Ke===0&&(Ke=5)}function Gn(e,t,n){var r=Ne,o=Ot.transition;try{Ot.transition=null,Ne=1,ih(e,t,n,r)}finally{Ot.transition=o,Ne=r}return null}function ih(e,t,n,r){do zr();while(In!==null);if(we&6)throw Error(O(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z0(e,s),e===Ye&&(Ge=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||is||(is=!0,Sp(Ts,function(){return zr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ot.transition,Ot.transition=null;var a=Ne;Ne=1;var i=we;we|=4,Bi.current=null,nh(e,n),mp(n,e),Cg(El),Ds=!!Cl,El=Cl=null,e.current=n,rh(n),T0(),we=i,Ne=a,Ot.transition=s}else e.current=n;if(is&&(is=!1,In=e,qs=o),s=e.pendingLanes,s===0&&(Tn=null),O0(n.stateNode),wt(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ks)throw Ks=!1,e=Ql,Ql=null,e;return qs&1&&e.tag!==0&&zr(),s=e.pendingLanes,s&1?e===Kl?vo++:(vo=0,Kl=e):vo=0,Zn(),null}function zr(){if(In!==null){var e=Xd(qs),t=Ot.transition,n=Ne;try{if(Ot.transition=null,Ne=16>e?16:e,In===null)var r=!1;else{if(e=In,In=null,qs=0,we&6)throw Error(O(331));var o=we;for(we|=4,B=e.current;B!==null;){var s=B,a=s.child;if(B.flags&16){var i=s.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(B=c;B!==null;){var p=B;switch(p.tag){case 0:case 11:case 15:ho(8,p,s)}var f=p.child;if(f!==null)f.return=p,B=f;else for(;B!==null;){p=B;var h=p.sibling,b=p.return;if(dp(p),p===c){B=null;break}if(h!==null){h.return=b,B=h;break}B=b}}}var x=s.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}B=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,B=a;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ho(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,B=m;break e}B=s.return}}var d=e.current;for(B=d;B!==null;){a=B;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,B=y;else e:for(a=d;B!==null;){if(i=B,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:ma(9,i)}}catch(N){Ae(i,i.return,N)}if(i===a){B=null;break e}var v=i.sibling;if(v!==null){v.return=i.return,B=v;break e}B=i.return}}if(we=o,Zn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(aa,e)}catch{}r=!0}return r}finally{Ne=n,Ot.transition=t}}return!1}function Cc(e,t,n){t=Mr(n,t),t=ep(e,t,1),e=zn(e,t,1),t=ft(),e!==null&&(Mo(e,1,t),wt(e,t))}function Ae(e,t,n){if(e.tag===3)Cc(e,e,n);else for(;t!==null;){if(t.tag===3){Cc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tn===null||!Tn.has(r))){e=Mr(n,e),e=tp(t,e,1),t=zn(t,e,1),e=ft(),t!==null&&(Mo(t,1,e),wt(t,e));break}}t=t.return}}function uh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(tt&n)===n&&(Ke===4||Ke===3&&(tt&130023424)===tt&&500>Ze()-Gi?Yn(e,0):Vi|=n),wt(e,t)}function bp(e,t){t===0&&(e.mode&1?(t=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):t=1);var n=ft();e=mn(e,t),e!==null&&(Mo(e,t,n),wt(e,n))}function ch(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bp(e,n)}function dh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),bp(e,n)}var kp;kp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,Yg(e,t,n);yt=!!(e.flags&131072)}else yt=!1,$e&&t.flags&1048576&&jf(t,Zs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ns(e,t),e=t.pendingProps;var o=Dr(t,lt.current);Rr(t,n),o=Mi(null,t,r,e,o,n);var s=Fi();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(s=!0,Fs(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,$i(t),o.updater=pa,t.stateNode=o,o._reactInternals=t,Ul(t,r,e,n),t=Al(null,t,r,!0,s,n)):(t.tag=0,$e&&s&&Ii(t),ct(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ns(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=ph(r),e=Zt(r,e),o){case 0:t=Fl(null,t,r,e,n);break e;case 1:t=vc(null,t,r,e,n);break e;case 11:t=hc(null,t,r,e,n);break e;case 14:t=yc(null,t,r,Zt(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),Fl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),vc(e,t,r,o,n);case 3:e:{if(sp(t),e===null)throw Error(O(387));r=t.pendingProps,s=t.memoizedState,o=s.element,zf(e,t),Vs(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Mr(Error(O(423)),t),t=xc(e,t,r,n,o);break e}else if(r!==o){o=Mr(Error(O(424)),t),t=xc(e,t,r,n,o);break e}else for(St=Rn(t.stateNode.containerInfo.firstChild),_t=t,$e=!0,Bt=null,n=Pf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===o){t=gn(e,t,n);break e}ct(e,t,r,n)}t=t.child}return t;case 5:return Tf(t),e===null&&Dl(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,a=o.children,Pl(r,o)?a=null:s!==null&&Pl(r,s)&&(t.flags|=32),op(e,t),ct(e,t,a,n),t.child;case 6:return e===null&&Dl(t),null;case 13:return ap(e,t,n);case 4:return Di(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Lr(t,null,r,n):ct(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),hc(e,t,r,o,n);case 7:return ct(e,t,t.pendingProps,n),t.child;case 8:return ct(e,t,t.pendingProps.children,n),t.child;case 12:return ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Ee(Ws,r._currentValue),r._currentValue=a,s!==null)if(Ht(s.value,a)){if(s.children===o.children&&!vt.current){t=gn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=cn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ol(s.return,n,t),i.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(O(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ol(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ct(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Rr(t,n),o=Lt(o),r=r(o),t.flags|=1,ct(e,t,r,n),t.child;case 14:return r=t.type,o=Zt(r,t.pendingProps),o=Zt(r.type,o),yc(e,t,r,o,n);case 15:return np(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Zt(r,o),Ns(e,t),t.tag=1,xt(r)?(e=!0,Fs(t)):e=!1,Rr(t,n),Xf(t,r,o),Ul(t,r,o,n),Al(null,t,r,!0,e,n);case 19:return lp(e,t,n);case 22:return rp(e,t,n)}throw Error(O(156,t.tag))};function Sp(e,t){return Qd(e,t)}function fh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,r){return new fh(e,t,n,r)}function Ki(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ph(e){if(typeof e=="function")return Ki(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gi)return 11;if(e===hi)return 14}return 2}function Dn(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cs(e,t,n,r,o,s){var a=2;if(r=e,typeof e=="function")Ki(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case mr:return Xn(n.children,o,s,t);case mi:a=8,o|=8;break;case il:return e=Dt(12,n,t,o|2),e.elementType=il,e.lanes=s,e;case ul:return e=Dt(13,n,t,o),e.elementType=ul,e.lanes=s,e;case cl:return e=Dt(19,n,t,o),e.elementType=cl,e.lanes=s,e;case zd:return ha(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pd:a=10;break e;case Rd:a=9;break e;case gi:a=11;break e;case hi:a=14;break e;case bn:a=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=Dt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Xn(e,t,n,r){return e=Dt(7,e,r,t),e.lanes=n,e}function ha(e,t,n,r){return e=Dt(22,e,r,t),e.elementType=zd,e.lanes=n,e.stateNode={isHidden:!1},e}function Xa(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function el(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mh(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$a(0),this.expirationTimes=$a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function qi(e,t,n,r,o,s,a,i,u){return e=new mh(e,t,n,i,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Dt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$i(s),e}function gh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function _p(e){if(!e)return Ln;e=e._reactInternals;e:{if(ar(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(xt(n))return _f(e,n,t)}return t}function Np(e,t,n,r,o,s,a,i,u){return e=qi(n,r,!0,e,o,s,a,i,u),e.context=_p(null),n=e.current,r=ft(),o=$n(n),s=cn(r,o),s.callback=t??null,zn(n,s,o),e.current.lanes=o,Mo(e,o,r),wt(e,r),e}function ya(e,t,n,r){var o=t.current,s=ft(),a=$n(o);return n=_p(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zn(o,t,a),e!==null&&(Gt(e,o,a,s),ks(e,o,a)),a}function Xs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ec(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yi(e,t){Ec(e,t),(e=e.alternate)&&Ec(e,t)}function hh(){return null}var jp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xi(e){this._internalRoot=e}va.prototype.render=Xi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));ya(e,t,null,null)};va.prototype.unmount=Xi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){ya(null,e,null,null)}),t[pn]=null}};function va(e){this._internalRoot=e}va.prototype.unstable_scheduleHydration=function(e){if(e){var t=nf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&of(e)}};function eu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pc(){}function yh(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Xs(a);s.call(c)}}var a=Np(t,r,e,0,null,!1,!1,"",Pc);return e._reactRootContainer=a,e[pn]=a.current,Io(e.nodeType===8?e.parentNode:e),or(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var i=r;r=function(){var c=Xs(u);i.call(c)}}var u=qi(e,0,!1,null,null,!1,!1,"",Pc);return e._reactRootContainer=u,e[pn]=u.current,Io(e.nodeType===8?e.parentNode:e),or(function(){ya(t,u,n,r)}),u}function wa(e,t,n,r,o){var s=n._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var i=o;o=function(){var u=Xs(a);i.call(u)}}ya(t,a,e,o)}else a=yh(n,t,e,o,r);return Xs(a)}ef=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=lo(t.pendingLanes);n!==0&&(xi(t,n|1),wt(t,Ze()),!(we&6)&&(Fr=Ze()+500,Zn()))}break;case 13:or(function(){var r=mn(e,1);if(r!==null){var o=ft();Gt(r,e,1,o)}}),Yi(e,1)}};wi=function(e){if(e.tag===13){var t=mn(e,134217728);if(t!==null){var n=ft();Gt(t,e,134217728,n)}Yi(e,134217728)}};tf=function(e){if(e.tag===13){var t=$n(e),n=mn(e,t);if(n!==null){var r=ft();Gt(n,e,t,r)}Yi(e,t)}};nf=function(){return Ne};rf=function(e,t){var n=Ne;try{return Ne=e,t()}finally{Ne=n}};wl=function(e,t,n){switch(t){case"input":if(pl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ca(r);if(!o)throw Error(O(90));$d(r),pl(r,o)}}}break;case"textarea":Od(e,n);break;case"select":t=n.value,t!=null&&Ir(e,!!n.multiple,t,!1)}};Wd=Hi;Bd=or;var vh={usingClientEntryPoint:!1,Events:[Ao,vr,ca,Ad,Zd,Hi]},ro={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xh={bundleType:ro.bundleType,version:ro.version,rendererPackageName:ro.rendererPackageName,rendererConfig:ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hd(e),e===null?null:e.stateNode},findFiberByHostInstance:ro.findFiberByHostInstance||hh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!us.isDisabled&&us.supportsFiber)try{aa=us.inject(xh),en=us}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vh;jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eu(t))throw Error(O(200));return gh(e,t,null,n)};jt.createRoot=function(e,t){if(!eu(e))throw Error(O(299));var n=!1,r="",o=jp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=qi(e,1,!1,null,null,n,!1,r,o),e[pn]=t.current,Io(e.nodeType===8?e.parentNode:e),new Xi(t)};jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=Hd(t),e=e===null?null:e.stateNode,e};jt.flushSync=function(e){return or(e)};jt.hydrate=function(e,t,n){if(!xa(t))throw Error(O(200));return wa(null,e,t,!0,n)};jt.hydrateRoot=function(e,t,n){if(!eu(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",a=jp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Np(t,null,e,1,n??null,o,!1,s,a),e[pn]=t.current,Io(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new va(t)};jt.render=function(e,t,n){if(!xa(t))throw Error(O(200));return wa(null,e,t,!1,n)};jt.unmountComponentAtNode=function(e){if(!xa(e))throw Error(O(40));return e._reactRootContainer?(or(function(){wa(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};jt.unstable_batchedUpdates=Hi;jt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xa(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return wa(e,t,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function Ip(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ip)}catch(e){console.error(e)}}Ip(),jd.exports=jt;var Cp=jd.exports,Rc=Cp;al.createRoot=Rc.createRoot,al.hydrateRoot=Rc.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oo.apply(this,arguments)}var Kn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Kn||(Kn={}));const zc="popstate";function wh(e){e===void 0&&(e={});function t(r,o){let{pathname:s,search:a,hash:i}=r.location;return Xl("",{pathname:s,search:a,hash:i},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Ep(o)}return Sh(t,n,null,e)}function nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kh(){return Math.random().toString(36).substr(2,8)}function Tc(e,t){return{usr:e.state,key:e.key,idx:t}}function Xl(e,t,n,r){return n===void 0&&(n=null),Oo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ba(t):t,{state:n,key:t&&t.key||r||kh()})}function Ep(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ba(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Sh(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,a=o.history,i=Kn.Pop,u=null,c=p();c==null&&(c=0,a.replaceState(Oo({},a.state,{idx:c}),""));function p(){return(a.state||{idx:null}).idx}function f(){i=Kn.Pop;let S=p(),m=S==null?null:S-c;c=S,u&&u({action:i,location:w.location,delta:m})}function h(S,m){i=Kn.Push;let d=Xl(w.location,S,m);n&&n(d,S),c=p()+1;let y=Tc(d,c),v=w.createHref(d);try{a.pushState(y,"",v)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;o.location.assign(v)}s&&u&&u({action:i,location:w.location,delta:1})}function b(S,m){i=Kn.Replace;let d=Xl(w.location,S,m);n&&n(d,S),c=p();let y=Tc(d,c),v=w.createHref(d);a.replaceState(y,"",v),s&&u&&u({action:i,location:w.location,delta:0})}function x(S){let m=o.location.origin!=="null"?o.location.origin:o.location.href,d=typeof S=="string"?S:Ep(S);return d=d.replace(/ $/,"%20"),nn(m,"No window.location.(origin|href) available to create URL for href: "+d),new URL(d,m)}let w={get action(){return i},get location(){return e(o,a)},listen(S){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(zc,f),u=S,()=>{o.removeEventListener(zc,f),u=null}},createHref(S){return t(o,S)},createURL:x,encodeLocation(S){let m=x(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:b,go(S){return a.go(S)}};return w}var $c;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})($c||($c={}));function _h(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Nh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jh=e=>Nh.test(e);function Ih(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?ba(e):e,s;if(n)if(jh(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),bh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=Dc(n.substring(1),"/"):s=Dc(n,t)}else s=t;return{pathname:s,search:zh(r),hash:Th(o)}}function Dc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function tl(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ch(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Eh(e,t){let n=Ch(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ph(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=ba(e):(o=Oo({},e),nn(!o.pathname||!o.pathname.includes("?"),tl("?","pathname","search",o)),nn(!o.pathname||!o.pathname.includes("#"),tl("#","pathname","hash",o)),nn(!o.search||!o.search.includes("#"),tl("#","search","hash",o)));let s=e===""||o.pathname==="",a=s?"/":o.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;o.pathname=h.join("/")}i=f>=0?t[f]:"/"}let u=Ih(o,i),c=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||p)&&(u.pathname+="/"),u}const Rh=e=>e.join("/").replace(/\/\/+/g,"/"),zh=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Th=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Pp=["post","put","patch","delete"];new Set(Pp);const $h=["get",...Pp];new Set($h);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ea.apply(this,arguments)}const Rp=g.createContext(null),tu=g.createContext(null),nu=g.createContext(null),ru=g.createContext({outlet:null,matches:[],isDataRoute:!1});function ou(){return g.useContext(nu)!=null}function zp(){return ou()||nn(!1),g.useContext(nu).location}function Tp(e){g.useContext(tu).static||g.useLayoutEffect(e)}function Dh(){let{isDataRoute:e}=g.useContext(ru);return e?Fh():Oh()}function Oh(){ou()||nn(!1);let e=g.useContext(Rp),{basename:t,future:n,navigator:r}=g.useContext(tu),{matches:o}=g.useContext(ru),{pathname:s}=zp(),a=JSON.stringify(Eh(o,n.v7_relativeSplatPath)),i=g.useRef(!1);return Tp(()=>{i.current=!0}),g.useCallback(function(c,p){if(p===void 0&&(p={}),!i.current)return;if(typeof c=="number"){r.go(c);return}let f=Ph(c,JSON.parse(a),s,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Rh([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,a,s,e])}var $p=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($p||{}),Dp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dp||{});function Lh(e){let t=g.useContext(Rp);return t||nn(!1),t}function Uh(e){let t=g.useContext(ru);return t||nn(!1),t}function Mh(e){let t=Uh(),n=t.matches[t.matches.length-1];return n.route.id||nn(!1),n.route.id}function Fh(){let{router:e}=Lh($p.UseNavigateStable),t=Mh(Dp.UseNavigateStable),n=g.useRef(!1);return Tp(()=>{n.current=!0}),g.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,ea({fromRouteId:t},s)))},[e,t])}function Ah(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Zh(e){let{basename:t="/",children:n=null,location:r,navigationType:o=Kn.Pop,navigator:s,static:a=!1,future:i}=e;ou()&&nn(!1);let u=t.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:u,navigator:s,static:a,future:ea({v7_relativeSplatPath:!1},i)}),[u,i,s,a]);typeof r=="string"&&(r=ba(r));let{pathname:p="/",search:f="",hash:h="",state:b=null,key:x="default"}=r,w=g.useMemo(()=>{let S=_h(p,u);return S==null?null:{location:{pathname:S,search:f,hash:h,state:b,key:x},navigationType:o}},[u,p,f,h,b,x,o]);return w==null?null:g.createElement(tu.Provider,{value:c},g.createElement(nu.Provider,{children:n,value:w}))}new Promise(()=>{});/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Wh="6";try{window.__reactRouterVersion=Wh}catch{}const Bh="startTransition",Oc=u0[Bh];function Vh(e){let{basename:t,children:n,future:r,window:o}=e,s=g.useRef();s.current==null&&(s.current=wh({window:o,v5Compat:!0}));let a=s.current,[i,u]=g.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},p=g.useCallback(f=>{c&&Oc?Oc(()=>u(f)):u(f)},[u,c]);return g.useLayoutEffect(()=>a.listen(p),[a,p]),g.useEffect(()=>Ah(r),[r]),g.createElement(Zh,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var Lc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Lc||(Lc={}));var Uc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Uc||(Uc={}));let qn=null;const Op=g.createContext(null);function Gh(){if(qn){try{console.log("[v0] Closing global WebSocket connection"),qn.close(1e3,"User logout")}catch(e){console.warn("[v0] Error while closing global socket:",e)}qn=null}}function Hh({children:e,AuthResponseObject:t,showToast:n}){const r=g.useRef(qn),[o,s]=g.useState(null),[a,i]=g.useState(!1),[u,c]=g.useState(t.tokens.jwt),[p,f]=g.useState(0),h=g.useRef(null),b=g.useRef(null),x=g.useRef(0),w=g.useRef([]),m=(window.location.protocol==="https:"?"wss:":"ws:")+"//"+window.location.host+"/ws",d=g.useCallback(v=>{const N=typeof v=="string"?v:JSON.stringify(v);return r.current&&r.current.readyState===WebSocket.OPEN?(r.current.send(N),!0):(console.log("[v0] Socket not connected, queueing message"),console.log(`[V0] Current queue length: ${w.current.length}`),console.log(`[V0] Socket readyState: ${r.current?r.current.readyState:"null"}`),w.current.push(N),!1)},[]),y=g.useCallback(async()=>{var v,N;try{console.log("[Auth] Refreshing JWT token..."),console.log("[Auth] Using refresh token:",((v=t.tokens.refresh)==null?void 0:v.substring(0,20))+"...");const k=await fetch("/public_api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t.tokens.refresh}),credentials:"include"});if(!k.ok){const C=await k.json().catch(()=>({message:"Unknown error"}));throw console.error("[Auth] Token refresh failed with status:",k.status,C),new Error(`Token refresh failed: ${k.status} - ${C.message}`)}const I=await k.json();console.log("[Auth] Token refreshed successfully"),console.log("[Auth] New JWT:",((N=I.tokens.jwt)==null?void 0:N.substring(0,20))+"..."),c(I.tokens.jwt),t.tokens.jwt=I.tokens.jwt,I.tokens.refresh&&(t.tokens.refresh=I.tokens.refresh,console.log("[Auth] New refresh token received")),r.current&&r.current.readyState===WebSocket.OPEN?(console.log("[Auth] Re-authenticating WebSocket with new token"),r.current.send(JSON.stringify({target_container:"hub",funcId:"user_connected",payload:{token:I.tokens.jwt}}))):console.warn("[Auth] WebSocket not connected, cannot re-authenticate")}catch(k){console.error("[Auth] Token refresh failed:",k),console.error("[Auth] Redirecting to login in 3 seconds..."),setTimeout(()=>{window.location.href="/login"},3e3)}},[t]);return g.useEffect(()=>(h.current&&clearInterval(h.current),h.current=setInterval(()=>{y()},10*60*1e3),console.log("[Auth] Token refresh scheduled every 10 minutes"),()=>{h.current&&(clearInterval(h.current),console.log("[Auth] Token refresh interval cleared"))}),[y]),g.useEffect(()=>(console.log("[v0] useEffect triggered to (re)connect WebSocket"),!r.current||r.current.readyState===WebSocket.CLOSED||r.current.readyState===WebSocket.CLOSING?(console.log("[v0] Creating new WebSocket connection to:",m),r.current=new WebSocket(m),qn=r.current,r.current.onopen=()=>{console.log("[v0] WebSocket connected, authorizing with JWT"),r.current.send(JSON.stringify({authorization:u})),i(!0),x.current=0,b.current&&(clearTimeout(b.current),b.current=null),w.current.length>0&&(console.log(`[v0] Sending ${w.current.length} queued messages`),w.current.forEach(v=>{var N;(N=r.current)==null||N.send(v)}),w.current=[]),x.current>0&&n&&n("Reconnected successfully","success")},r.current.onmessage=v=>{var N,k;try{const I=JSON.parse(v.data);I.funcId!=="get_game_state"&&console.log("[v0] WebSocket message:",I.funcId),(I.code===401||(N=I.message)!=null&&N.includes("unauthorized")||(k=I.message)!=null&&k.includes("token expired"))&&(console.warn("[Auth] Received auth error, attempting token refresh"),y()),s(I)}catch{const I=String(v.data);console.log("[v0] Couldn't parse:",I),I.includes("Failed to forward to container")||I.includes("has never opened a socket")?n&&n("Service temporarily unavailable. Please wait a moment and try again.","error"):n&&I.length>0&&I.length<500&&n(I,"error")}},r.current.onclose=v=>{if(console.log("[v0] WebSocket disconnected, code:",v.code,"reason:",v.reason),qn=null,i(!1),v.code===1e3&&v.wasClean){console.log("[v0] Clean disconnect, not reconnecting");return}const N=10,k=1e3;if(x.current<N){const I=Math.min(k*Math.pow(2,x.current),3e4);x.current+=1,console.log(`[v0] Attempting to reconnect in ${I}ms (attempt ${x.current}/${N})`),n&&x.current===1&&n("Connection lost. Reconnecting...","error"),b.current=setTimeout(()=>{console.log("[v0] Reconnecting..."),r.current=null,qn=null,f(C=>C+1)},I)}else console.error("[v0] Max reconnection attempts reached. Please refresh the page."),n&&n("Unable to reconnect. Please refresh the page.","error")},r.current.onerror=v=>{console.error("[v0] WebSocket error:",v),i(!1)}):i(r.current.readyState===WebSocket.OPEN),()=>{b.current&&clearTimeout(b.current)}),[m,u,y,p,n]),l.jsx(Op.Provider,{value:{socket:r,payloadReceived:o,isConnected:a,refreshToken:y,sendMessage:d},children:e})}function Wo(){const e=g.useContext(Op);if(!e)throw new Error("useWebSocket must be used inside <SocketComponent>");return e}function Jh({tempToken:e,onVerifySuccess:t,onCancel:n}){const[r,o]=g.useState(""),[s,a]=g.useState(!1),[i,u]=g.useState(null),c=async()=>{var f,h;if(r.length!==6){u("Please enter a 6-digit code");return}a(!0),u(null);try{const b=await fetch("/public_api/auth/2fa/verify-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tempToken:e,code:r})});if(!b.ok){const w=await b.json();throw new Error(w.message||"Invalid 2FA code")}const x=await b.json();(f=x==null?void 0:x.tokens)!=null&&f.jwt&&localStorage.setItem("jwt",x.tokens.jwt),(h=x==null?void 0:x.tokens)!=null&&h.refresh&&localStorage.setItem("refreshToken",x.tokens.refresh),t(x)}catch(b){u(b.message||"Verification failed")}finally{a(!1)}},p=f=>{f.key==="Enter"&&(f.preventDefault(),c())};return l.jsx("div",{className:"flex items-start justify-center bg-gradient-to-br from-blue-50 dark:from-gray-900 via-white dark:via-gray-800 to-purple-50 dark:to-gray-900 px-4 py-4",children:l.jsxs("div",{className:"w-full max-w-md shadow-lg glass-light-sm dark:glass-dark-sm glass-border p-4 md:p-6 mt-4 md:mt-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-2 text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),l.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:"Enter the 6-digit code from your authenticator app"}),i&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-center",children:i}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"2fa-code",className:"block mb-1 font-semibold text-gray-700 dark:text-gray-200",children:"Authentication Code"}),l.jsx("input",{id:"2fa-code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,value:r,onChange:f=>o(f.target.value.replace(/\D/g,"")),onKeyPress:p,disabled:s,placeholder:"000000",className:"w-full px-4 py-3 text-center text-2xl tracking-widest border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700/80 dark:text-white disabled:opacity-50",autoFocus:!0})]}),l.jsx("button",{onClick:c,disabled:s||r.length!==6,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Verifying...":"Verify"}),l.jsx("button",{onClick:n,disabled:s,className:"w-full py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})})}function Qh({userId:e,username:t,onSetupComplete:n,onCancel:r}){const[o,s]=g.useState("generate"),[a,i]=g.useState(null),[u,c]=g.useState(null),[p,f]=g.useState(""),[h,b]=g.useState(!1),[x,w]=g.useState(null),S=async()=>{b(!0),w(null);try{const d=await fetch("/public_api/auth/2fa/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,username:t})});if(!d.ok){const v=await d.json();throw new Error(v.message||"Failed to generate 2FA secret")}const y=await d.json();i(y.qrCode),c(y.secret),s("verify")}catch(d){w(d.message||"Setup failed")}finally{b(!1)}},m=async()=>{if(p.length!==6){w("Please enter a 6-digit code");return}b(!0),w(null);try{const d=await fetch("/public_api/auth/2fa/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,code:p})});if(!d.ok){const y=await d.json();throw new Error(y.message||"Invalid verification code")}n()}catch(d){w(d.message||"Verification failed")}finally{b(!1)}};return o==="generate"?l.jsxs("div",{className:"p-6 glass-light-sm dark:glass-dark-sm glass-border shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Enable Two-Factor Authentication"}),l.jsx("p",{className:"mb-6 text-gray-900",children:"Two-factor authentication adds an extra layer of security to your account. You'll need an authenticator app like Google Authenticator or Authy."}),x&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:x}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:S,disabled:h,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Generating...":"Get Started"}),l.jsx("button",{onClick:r,disabled:h,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]}):l.jsxs("div",{className:"p-6 glass-light-sm dark:glass-dark-sm glass-border shadow-md max-w-md mx-auto",children:[l.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Scan QR Code"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"mb-4 text-gray-900",children:"1. Open your authenticator app"}),l.jsx("p",{className:"mb-4 text-gray-900",children:"2. Scan this QR code:"}),a&&l.jsx("div",{className:"flex justify-center mb-4 p-4 bg-white",children:l.jsx("img",{src:a,alt:"2FA QR Code",className:"w-64 h-64"})}),l.jsxs("details",{className:"mb-4",children:[l.jsx("summary",{className:"cursor-pointer text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Can't scan? Enter manually"}),l.jsx("div",{className:"mt-2 p-3 bg-gray-100/40 dark:bg-gray-700/50 font-mono text-xs break-all",children:u})]}),l.jsx("p",{className:"mb-4 text-gray-900",children:"3. Enter the 6-digit code from your app:"})]}),x&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:x}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,value:p,onChange:d=>f(d.target.value.replace(/\D/g,"")),disabled:h,placeholder:"000000",className:"w-full px-4 py-3 text-center text-2xl tracking-widest border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700/80 dark:text-white disabled:opacity-50",autoFocus:!0}),l.jsx("button",{onClick:m,disabled:h||p.length!==6,className:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Verifying...":"Enable 2FA"}),l.jsx("button",{onClick:r,disabled:h,className:"w-full py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})}function Kh({userId:e,onDisableComplete:t,onCancel:n}){const[r,o]=g.useState(!1),[s,a]=g.useState(null),i=async()=>{o(!0),a(null);try{const u=await fetch("/public_api/auth/2fa/disable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!u.ok){const c=await u.json();throw new Error(c.message||"Failed to disable 2FA")}t()}catch(u){a(u.message||"Disable failed")}finally{o(!1)}};return l.jsxs("div",{className:"p-6 glass-light-sm dark:glass-dark-sm glass-border shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Disable Two-Factor Authentication"}),l.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:"Are you sure you want to disable two-factor authentication? This will make your account less secure."}),s&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:s}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:i,disabled:r,className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Disabling...":"Disable 2FA"}),l.jsx("button",{onClick:n,disabled:r,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700/80 dark:hover:bg-gray-600/80 text-gray-800 dark:text-white font-semibold shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})}const Mc=(e,t)=>{e.key==="Enter"&&(e.preventDefault(),t())};function qh({onLoginSuccess:e}){const t=g.useId(),[n,r]=g.useState(""),[o,s]=g.useState(""),[a,i]=g.useState(!1),[u,c]=g.useState(null),[p,f]=g.useState(!1),[h,b]=g.useState(null),x=d=>d?d.length<3?"Username must be at least 3 characters":null:"Username is required",w=d=>d?d.length<6?"Password must be at least 6 characters":null:"Password is required",S=async()=>{var v,N;c(null);const d=x(n),y=w(o);if(d||y){c(d||y);return}i(!0);try{const k=await fetch("/public_api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:o})});if(!k.ok){const C=await k.text();throw new Error(C||"Login failed")}const I=await k.json();if(console.log("[v0] Login response:",I),I!=null&&I.requires2FA&&(I!=null&&I.tempToken)){f(!0),b(I.tempToken);return}(v=I==null?void 0:I.tokens)!=null&&v.jwt?(localStorage.setItem("jwt",I.tokens.jwt),console.log("[v0] Stored JWT token:",I.tokens.jwt)):console.warn("[v0] No JWT token found in login response"),(N=I==null?void 0:I.tokens)!=null&&N.refresh&&localStorage.setItem("refreshToken",I.tokens.refresh),e(I)}catch(k){const I=k instanceof Error?k.message:"Login failed";c(I)}finally{i(!1)}},m=()=>{f(!1),b(null),s("")};return p&&h?l.jsx(Jh,{tempToken:h,onVerifySuccess:e,onCancel:m}):l.jsx("div",{className:"flex items-start justify-center px-4 py-4",children:l.jsxs("div",{className:"w-full max-w-md shadow-lg p-4 md:p-6 mt-4 md:mt-6 glass-light-sm dark:glass-dark-sm glass-border",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4 text-gray-900 dark:text-white",children:"Login"}),u&&l.jsx("div",{className:"mb-4 text-red-500 text-center",children:u}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`${t}-login-username`,className:"block mb-1 font-semibold text-gray-700 dark:text-gray-200",children:"Username"}),l.jsx("input",{id:`${t}-login-username`,type:"text",value:n,onChange:d=>r(d.target.value),onKeyDown:d=>Mc(d,S),className:"w-full border px-3 py-2 border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400",disabled:a,placeholder:"Your username"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`${t}-login-password`,className:"block mb-1 font-semibold text-gray-700 dark:text-gray-200",children:"Password"}),l.jsx("input",{id:`${t}-login-password`,type:"password",value:o,onChange:d=>s(d.target.value),onKeyDown:d=>Mc(d,S),className:"w-full border px-3 py-2 border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400",disabled:a,placeholder:"Your password"})]}),l.jsx("button",{onClick:S,className:"w-full bg-blue-500 dark:bg-blue-600 text-white py-2 px-4 hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors",disabled:a,children:a?"Logging in...":"Login"}),l.jsxs("button",{onClick:()=>window.location.href="/public_api/auth/oauth/github/login",className:"w-full mt-4 bg-gray-900 dark:bg-gray-700/80 text-white py-2 px-4 hover:bg-gray-800 dark:hover:bg-gray-600/80 transition-colors flex items-center justify-center gap-2",disabled:a,children:[l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),"Continue with GitHub"]})]})]})})}function P(e,t,n){function r(i,u){if(i._zod||Object.defineProperty(i,"_zod",{value:{def:u,constr:a,traits:new Set},enumerable:!1}),i._zod.traits.has(e))return;i._zod.traits.add(e),t(i,u);const c=a.prototype,p=Object.keys(c);for(let f=0;f<p.length;f++){const h=p[f];h in i||(i[h]=c[h].bind(i))}}const o=(n==null?void 0:n.Parent)??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function a(i){var u;const c=n!=null&&n.Parent?new s:this;r(c,i),(u=c._zod).deferred??(u.deferred=[]);for(const p of c._zod.deferred)p();return c}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:i=>{var u,c;return n!=null&&n.Parent&&i instanceof n.Parent?!0:(c=(u=i==null?void 0:i._zod)==null?void 0:u.traits)==null?void 0:c.has(e)}}),Object.defineProperty(a,"name",{value:e}),a}class Tr extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Lp extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const ei={};function Un(e){return e&&Object.assign(ei,e),ei}function Yh(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function ti(e,t){return typeof t=="bigint"?t.toString():t}function su(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function au(e){return e==null}function lu(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function Xh(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const u=r.match(/\d?e-(\d?)/);u!=null&&u[1]&&(o=Number.parseInt(u[1]))}const s=n>o?n:o,a=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return a%i/10**s}const Fc=Symbol("evaluating");function Pe(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Fc)return r===void 0&&(r=Fc,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function lr(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ir(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function Ac(e){return JSON.stringify(e)}function ey(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Up="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ta(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const ty=su(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ar(e){if(ta(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(ta(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Mp(e){return Ar(e)?{...e}:Array.isArray(e)?[...e]:e}const ny=new Set(["string","number","symbol"]);function Zr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wn(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function q(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function ry(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const oy={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function sy(e,t){const n=e._zod.def,r=ir(e._zod.def,{get shape(){const o={};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(o[s]=n.shape[s])}return lr(this,"shape",o),o},checks:[]});return Wn(e,r)}function ay(e,t){const n=e._zod.def,r=ir(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete o[s]}return lr(this,"shape",o),o},checks:[]});return Wn(e,r)}function ly(e,t){if(!Ar(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const o=ir(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return lr(this,"shape",s),s},checks:[]});return Wn(e,o)}function iy(e,t){if(!Ar(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return lr(this,"shape",r),r},checks:e._zod.def.checks};return Wn(e,n)}function uy(e,t){const n=ir(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return lr(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Wn(e,n)}function cy(e,t,n){const r=ir(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const a in n){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=e?new e({type:"optional",innerType:o[a]}):o[a])}else for(const a in o)s[a]=e?new e({type:"optional",innerType:o[a]}):o[a];return lr(this,"shape",s),s},checks:[]});return Wn(t,r)}function dy(e,t,n){const r=ir(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(s[a]=new e({type:"nonoptional",innerType:o[a]}))}else for(const a in o)s[a]=new e({type:"nonoptional",innerType:o[a]});return lr(this,"shape",s),s},checks:[]});return Wn(t,r)}function Nr(e,t=0){var n;if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function jr(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function cs(e){return typeof e=="string"?e:e==null?void 0:e.message}function Mn(e,t,n){var o,s,a,i,u,c;const r={...e,path:e.path??[]};if(!e.message){const p=cs((a=(s=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:s.error)==null?void 0:a.call(s,e))??cs((i=t==null?void 0:t.error)==null?void 0:i.call(t,e))??cs((u=n.customError)==null?void 0:u.call(n,e))??cs((c=n.localeError)==null?void 0:c.call(n,e))??"Invalid input";r.message=p}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function iu(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Lo(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Fp=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,ti,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Ap=P("$ZodError",Fp),Zp=P("$ZodError",Fp,{Parent:Error});function fy(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function py(e,t=n=>n.message){const n={_errors:[]},r=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>r({issues:a}));else if(s.code==="invalid_key")r({issues:s.issues});else if(s.code==="invalid_element")r({issues:s.issues});else if(s.path.length===0)n._errors.push(t(s));else{let a=n,i=0;for(;i<s.path.length;){const u=s.path[i];i===s.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(s))):a[u]=a[u]||{_errors:[]},a=a[u],i++}}};return r(e),n}const uu=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new Tr;if(a.issues.length){const i=new((o==null?void 0:o.Err)??e)(a.issues.map(u=>Mn(u,s,Un())));throw Up(i,o==null?void 0:o.callee),i}return a.value},cu=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){const i=new((o==null?void 0:o.Err)??e)(a.issues.map(u=>Mn(u,s,Un())));throw Up(i,o==null?void 0:o.callee),i}return a.value},ka=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Tr;return s.issues.length?{success:!1,error:new(e??Ap)(s.issues.map(a=>Mn(a,o,Un())))}:{success:!0,data:s.value}},my=ka(Zp),Sa=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(a=>Mn(a,o,Un())))}:{success:!0,data:s.value}},gy=Sa(Zp),hy=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return uu(e)(t,n,o)},yy=e=>(t,n,r)=>uu(e)(t,n,r),vy=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return cu(e)(t,n,o)},xy=e=>async(t,n,r)=>cu(e)(t,n,r),wy=e=>(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ka(e)(t,n,o)},by=e=>(t,n,r)=>ka(e)(t,n,r),ky=e=>async(t,n,r)=>{const o=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sa(e)(t,n,o)},Sy=e=>async(t,n,r)=>Sa(e)(t,n,r),_y=/^[cC][^\s-]{8,}$/,Ny=/^[0-9a-z]+$/,jy=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Iy=/^[0-9a-vA-V]{20}$/,Cy=/^[A-Za-z0-9]{27}$/,Ey=/^[a-zA-Z0-9_-]{21}$/,Py=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ry=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Zc=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,zy=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ty="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function $y(){return new RegExp(Ty,"u")}const Dy=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Oy=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ly=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Uy=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,My=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Wp=/^[A-Za-z0-9_-]*$/,Fy=/^\+(?:[0-9]){6,14}[0-9]$/,Bp="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ay=new RegExp(`^${Bp}$`);function Vp(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Zy(e){return new RegExp(`^${Vp(e)}$`)}function Wy(e){const t=Vp({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Bp}T(?:${r})$`)}const By=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Vy=/^-?\d+$/,Gy=/^-?\d+(?:\.\d+)?/,Hy=/^(?:true|false)$/i,Jy=/^null$/i,Qy=/^[^A-Z]*$/,Ky=/^[^a-z]*$/,bt=P("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Gp={number:"number",bigint:"bigint",object:"date"},Hp=P("$ZodCheckLessThan",(e,t)=>{bt.init(e,t);const n=Gp[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Jp=P("$ZodCheckGreaterThan",(e,t)=>{bt.init(e,t);const n=Gp[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),qy=P("$ZodCheckMultipleOf",(e,t)=>{bt.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):Xh(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Yy=P("$ZodCheckNumberFormat",(e,t)=>{var a;bt.init(e,t),t.format=t.format||"float64";const n=(a=t.format)==null?void 0:a.includes("int"),r=n?"int":"number",[o,s]=oy[t.format];e._zod.onattach.push(i=>{const u=i._zod.bag;u.format=t.format,u.minimum=o,u.maximum=s,n&&(u.pattern=Vy)}),e._zod.check=i=>{const u=i.value;if(n){if(!Number.isInteger(u)){i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:u,inst:e});return}if(!Number.isSafeInteger(u)){u>0?i.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):i.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}u<o&&i.issues.push({origin:"number",input:u,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),u>s&&i.issues.push({origin:"number",input:u,code:"too_big",maximum:s,inst:e})}}),Xy=P("$ZodCheckMaxLength",(e,t)=>{var n;bt.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!au(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const a=iu(o);r.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),ev=P("$ZodCheckMinLength",(e,t)=>{var n;bt.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!au(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const a=iu(o);r.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),tv=P("$ZodCheckLengthEquals",(e,t)=>{var n;bt.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!au(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const a=iu(o),i=s>t.length;r.issues.push({origin:a,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),_a=P("$ZodCheckStringFormat",(e,t)=>{var n,r;bt.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),nv=P("$ZodCheckRegex",(e,t)=>{_a.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),rv=P("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Qy),_a.init(e,t)}),ov=P("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Ky),_a.init(e,t)}),sv=P("$ZodCheckIncludes",(e,t)=>{bt.init(e,t);const n=Zr(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),av=P("$ZodCheckStartsWith",(e,t)=>{bt.init(e,t);const n=new RegExp(`^${Zr(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),lv=P("$ZodCheckEndsWith",(e,t)=>{bt.init(e,t);const n=new RegExp(`.*${Zr(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),iv=P("$ZodCheckOverwrite",(e,t)=>{bt.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class uv{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(a=>a),o=Math.min(...r.map(a=>a.length-a.trimStart().length)),s=r.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(const a of s)this.content.push(a)}compile(){const t=Function,n=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const cv={major:4,minor:1,patch:13},Te=P("$ZodType",(e,t)=>{var o;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=cv;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const a of s._zod.onattach)a(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const s=(i,u,c)=>{let p=Nr(i),f;for(const h of u){if(h._zod.def.when){if(!h._zod.def.when(i))continue}else if(p)continue;const b=i.issues.length,x=h._zod.check(i);if(x instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Tr;if(f||x instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await x,i.issues.length!==b&&(p||(p=Nr(i,b)))});else{if(i.issues.length===b)continue;p||(p=Nr(i,b))}}return f?f.then(()=>i):i},a=(i,u,c)=>{if(Nr(i))return i.aborted=!0,i;const p=s(u,r,c);if(p instanceof Promise){if(c.async===!1)throw new Tr;return p.then(f=>e._zod.parse(f,c))}return e._zod.parse(p,c)};e._zod.run=(i,u)=>{if(u.skipChecks)return e._zod.parse(i,u);if(u.direction==="backward"){const p=e._zod.parse({value:i.value,issues:[]},{...u,skipChecks:!0});return p instanceof Promise?p.then(f=>a(f,i,u)):a(p,i,u)}const c=e._zod.parse(i,u);if(c instanceof Promise){if(u.async===!1)throw new Tr;return c.then(p=>s(p,r,u))}return s(c,r,u)}}e["~standard"]={validate:s=>{var a;try{const i=my(e,s);return i.success?{value:i.data}:{issues:(a=i.error)==null?void 0:a.issues}}catch{return gy(e,s).then(u=>{var c;return u.success?{value:u.data}:{issues:(c=u.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),du=P("$ZodString",(e,t)=>{var n;Te.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??By(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),De=P("$ZodStringFormat",(e,t)=>{_a.init(e,t),du.init(e,t)}),dv=P("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Ry),De.init(e,t)}),fv=P("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Zc(r))}else t.pattern??(t.pattern=Zc());De.init(e,t)}),pv=P("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=zy),De.init(e,t)}),mv=P("$ZodURL",(e,t)=>{De.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),gv=P("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=$y()),De.init(e,t)}),hv=P("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Ey),De.init(e,t)}),yv=P("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=_y),De.init(e,t)}),vv=P("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Ny),De.init(e,t)}),xv=P("$ZodULID",(e,t)=>{t.pattern??(t.pattern=jy),De.init(e,t)}),wv=P("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Iy),De.init(e,t)}),bv=P("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Cy),De.init(e,t)}),kv=P("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Wy(t)),De.init(e,t)}),Sv=P("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ay),De.init(e,t)}),_v=P("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Zy(t)),De.init(e,t)}),Nv=P("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Py),De.init(e,t)}),jv=P("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Dy),De.init(e,t),e._zod.bag.format="ipv4"}),Iv=P("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Oy),De.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Cv=P("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ly),De.init(e,t)}),Ev=P("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Uy),De.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[o,s]=r;if(!s)throw new Error;const a=Number(s);if(`${a}`!==s)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Qp(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Pv=P("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=My),De.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{Qp(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Rv(e){if(!Wp.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Qp(n)}const zv=P("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Wp),De.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{Rv(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Tv=P("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Fy),De.init(e,t)});function $v(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const Dv=P("$ZodJWT",(e,t)=>{De.init(e,t),e._zod.check=n=>{$v(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Kp=P("$ZodNumber",(e,t)=>{Te.init(e,t),e._zod.pattern=e._zod.bag.pattern??Gy,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),Ov=P("$ZodNumberFormat",(e,t)=>{Yy.init(e,t),Kp.init(e,t)}),Lv=P("$ZodBoolean",(e,t)=>{Te.init(e,t),e._zod.pattern=Hy,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),Uv=P("$ZodNull",(e,t)=>{Te.init(e,t),e._zod.pattern=Jy,e._zod.values=new Set([null]),e._zod.parse=(n,r)=>{const o=n.value;return o===null||n.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),n}}),Mv=P("$ZodAny",(e,t)=>{Te.init(e,t),e._zod.parse=n=>n}),Fv=P("$ZodUnknown",(e,t)=>{Te.init(e,t),e._zod.parse=n=>n}),Av=P("$ZodNever",(e,t)=>{Te.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Wc(e,t,n){e.issues.length&&t.issues.push(...jr(n,e.issues)),t.value[n]=e.value}const Zv=P("$ZodArray",(e,t)=>{Te.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let a=0;a<o.length;a++){const i=o[a],u=t.element._zod.run({value:i,issues:[]},r);u instanceof Promise?s.push(u.then(c=>Wc(c,n,a))):Wc(u,n,a)}return s.length?Promise.all(s).then(()=>n):n}});function na(e,t,n,r){e.issues.length&&t.issues.push(...jr(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function qp(e){var r,o,s,a;const t=Object.keys(e.shape);for(const i of t)if(!((a=(s=(o=(r=e.shape)==null?void 0:r[i])==null?void 0:o._zod)==null?void 0:s.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const n=ry(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function Yp(e,t,n,r,o,s){const a=[],i=o.keySet,u=o.catchall._zod,c=u.def.type;for(const p in t){if(i.has(p))continue;if(c==="never"){a.push(p);continue}const f=u.run({value:t[p],issues:[]},r);f instanceof Promise?e.push(f.then(h=>na(h,n,p,t))):na(f,n,p,t)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}const Wv=P("$ZodObject",(e,t)=>{Te.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!(n!=null&&n.get)){const i=t.shape;Object.defineProperty(t,"shape",{get:()=>{const u={...i};return Object.defineProperty(t,"shape",{value:u}),u}})}const r=su(()=>qp(t));Pe(e._zod,"propValues",()=>{const i=t.shape,u={};for(const c in i){const p=i[c]._zod;if(p.values){u[c]??(u[c]=new Set);for(const f of p.values)u[c].add(f)}}return u});const o=ta,s=t.catchall;let a;e._zod.parse=(i,u)=>{a??(a=r.value);const c=i.value;if(!o(c))return i.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),i;i.value={};const p=[],f=a.shape;for(const h of a.keys){const x=f[h]._zod.run({value:c[h],issues:[]},u);x instanceof Promise?p.push(x.then(w=>na(w,i,h,c))):na(x,i,h,c)}return s?Yp(p,c,i,u,r.value,e):p.length?Promise.all(p).then(()=>i):i}}),Bv=P("$ZodObjectJIT",(e,t)=>{Wv.init(e,t);const n=e._zod.parse,r=su(()=>qp(t)),o=h=>{const b=new uv(["shape","payload","ctx"]),x=r.value,w=y=>{const v=Ac(y);return`shape[${v}]._zod.run({ value: input[${v}], issues: [] }, ctx)`};b.write("const input = payload.value;");const S=Object.create(null);let m=0;for(const y of x.keys)S[y]=`key_${m++}`;b.write("const newResult = {};");for(const y of x.keys){const v=S[y],N=Ac(y);b.write(`const ${v} = ${w(y)};`),b.write(`
        if (${v}.issues.length) {
          payload.issues = payload.issues.concat(${v}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${N}, ...iss.path] : [${N}]
          })));
        }
        
        
        if (${v}.value === undefined) {
          if (${N} in input) {
            newResult[${N}] = undefined;
          }
        } else {
          newResult[${N}] = ${v}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const d=b.compile();return(y,v)=>d(h,y,v)};let s;const a=ta,i=!ei.jitless,c=i&&ty.value,p=t.catchall;let f;e._zod.parse=(h,b)=>{f??(f=r.value);const x=h.value;return a(x)?i&&c&&(b==null?void 0:b.async)===!1&&b.jitless!==!0?(s||(s=o(t.shape)),h=s(h,b),p?Yp([],x,h,b,f,e):h):n(h,b):(h.issues.push({expected:"object",code:"invalid_type",input:x,inst:e}),h)}});function Bc(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!Nr(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(a=>Mn(a,r,Un())))}),t)}const Vv=P("$ZodUnion",(e,t)=>{Te.init(e,t),Pe(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),Pe(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),Pe(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),Pe(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>lu(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let a=!1;const i=[];for(const u of t.options){const c=u._zod.run({value:o.value,issues:[]},s);if(c instanceof Promise)i.push(c),a=!0;else{if(c.issues.length===0)return c;i.push(c)}}return a?Promise.all(i).then(u=>Bc(u,o,e,s)):Bc(i,o,e,s)}}),Gv=P("$ZodIntersection",(e,t)=>{Te.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),a=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([u,c])=>Vc(n,u,c)):Vc(n,s,a)}});function ni(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ar(e)&&Ar(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const a=ni(e[s],t[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};o[s]=a.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],a=ni(o,s);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Vc(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Nr(e))return e;const r=ni(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const Hv=P("$ZodRecord",(e,t)=>{Te.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Ar(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const s=[],a=t.keyType._zod.values;if(a){n.value={};const i=new Set;for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){i.add(typeof c=="number"?c.toString():c);const p=t.valueType._zod.run({value:o[c],issues:[]},r);p instanceof Promise?s.push(p.then(f=>{f.issues.length&&n.issues.push(...jr(c,f.issues)),n.value[c]=f.value})):(p.issues.length&&n.issues.push(...jr(c,p.issues)),n.value[c]=p.value)}let u;for(const c in o)i.has(c)||(u=u??[],u.push(c));u&&u.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:u})}else{n.value={};for(const i of Reflect.ownKeys(o)){if(i==="__proto__")continue;const u=t.keyType._zod.run({value:i,issues:[]},r);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(p=>Mn(p,r,Un())),input:i,path:[i],inst:e}),n.value[u.value]=u.value;continue}const c=t.valueType._zod.run({value:o[i],issues:[]},r);c instanceof Promise?s.push(c.then(p=>{p.issues.length&&n.issues.push(...jr(i,p.issues)),n.value[u.value]=p.value})):(c.issues.length&&n.issues.push(...jr(i,c.issues)),n.value[u.value]=c.value)}}return s.length?Promise.all(s).then(()=>n):n}}),Jv=P("$ZodEnum",(e,t)=>{Te.init(e,t);const n=Yh(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>ny.has(typeof o)).map(o=>typeof o=="string"?Zr(o):o.toString()).join("|")})$`),e._zod.parse=(o,s)=>{const a=o.value;return r.has(a)||o.issues.push({code:"invalid_value",values:n,input:a,inst:e}),o}}),Qv=P("$ZodLiteral",(e,t)=>{if(Te.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Zr(r):r?Zr(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,o)=>{const s=r.value;return n.has(s)||r.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),r}}),Kv=P("$ZodTransform",(e,t)=>{Te.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Lp(e.constructor.name);const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(n.value=a,n));if(o instanceof Promise)throw new Tr;return n.value=o,n}});function Gc(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const qv=P("$ZodOptional",(e,t)=>{Te.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Pe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Pe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${lu(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Gc(s,n.value)):Gc(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Yv=P("$ZodNullable",(e,t)=>{Te.init(e,t),Pe(e._zod,"optin",()=>t.innerType._zod.optin),Pe(e._zod,"optout",()=>t.innerType._zod.optout),Pe(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${lu(n.source)}|null)$`):void 0}),Pe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Xv=P("$ZodDefault",(e,t)=>{Te.init(e,t),e._zod.optin="optional",Pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Hc(s,t)):Hc(o,t)}});function Hc(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const ex=P("$ZodPrefault",(e,t)=>{Te.init(e,t),e._zod.optin="optional",Pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),tx=P("$ZodNonOptional",(e,t)=>{Te.init(e,t),Pe(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>Jc(s,e)):Jc(o,e)}});function Jc(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const nx=P("$ZodCatch",(e,t)=>{Te.init(e,t),Pe(e._zod,"optin",()=>t.innerType._zod.optin),Pe(e._zod,"optout",()=>t.innerType._zod.optout),Pe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(a=>Mn(a,r,Un()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>Mn(s,r,Un()))},input:n.value}),n.issues=[]),n)}}),rx=P("$ZodPipe",(e,t)=>{Te.init(e,t),Pe(e._zod,"values",()=>t.in._zod.values),Pe(e._zod,"optin",()=>t.in._zod.optin),Pe(e._zod,"optout",()=>t.out._zod.optout),Pe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const s=t.out._zod.run(n,r);return s instanceof Promise?s.then(a=>ds(a,t.in,r)):ds(s,t.in,r)}const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>ds(s,t.out,r)):ds(o,t.out,r)}});function ds(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const ox=P("$ZodReadonly",(e,t)=>{Te.init(e,t),Pe(e._zod,"propValues",()=>t.innerType._zod.propValues),Pe(e._zod,"values",()=>t.innerType._zod.values),Pe(e._zod,"optin",()=>{var n,r;return(r=(n=t.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),Pe(e._zod,"optout",()=>{var n,r;return(r=(n=t.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(Qc):Qc(o)}});function Qc(e){return e.value=Object.freeze(e.value),e}const sx=P("$ZodCustom",(e,t)=>{bt.init(e,t),Te.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>Kc(s,n,r,e));Kc(o,n,r,e)}});function Kc(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(Lo(o))}}var qc;class ax{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function lx(){return new ax}(qc=globalThis).__zod_globalRegistry??(qc.__zod_globalRegistry=lx());const fs=globalThis.__zod_globalRegistry;function ix(e,t){return new e({type:"string",...q(t)})}function ux(e,t){return new e({type:"string",coerce:!0,...q(t)})}function Xp(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...q(t)})}function Yc(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...q(t)})}function cx(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...q(t)})}function dx(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...q(t)})}function fx(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...q(t)})}function px(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...q(t)})}function mx(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...q(t)})}function gx(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...q(t)})}function hx(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...q(t)})}function yx(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...q(t)})}function vx(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...q(t)})}function xx(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...q(t)})}function wx(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...q(t)})}function bx(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...q(t)})}function kx(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...q(t)})}function Sx(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...q(t)})}function _x(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...q(t)})}function Nx(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...q(t)})}function jx(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...q(t)})}function Ix(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...q(t)})}function Cx(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...q(t)})}function Ex(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...q(t)})}function Px(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...q(t)})}function Rx(e,t){return new e({type:"string",format:"date",check:"string_format",...q(t)})}function zx(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...q(t)})}function Tx(e,t){return new e({type:"string",format:"duration",check:"string_format",...q(t)})}function $x(e,t){return new e({type:"number",checks:[],...q(t)})}function Dx(e,t){return new e({type:"number",coerce:!0,checks:[],...q(t)})}function Ox(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...q(t)})}function Lx(e,t){return new e({type:"boolean",...q(t)})}function Ux(e,t){return new e({type:"boolean",coerce:!0,...q(t)})}function Mx(e,t){return new e({type:"null",...q(t)})}function Fx(e){return new e({type:"any"})}function Ax(e){return new e({type:"unknown"})}function Zx(e,t){return new e({type:"never",...q(t)})}function Xc(e,t){return new Hp({check:"less_than",...q(t),value:e,inclusive:!1})}function nl(e,t){return new Hp({check:"less_than",...q(t),value:e,inclusive:!0})}function ed(e,t){return new Jp({check:"greater_than",...q(t),value:e,inclusive:!1})}function rl(e,t){return new Jp({check:"greater_than",...q(t),value:e,inclusive:!0})}function td(e,t){return new qy({check:"multiple_of",...q(t),value:e})}function em(e,t){return new Xy({check:"max_length",...q(t),maximum:e})}function ra(e,t){return new ev({check:"min_length",...q(t),minimum:e})}function tm(e,t){return new tv({check:"length_equals",...q(t),length:e})}function Wx(e,t){return new nv({check:"string_format",format:"regex",...q(t),pattern:e})}function Bx(e){return new rv({check:"string_format",format:"lowercase",...q(e)})}function Vx(e){return new ov({check:"string_format",format:"uppercase",...q(e)})}function Gx(e,t){return new sv({check:"string_format",format:"includes",...q(t),includes:e})}function Hx(e,t){return new av({check:"string_format",format:"starts_with",...q(t),prefix:e})}function Jx(e,t){return new lv({check:"string_format",format:"ends_with",...q(t),suffix:e})}function Hr(e){return new iv({check:"overwrite",tx:e})}function Qx(e){return Hr(t=>t.normalize(e))}function Kx(){return Hr(e=>e.trim())}function qx(){return Hr(e=>e.toLowerCase())}function Yx(){return Hr(e=>e.toUpperCase())}function Xx(){return Hr(e=>ey(e))}function ew(e,t,n){return new e({type:"array",element:t,...q(n)})}function tw(e,t,n){return new e({type:"custom",check:"custom",fn:t,...q(n)})}function nw(e){const t=rw(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Lo(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(Lo(o))}},e(n.value,n)));return t}function rw(e,t){const n=new bt({check:"custom",...q(t)});return n._zod.check=e,n}const ow=P("ZodISODateTime",(e,t)=>{kv.init(e,t),Fe.init(e,t)});function sw(e){return Px(ow,e)}const aw=P("ZodISODate",(e,t)=>{Sv.init(e,t),Fe.init(e,t)});function lw(e){return Rx(aw,e)}const iw=P("ZodISOTime",(e,t)=>{_v.init(e,t),Fe.init(e,t)});function uw(e){return zx(iw,e)}const cw=P("ZodISODuration",(e,t)=>{Nv.init(e,t),Fe.init(e,t)});function dw(e){return Tx(cw,e)}const fw=(e,t)=>{Ap.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>py(e,n)},flatten:{value:n=>fy(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,ti,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,ti,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ft=P("ZodError",fw,{Parent:Error}),pw=uu(Ft),mw=cu(Ft),gw=ka(Ft),hw=Sa(Ft),yw=hy(Ft),vw=yy(Ft),xw=vy(Ft),ww=xy(Ft),bw=wy(Ft),kw=by(Ft),Sw=ky(Ft),_w=Sy(Ft),Oe=P("ZodType",(e,t)=>(Te.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(ir(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(n,r)=>Wn(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>pw(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>gw(e,n,r),e.parseAsync=async(n,r)=>mw(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>hw(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>yw(e,n,r),e.decode=(n,r)=>vw(e,n,r),e.encodeAsync=async(n,r)=>xw(e,n,r),e.decodeAsync=async(n,r)=>ww(e,n,r),e.safeEncode=(n,r)=>bw(e,n,r),e.safeDecode=(n,r)=>kw(e,n,r),e.safeEncodeAsync=async(n,r)=>Sw(e,n,r),e.safeDecodeAsync=async(n,r)=>_w(e,n,r),e.refine=(n,r)=>e.check(h1(n,r)),e.superRefine=n=>e.check(y1(n)),e.overwrite=n=>e.check(Hr(n)),e.optional=()=>sd(e),e.nullable=()=>ad(e),e.nullish=()=>sd(ad(e)),e.nonoptional=n=>u1(e,n),e.array=()=>_e(e),e.or=n=>Na([e,n]),e.and=n=>Yw(e,n),e.transform=n=>ld(e,r1(n)),e.default=n=>a1(e,n),e.prefault=n=>i1(e,n),e.catch=n=>d1(e,n),e.pipe=n=>ld(e,n),e.readonly=()=>m1(e),e.describe=n=>{const r=e.clone();return fs.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=fs.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return fs.get(e);const r=e.clone();return fs.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),nm=P("_ZodString",(e,t)=>{du.init(e,t),Oe.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(Wx(...r)),e.includes=(...r)=>e.check(Gx(...r)),e.startsWith=(...r)=>e.check(Hx(...r)),e.endsWith=(...r)=>e.check(Jx(...r)),e.min=(...r)=>e.check(ra(...r)),e.max=(...r)=>e.check(em(...r)),e.length=(...r)=>e.check(tm(...r)),e.nonempty=(...r)=>e.check(ra(1,...r)),e.lowercase=r=>e.check(Bx(r)),e.uppercase=r=>e.check(Vx(r)),e.trim=()=>e.check(Kx()),e.normalize=(...r)=>e.check(Qx(...r)),e.toLowerCase=()=>e.check(qx()),e.toUpperCase=()=>e.check(Yx()),e.slugify=()=>e.check(Xx())}),rm=P("ZodString",(e,t)=>{du.init(e,t),nm.init(e,t),e.email=n=>e.check(Xp(om,n)),e.url=n=>e.check(mx(jw,n)),e.jwt=n=>e.check(Ex(Aw,n)),e.emoji=n=>e.check(gx(Iw,n)),e.guid=n=>e.check(Yc(nd,n)),e.uuid=n=>e.check(cx(ps,n)),e.uuidv4=n=>e.check(dx(ps,n)),e.uuidv6=n=>e.check(fx(ps,n)),e.uuidv7=n=>e.check(px(ps,n)),e.nanoid=n=>e.check(hx(Cw,n)),e.guid=n=>e.check(Yc(nd,n)),e.cuid=n=>e.check(yx(Ew,n)),e.cuid2=n=>e.check(vx(Pw,n)),e.ulid=n=>e.check(xx(Rw,n)),e.base64=n=>e.check(jx(Uw,n)),e.base64url=n=>e.check(Ix(Mw,n)),e.xid=n=>e.check(wx(zw,n)),e.ksuid=n=>e.check(bx(Tw,n)),e.ipv4=n=>e.check(kx($w,n)),e.ipv6=n=>e.check(Sx(Dw,n)),e.cidrv4=n=>e.check(_x(Ow,n)),e.cidrv6=n=>e.check(Nx(Lw,n)),e.e164=n=>e.check(Cx(Fw,n)),e.datetime=n=>e.check(sw(n)),e.date=n=>e.check(lw(n)),e.time=n=>e.check(uw(n)),e.duration=n=>e.check(dw(n))});function Z(e){return ix(rm,e)}const Fe=P("ZodStringFormat",(e,t)=>{De.init(e,t),nm.init(e,t)}),om=P("ZodEmail",(e,t)=>{pv.init(e,t),Fe.init(e,t)});function Nw(e){return Xp(om,e)}const nd=P("ZodGUID",(e,t)=>{dv.init(e,t),Fe.init(e,t)}),ps=P("ZodUUID",(e,t)=>{fv.init(e,t),Fe.init(e,t)}),jw=P("ZodURL",(e,t)=>{mv.init(e,t),Fe.init(e,t)}),Iw=P("ZodEmoji",(e,t)=>{gv.init(e,t),Fe.init(e,t)}),Cw=P("ZodNanoID",(e,t)=>{hv.init(e,t),Fe.init(e,t)}),Ew=P("ZodCUID",(e,t)=>{yv.init(e,t),Fe.init(e,t)}),Pw=P("ZodCUID2",(e,t)=>{vv.init(e,t),Fe.init(e,t)}),Rw=P("ZodULID",(e,t)=>{xv.init(e,t),Fe.init(e,t)}),zw=P("ZodXID",(e,t)=>{wv.init(e,t),Fe.init(e,t)}),Tw=P("ZodKSUID",(e,t)=>{bv.init(e,t),Fe.init(e,t)}),$w=P("ZodIPv4",(e,t)=>{jv.init(e,t),Fe.init(e,t)}),Dw=P("ZodIPv6",(e,t)=>{Iv.init(e,t),Fe.init(e,t)}),Ow=P("ZodCIDRv4",(e,t)=>{Cv.init(e,t),Fe.init(e,t)}),Lw=P("ZodCIDRv6",(e,t)=>{Ev.init(e,t),Fe.init(e,t)}),Uw=P("ZodBase64",(e,t)=>{Pv.init(e,t),Fe.init(e,t)}),Mw=P("ZodBase64URL",(e,t)=>{zv.init(e,t),Fe.init(e,t)}),Fw=P("ZodE164",(e,t)=>{Tv.init(e,t),Fe.init(e,t)}),Aw=P("ZodJWT",(e,t)=>{Dv.init(e,t),Fe.init(e,t)}),fu=P("ZodNumber",(e,t)=>{Kp.init(e,t),Oe.init(e,t),e.gt=(r,o)=>e.check(ed(r,o)),e.gte=(r,o)=>e.check(rl(r,o)),e.min=(r,o)=>e.check(rl(r,o)),e.lt=(r,o)=>e.check(Xc(r,o)),e.lte=(r,o)=>e.check(nl(r,o)),e.max=(r,o)=>e.check(nl(r,o)),e.int=r=>e.check(rd(r)),e.safe=r=>e.check(rd(r)),e.positive=r=>e.check(ed(0,r)),e.nonnegative=r=>e.check(rl(0,r)),e.negative=r=>e.check(Xc(0,r)),e.nonpositive=r=>e.check(nl(0,r)),e.multipleOf=(r,o)=>e.check(td(r,o)),e.step=(r,o)=>e.check(td(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Mt(e){return $x(fu,e)}const Zw=P("ZodNumberFormat",(e,t)=>{Ov.init(e,t),fu.init(e,t)});function rd(e){return Ox(Zw,e)}const sm=P("ZodBoolean",(e,t)=>{Lv.init(e,t),Oe.init(e,t)});function dn(e){return Lx(sm,e)}const Ww=P("ZodNull",(e,t)=>{Uv.init(e,t),Oe.init(e,t)});function Je(e){return Mx(Ww,e)}const Bw=P("ZodAny",(e,t)=>{Mv.init(e,t),Oe.init(e,t)});function hn(){return Fx(Bw)}const Vw=P("ZodUnknown",(e,t)=>{Fv.init(e,t),Oe.init(e,t)});function od(){return Ax(Vw)}const Gw=P("ZodNever",(e,t)=>{Av.init(e,t),Oe.init(e,t)});function Hw(e){return Zx(Gw,e)}const Jw=P("ZodArray",(e,t)=>{Zv.init(e,t),Oe.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(ra(n,r)),e.nonempty=n=>e.check(ra(1,n)),e.max=(n,r)=>e.check(em(n,r)),e.length=(n,r)=>e.check(tm(n,r)),e.unwrap=()=>e.element});function _e(e,t){return ew(Jw,e,t)}const Qw=P("ZodObject",(e,t)=>{Bv.init(e,t),Oe.init(e,t),Pe(e,"shape",()=>t.shape),e.keyof=()=>Jt(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:od()}),e.loose=()=>e.clone({...e._zod.def,catchall:od()}),e.strict=()=>e.clone({...e._zod.def,catchall:Hw()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>ly(e,n),e.safeExtend=n=>iy(e,n),e.merge=n=>uy(e,n),e.pick=n=>sy(e,n),e.omit=n=>ay(e,n),e.partial=(...n)=>cy(lm,e,n[0]),e.required=(...n)=>dy(im,e,n[0])});function U(e,t){const n={type:"object",shape:e??{},...q(t)};return new Qw(n)}const Kw=P("ZodUnion",(e,t)=>{Vv.init(e,t),Oe.init(e,t),e.options=t.options});function Na(e,t){return new Kw({type:"union",options:e,...q(t)})}const qw=P("ZodIntersection",(e,t)=>{Gv.init(e,t),Oe.init(e,t)});function Yw(e,t){return new qw({type:"intersection",left:e,right:t})}const Xw=P("ZodRecord",(e,t)=>{Hv.init(e,t),Oe.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function e1(e,t,n){return new Xw({type:"record",keyType:e,valueType:t,...q(n)})}const ri=P("ZodEnum",(e,t)=>{Jv.init(e,t),Oe.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const a of r)if(n.has(a))s[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new ri({...t,checks:[],...q(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const a of r)if(n.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new ri({...t,checks:[],...q(o),entries:s})}});function Jt(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new ri({type:"enum",entries:n,...q(t)})}const t1=P("ZodLiteral",(e,t)=>{Qv.init(e,t),Oe.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function am(e,t){return new t1({type:"literal",values:Array.isArray(e)?e:[e],...q(t)})}const n1=P("ZodTransform",(e,t)=>{Kv.init(e,t),Oe.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Lp(e.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(Lo(s,n.value,t));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),n.issues.push(Lo(a))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function r1(e){return new n1({type:"transform",transform:e})}const lm=P("ZodOptional",(e,t)=>{qv.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sd(e){return new lm({type:"optional",innerType:e})}const o1=P("ZodNullable",(e,t)=>{Yv.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ad(e){return new o1({type:"nullable",innerType:e})}const s1=P("ZodDefault",(e,t)=>{Xv.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function a1(e,t){return new s1({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Mp(t)}})}const l1=P("ZodPrefault",(e,t)=>{ex.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function i1(e,t){return new l1({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Mp(t)}})}const im=P("ZodNonOptional",(e,t)=>{tx.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function u1(e,t){return new im({type:"nonoptional",innerType:e,...q(t)})}const c1=P("ZodCatch",(e,t)=>{nx.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function d1(e,t){return new c1({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const f1=P("ZodPipe",(e,t)=>{rx.init(e,t),Oe.init(e,t),e.in=t.in,e.out=t.out});function ld(e,t){return new f1({type:"pipe",in:e,out:t})}const p1=P("ZodReadonly",(e,t)=>{ox.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function m1(e){return new p1({type:"readonly",innerType:e})}const g1=P("ZodCustom",(e,t)=>{sx.init(e,t),Oe.init(e,t)});function h1(e,t={}){return tw(g1,e,t)}function y1(e){return nw(e)}function um(e){return ux(rm,e)}function Ie(e){return Dx(fu,e)}function v1(e){return Ux(sm,e)}const Wr=Ie().int().min(1),He=Ie().int().min(0),te=Ie().int().min(1),cm=/^[\p{L}\p{N}\p{Emoji}\p{Emoji_Component} .,!@#\$%&*()_\-+=\[\]{};:'"<>\/?`~]+$/u,ms=3,id=50;var dm=(e=>(e[e.PRIVATE=1]="PRIVATE",e[e.DIRECT_MESSAGE=2]="DIRECT_MESSAGE",e))(dm||{});const Bn=Ie().gt(0),fm=um().min(ms,{message:`String must be at least ${ms} characters long`}).max(id,{message:`Max ${id} characters`}).refine(e=>e.replace(/\s/g,"").length>=ms,{message:`Must contain at least ${ms} non-space characters`}).refine(e=>cm.test(e),{message:"String contains invalid characters; only alphanumerics are allowed"}),gs=1,ud=320,pu=um().min(gs,{message:`String must be at least ${gs} characters long`}).max(ud,{message:`Max ${ud} characters`}).refine(e=>e.replace(/\s/g,"").length>=gs,{message:`Must contain at least ${gs} non-space characters`}).refine(e=>cm.test(e),{message:"String contains invalid characters; only numbers and letters are allowed"}),pm=U({roomName:fm}).strict(),oi=U({roomId:Bn,messageString:pu}).strict(),x1=U({targetUserId:Wr,messageString:pu}).strict(),mm=U({roomId:Bn,user_to_add:Wr}).strict(),Es=U({roomId:Bn}).strict(),Nn=U({}).strict();var gm=(e=>(e[e.None=0]="None",e[e.Pending=1]="Pending",e[e.Accepted=2]="Accepted",e[e.Blocked=3]="Blocked",e))(gm||{});const hm=Jt(gm),cd=U({userId:te,friendId:te,status:hm}).strict();U({friendId:te}).strict();const w1=U({token:Z()}).strict(),b1=U({userId:te,token:Z()}).strict();var mu=(e=>(e[e.System=0]="System",e[e.Guest=1]="Guest",e[e.User=2]="User",e))(mu||{});const gu=U({id:te,friendId:te,username:Z(),alias:Z().nullable(),bio:Z().nullable(),avatarUrl:Z().nullable(),status:hm,createdAt:Mt(),onlineStatus:Mt().optional()}),ym=U({id:te,createdAt:Mt(),username:Z(),alias:Z().nullable(),email:Z(),bio:Z().nullable(),accountType:Jt(mu),avatarUrl:Z().nullable(),has2FA:v1().optional()}),vm=ym.omit({email:!0,accountType:!0}),st=ym.extend({friends:_e(gu)});U({id:te,passwordHash:Z().nullable(),accountType:Jt(mu)});const Rt=U({userId:te}).strict(),xm=U({bio:Z().optional(),alias:Z().optional(),email:Z().optional(),pfp:U({filename:Z(),data:Z()}).optional()}).strict(),k1=Mt().int().gte(0);var sn=(e=>(e[e.INVITED=0]="INVITED",e[e.JOINED=1]="JOINED",e))(sn||{});const hu=U({messageId:Wr,roomId:Bn,messageString:pu,messageDate:k1,userId:Wr}).strict(),ja=U({roomName:fm,roomId:Bn,roomType:Jt(dm)}).strict(),S1=U({userId:te,userState:Jt(sn)}).strict(),si=U({room:ja,messages:_e(hu),userConnections:_e(S1),users:_e(vm)}).strict(),ol=U({user:Wr,roomId:Bn}).strict(),wm=_e(ja),_1=U({roomId:Bn}).strict(),N1=U({jwt:Z(),refresh:Z().optional()}),dd=U({token:Z()}).strict();U({uid:te}).strict();const oo=U({tokens:N1,user:st}),bm=U({username:Z(),email:Nw(),password:Z()}),j1=U({requires2FA:am(!0),userId:Mt(),tempToken:Z()}),km=U({username:Z(),password:Z()}),j=U({message:Z()});U({authorization:Z()}).strict();U({target_container:Z(),funcId:Z(),payload:hn()}).strict();U({recipients:_e(Mt()).nonempty({message:"Recipients array cannot be empty"}),funcId:Z(),payload:hn(),code:Mt().int()}).strict();const he=U({source_container:Z(),funcId:Z(),code:Mt().int(),payload:hn()}).strict(),ye=U({user_id:Mt(),funcId:Z(),payload:hn()}).strict();U({isInvokeMethod:am(!0),target_container:Z(),funcId:Z(),userIds:_e(te).nonempty(),payload:hn()});const $t=U({userId:te,payload:hn().optional()}).strict(),Sm=_e(Ie()).refine(e=>{const t=e.reduce((n,r)=>(n[r]=(n[r]||0)+1,n),{});return Object.values(t).every(n=>n<=2)},{message:"N omore than 2 player IDS in a given pong game."}),_m=U({balls:Ie().int().gt(0).lt(1e3),player_list:Sm}).strict(),I1=U({id:Ie(),x:Ie(),y:Ie(),dx:Ie().min(-1).max(1),dy:Ie().min(-1).max(1)}).strict(),C1=U({x:Ie(),y:Ie(),l:Ie().gt(0),w:Ie().gt(0),r:Ie(),paddle_id:He,owner_id:te}).strict(),E1=U({x:Ie(),y:Ie()}).strict(),P1=U({board_id:He,paddle_id:He,m:Na([dn(),Je()])}).strict(),ai=U({board_id:He,balls:_e(I1),paddles:_e(C1),edges:_e(E1)}).strict(),R1=U({board_id:He,player_list:Sm}).strict(),z1=U({game_id:He,user_id:te.optional()}).strict(),T1=U({game_id:He}).strict(),yu=Jt(["1v1","multiplayer","tournament_1v1","tournament_multi"]),$1=U({gameMode:yu,playerIds:_e(te),playerUsernames:e1(Z(),Z()).optional(),ballCount:Ie().int().min(1).max(5),maxScore:Ie().int().min(3).max(21),allowPowerups:dn().optional().default(!1)}).strict(),D1=U({userId:te,username:Z(),isReady:dn(),isHost:dn()}).strict(),O1=U({userId:te,username:Z(),alias:Z().optional()}).strict(),L1=U({matchId:He,round:Ie().int().min(1),player1Id:te.nullable(),player2Id:te.nullable(),winnerId:te.nullable(),status:Jt(["pending","in_progress","completed"])}).strict(),Nm=U({tournamentId:He,name:Z(),mode:Jt(["tournament_1v1","tournament_multi"]),players:_e(O1),matches:_e(L1),currentRound:Ie().int().min(1),totalRounds:Ie().int().min(1),status:Jt(["registration","in_progress","completed"]),winnerId:te.nullable(),ballCount:Ie(),maxScore:Ie(),onchainTxHashes:_e(Z()).optional()}).strict(),sl=U({lobbyId:He,gameMode:yu,players:_e(D1),ballCount:Ie(),maxScore:Ie(),allowPowerups:dn(),status:Jt(["waiting","starting","in_progress"]),tournament:Nm.optional()}).strict(),U1=U({tournamentId:He,alias:Z().min(1).max(20)}).strict(),M1=U({tournamentId:He,matchId:He}).strict();U({lobbyId:He}).strict();U({lobbyId:He,hostId:te,hostUsername:Z(),gameMode:yu,playerCount:Ie()}).strict();const jm=U({id:He,userId:te,score:Mt(),rank:Mt()});Na([oo,j1]),U({userId:te,username:Z()}),U({qrCode:Z(),secret:Z(),uri:Z()}),U({userId:te,code:Z()}),U({message:Z()}),U({userId:te}),U({message:Z()}),U({tempToken:Z(),code:Z()}),U({userId:te}),U({enabled:dn()}),Je();const T={http:{users:{fetchUserAvatar:{endpoint:"/api/users/pfp",wrapper:$t,method:"POST",schema:{body:U({file:Z()}),response:{200:hn(),500:j}}}},auth:{logoutUser:{endpoint:"/api/auth/logout",wrapper:$t,method:"POST",schema:{body:$t,response:{200:Je(),500:j}}},fetchPersonalData:{endpoint:"/api/auth/gdpr/me",method:"POST",schema:{body:$t,response:{200:st,401:j,500:j}}},requestAnonymize:{endpoint:"/api/auth/gdpr/anonymize",method:"POST",schema:{body:$t,response:{200:st,400:j,500:j}}},requestAccountDeletion:{endpoint:"/api/auth/gdpr/delete",method:"POST",schema:{body:$t,response:{200:Je(),400:j,500:j}}}}},ws:{users:{test:{funcId:"test",container:"users",schema:{args_wrapper:ye,args:Nn,output_wrapper:he,output:{Success:{code:0,payload:Z()},Failure:{code:1,payload:j}}}},userOnlineStatusUpdate:{funcId:"user_online_status_update",container:"users",schema:{args_wrapper:ye,args:Je(),output_wrapper:he,output:{GetOnlineUsers:{code:0,payload:_e(te)},GetOfflineUsers:{code:1,payload:_e(te)},Failure:{code:2,payload:j}}}},requestFriendship:{funcId:"request_friendship",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{ConnectionUpdated:{code:0,payload:Je()},UserDoesNotExist:{code:1,payload:j},InvalidStatusRequest:{code:3,payload:j}}}},confirmFriendship:{funcId:"confirm_friendship",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{ConnectionUpdated:{code:0,payload:Je()},UserDoesNotExist:{code:1,payload:j},InvalidStatusRequest:{code:3,payload:j}}}},denyFriendship:{funcId:"deny_friendship",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{ConnectionUpdated:{code:0,payload:Je()},UserDoesNotExist:{code:1,payload:j},NoPendingRequest:{code:2,payload:j},FailedToUpdate:{code:3,payload:j}}}},removeFriendship:{funcId:"remove_friendship",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{ConnectionUpdated:{code:0,payload:Je()},UserDoesNotExist:{code:1,payload:j},NotFriends:{code:2,payload:j},FailedToUpdate:{code:3,payload:j}}}},blockUser:{funcId:"block_user",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{ConnectionUpdated:{code:0,payload:Je()},UserDoesNotExist:{code:1,payload:j},InvalidStatusRequest:{code:3,payload:j}}}},unblockUser:{funcId:"unblock_user",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{ConnectionUpdated:{code:0,payload:Je()},UserDoesNotExist:{code:1,payload:j},InvalidStatusRequest:{code:3,payload:j}}}},fetchUserConnections:{funcId:"fetch_user_connections",container:"users",schema:{args_wrapper:ye,args:Je(),output_wrapper:he,output:{Success:{code:0,payload:_e(gu)},Failure:{code:1,payload:j}}}},fetchUserGameResults:{funcId:"fetch_user_game_results",container:"users",schema:{args_wrapper:ye,args:te,output_wrapper:he,output:{Success:{code:0,payload:_e(jm)},Failure:{code:1,payload:j}}}},requestUserProfileData:{funcId:"user_profile",container:"users",schema:{args_wrapper:ye,args:Na([te,Z()]),output_wrapper:he,output:{Success:{code:0,payload:vm},UserDoesNotExist:{code:1,payload:j}}}},updateProfile:{funcId:"update_profile",container:"users",schema:{args_wrapper:ye,args:xm,output_wrapper:he,output:{ProfileUpdated:{code:0,payload:st},FailedToUpdate:{code:1,payload:j}}}}},pong:{getGameState:{funcId:"get_game_state",container:"pong",schema:{args_wrapper:ye,args:U({gameId:He}),output_wrapper:he,output:{GameUpdate:{code:0,payload:hn()},NotInRoom:{code:1,payload:j},InvalidInput:{code:2,payload:j}}}},movePaddle:{funcId:"move_paddle",container:"pong",schema:{args_wrapper:ye,args:P1,output_wrapper:he,output:{MessageSent:{code:0,payload:Nn},NotInRoom:{code:1,payload:j},InvalidInput:{code:2,payload:j},NoSuchPaddle:{code:3,payload:j},NotYourPaddle:{code:4,payload:j}}}},startGame:{funcId:"start_game",container:"pong",schema:{args_wrapper:ye,args:_m,output_wrapper:he,output:{GameInstanceCreated:{code:0,payload:R1},FailedCreateGame:{code:1,payload:j},InvalidInput:{code:2,payload:j}}}},userReportsReady:{funcId:"report_ready_for_pong_game",container:"pong",schema:{args_wrapper:ye,args:T1,output_wrapper:he,output:{UserIsReady:{code:0,payload:z1},GameHasStarted:{code:1,payload:Nn},FailedToReady:{code:2,payload:j},AlreadyReady:{code:3,payload:j}}}},createLobby:{funcId:"create_pong_lobby",container:"pong",schema:{args_wrapper:ye,args:$1,output_wrapper:he,output:{LobbyCreated:{code:0,payload:sl},InvalidInput:{code:1,payload:j},Failed:{code:2,payload:j}}}},togglePlayerReady:{funcId:"toggle_player_ready_in_lobby",container:"pong",schema:{args_wrapper:ye,args:U({lobbyId:He}),output_wrapper:he,output:{LobbyUpdate:{code:0,payload:sl},NotInLobby:{code:1,payload:j}}}},leaveLobby:{funcId:"leave_pong_lobby",container:"pong",schema:{args_wrapper:ye,args:U({lobbyId:He}),output_wrapper:he,output:{LeftLobby:{code:0,payload:U({message:Z()})},LobbyUpdate:{code:1,payload:sl},NotInLobby:{code:2,payload:j}}}},startFromLobby:{funcId:"start_game_from_lobby",container:"pong",schema:{args_wrapper:ye,args:U({lobbyId:He}),output_wrapper:he,output:{GameStarted:{code:0,payload:ai},NotAllReady:{code:1,payload:j},NotHost:{code:2,payload:j}}}},setTournamentAlias:{funcId:"set_tournament_alias",container:"pong",schema:{args_wrapper:ye,args:U1,output_wrapper:he,output:{AliasSet:{code:0,payload:Nm},InvalidAlias:{code:1,payload:j},NotInTournament:{code:2,payload:j}}}},joinTournamentMatch:{funcId:"join_tournament_match",container:"pong",schema:{args_wrapper:ye,args:M1,output_wrapper:he,output:{MatchStarted:{code:0,payload:ai},MatchNotReady:{code:1,payload:j},NotYourMatch:{code:2,payload:j}}}}},chat:{sendMessage:{funcId:"/api/chat/send_message_to_room",container:"chat",schema:{args_wrapper:ye,args:oi,output_wrapper:he,output:{MessageSent:{code:0,payload:hu},NotInRoom:{code:1,payload:j},MessageTooShort:{code:2,payload:j},InvalidInput:{code:3,payload:j},InvitationNotAccepted:{code:4,payload:j},FailedToStoreMessage:{code:5,payload:j}}}},sendDirectMessage:{funcId:"/api/chat/send_direct_message",container:"chat",schema:{args_wrapper:ye,args:x1,output_wrapper:he,output:{MessageSent:{code:0,payload:_1},UserNotFound:{code:1,payload:j},MessageTooShort:{code:2,payload:j},InvalidInput:{code:3,payload:j},FailedToStoreMessage:{code:4,payload:j}}}},addUserToRoom:{funcId:"/api/chat/add_user_to_room",container:"chat",schema:{args_wrapper:ye,args:mm,output_wrapper:he,output:{UserAdded:{code:0,payload:ol},NotInRoom:{code:1,payload:j},InvalidInput:{code:2,payload:j},AlreadyInRoom:{code:3,payload:j},NoSuchRoom:{code:4,payload:j},FailedToAddUser:{code:5,payload:j}}}},addRoom:{funcId:"/api/chat/add_a_new_room",container:"chat",schema:{args_wrapper:ye,args:pm,output_wrapper:he,output:{AddedRoom:{code:0,payload:ja},FailedToAddRoom:{code:1,payload:j}}}},listRooms:{funcId:"/api/chat/list_rooms",container:"chat",schema:{args_wrapper:ye,args:Nn,output_wrapper:he,output:{FullListGiven:{code:0,payload:wm},NoListGiven:{code:1,payload:j}}}},joinRoom:{funcId:"/api/chat/join_room",container:"chat",schema:{args_wrapper:ye,args:Es,output_wrapper:he,output:{RoomJoined:{code:0,payload:ol},NoSuchRoom:{code:1,payload:j},FailedToJoinRoom:{code:2,payload:j}}},code:{Joined:0,NoSuchRoom:1,AlreadyInRoom:2}},leaveRoom:{funcId:"/api/chat/leave_room",container:"chat",schema:{args_wrapper:ye,args:Es,output_wrapper:he,output:{RoomLeft:{code:0,payload:ol},NoSuchRoom:{code:1,payload:j},FailedToLeaveRoom:{code:2,payload:j}}},code:{Left:0,NoSuchRoom:1,NotInRoom:2}},getRoomData:{funcId:"/api/chat/get_room_data",container:"chat",schema:{args_wrapper:ye,args:Es,output_wrapper:he,output:{RoomDataProvided:{code:0,payload:si},NoSuchRoom:{code:1,payload:j}}}},userConnected:{funcId:"user_connected",container:"chat",schema:{args_wrapper:ye,args:Nn,output_wrapper:he,output:{UserConnected:{code:0,payload:Rt}}}}}}};_e(st),_e(te),_e(st),U({username:Z()}),U({file:Z()}),hn(),U({userId:te}),Je(),_e(cd),Je(),_e(gu),_e(cd),_e(jm),xm.extend({userId:te}),Je(),Je(),pm.extend({owner:te,personB:te.optional()}),U({userId1:te,userId2:te}),U({room:si,created:dn()}),oi.extend({userId:Wr}),mm.extend({type:Mt()}),Je(),U({roomId:Bn,user_to_remove:te}),Je(),U({enabled:dn()}),U({userId:te,username:Z()}),U({qrCode:Z(),secret:Z(),uri:Z()}),U({userId:te,code:Z()}),U({message:Z()}),U({userId:te}),U({message:Z()}),U({userId:te,code:Z()}),U({valid:dn()}),_e(te),Je();const oa=[{r:0,g:255,b:0},{r:0,g:128,b:255},{r:255,g:128,b:0},{r:255,g:0,b:255},{r:255,g:255,b:0},{r:0,g:255,b:255},{r:153,g:51,b:255},{r:255,g:51,b:102}];function dt(e,t=!0){const n=e%oa.length,r=oa[n],o=t?1:.6;return`rgb(${Math.round(r.r*o)}, ${Math.round(r.g*o)}, ${Math.round(r.b*o)})`}function F1(e){const t=e%oa.length,n=oa[t];return new xe(n.r/255,n.g/255,n.b/255)}const fd=1e3,pd=1e3,fr=.02,A1=.2;function Z1(e){const n=new Vm("beachBallTexture",512,e,!0),r=n.getContext(),o=["#FF2222","#FFDD00","#2266FF","#22CC22","#FF6600","#CC22CC"],s=6,a=512/s;r.fillStyle="#FFFFFF",r.fillRect(0,0,512,512);for(let u=0;u<s;u++){r.fillStyle=o[u];const c=u*a+a*.1,p=a*.8;r.fillRect(c,0,p,512)}r.strokeStyle="rgba(0, 0, 0, 0.15)",r.lineWidth=2;for(let u=0;u<=s;u++)r.beginPath(),r.moveTo(u*a,0),r.lineTo(u*a,512),r.stroke();const i=512*.08;return r.fillStyle="#FFFFFF",r.beginPath(),r.arc(512/2,i,i,0,2*Math.PI),r.fill(),r.strokeStyle="rgba(0, 0, 0, 0.2)",r.lineWidth=2,r.stroke(),r.fillStyle="#FFFFFF",r.beginPath(),r.arc(512/2,512-i,i,0,2*Math.PI),r.fill(),r.stroke(),n.update(),n}function W1({gameState:e,darkMode:t=!0}){const n=g.useRef(null),r=g.useRef(null),o=g.useRef(null),s=g.useRef(new Map),a=g.useRef(new Map),i=g.useRef(new Map),u=g.useRef([]),c=g.useRef(null),p=g.useRef(null),f=g.useRef(new Map),h=g.useRef(new Map),b=g.useRef(new Map),x=g.useRef(null);return g.useEffect(()=>{if(!n.current)return;const w=new Dm(n.current,!0,{preserveDrawingBuffer:!0,stencil:!0});o.current=w;const S=new Om(w),m=t?new xe(.05,.05,.1):new xe(.9,.92,.95);S.clearColor=m.toColor4(),r.current=S;const d=(D,E,H)=>({play:()=>{try{const G=new(window.AudioContext||window.webkitAudioContext),$=G.createOscillator(),X=G.createGain();$.type="sine",$.frequency.value=D;const ve=G.currentTime;X.gain.setValueAtTime(.3,ve),X.gain.exponentialRampToValueAtTime(.01,ve+E),$.connect(X),X.connect(G.destination),$.start(ve),$.stop(ve+E),$.onended=()=>{$.disconnect(),X.disconnect(),G.close()},console.log(`[Pong Sound] ${H} played with Web Audio API`)}catch(G){console.warn(`[Pong Sound] Failed to play ${H}:`,G)}},dispose:()=>{}}),y=[523.25,587.33,659.25,783.99,880,1046.5,1174.66,1318.51];for(let D=0;D<8;D++)f.current.set(D,d(y[D],.08,`paddle${D}`));console.log("[Pong Sound] 8 paddle sounds initialized (Web Audio API)");const v=new Lm("camera",-Math.PI/2,Math.PI/3,25,Kt.Zero(),S);v.attachControl(n.current,!0),v.lowerRadiusLimit=10,v.upperRadiusLimit=50;const N=new Um("hemi",new Kt(0,1,0),S);N.intensity=.3;const k=new Mm("dir",new Kt(-1,-2,-1),S);k.position=new Kt(20,40,20),k.intensity=.8;const I=new Fm(1024,k);I.useBlurExponentialShadowMap=!0,I.blurKernel=32,p.current=I,w.runRenderLoop(()=>{S.render()});const C=()=>w.resize();return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C),f.current.forEach(D=>D.dispose()),f.current.clear(),s.current.clear(),a.current.clear(),i.current.clear(),u.current=[],c.current=null,h.current.clear(),S.dispose(),w.dispose()}},[]),g.useEffect(()=>{var m;if(!r.current)return;const w=r.current,S=t?new xe(.05,.05,.1):new xe(.9,.92,.95);if(w.clearColor=S.toColor4(),(m=c.current)!=null&&m.material){const d=c.current.material;d.diffuseColor=t?new xe(.1,.1,.15):new xe(.85,.9,.85),d.specularColor=t?new xe(.1,.1,.1):new xe(.3,.3,.3)}u.current.forEach(d=>{if(d.material){const y=d.material;y.diffuseColor=t?new xe(.2,.2,.3):new xe(.6,.65,.7),y.emissiveColor=t?new xe(.1,.1,.2):new xe(.3,.35,.4)}}),s.current.forEach(d=>{if(d.material){const y=d.material;y.diffuseColor=t?new xe(0,1,0):new xe(0,.6,0),y.emissiveColor=t?new xe(0,.4,0):new xe(0,.2,0)}}),a.current.forEach(d=>{if(d.material){const y=d.material;y.diffuseColor=t?new xe(1,0,0):new xe(.8,.2,0),y.emissiveColor=t?new xe(.5,0,0):new xe(.3,.1,0)}})},[t]),g.useEffect(()=>{if(!e||!r.current)return;const w=r.current,S=p.current,m=(v,N,k=0)=>new Kt((v-fd/2)*fr,k,(N-pd/2)*fr);if(e.edges&&e.edges.length>0&&u.current.length!==e.edges.length){u.current.forEach(E=>E.dispose()),u.current=[],c.current&&c.current.dispose();const v=e.edges.map(E=>new Am((E.x-fd/2)*fr,(E.y-pd/2)*fr)),k=new Zm("floorPoly",v,w,Wm).build();k.position.y=-.1;const I=new Vo("floorMat",w);I.diffuseColor=t?new xe(.1,.1,.15):new xe(.85,.9,.85),I.specularColor=t?new xe(.1,.1,.1):new xe(.3,.3,.3),k.material=I,k.receiveShadows=!0,c.current=k;const C=.5,D=.2;for(let E=0;E<e.edges.length;E++){const H=e.edges[E],G=e.edges[(E+1)%e.edges.length],$=m(H.x,H.y,0),X=m(G.x,G.y,0),ve=Kt.Center($,X),Ce=Kt.Distance($,X),me=X.subtract($).normalize(),L=Ca.CreateBox(`wall_${E}`,{width:Ce,height:C,depth:D},w);L.position=ve,L.position.y=C/2-.1;const Q=Math.atan2(me.z,me.x);L.rotation.y=-Q;const Y=new Vo("wallMat",w);Y.diffuseColor=t?new xe(.2,.2,.3):new xe(.6,.65,.7),Y.emissiveColor=t?new xe(.1,.1,.2):new xe(.3,.35,.4),Y.alpha=.5,L.material=Y,u.current.push(L)}}const d=new Set;e.paddles.forEach(v=>{d.add(v.paddle_id);let N=s.current.get(v.paddle_id);if(!N){const I=v.w*fr,C=v.l*fr;N=Ca.CreateBox(`paddle_${v.paddle_id}`,{width:C,height:.5,depth:I},w);const D=new Vo("paddleMat",w),E=F1(v.owner_id??v.paddle_id);D.diffuseColor=t?E:E.scale(.6),D.emissiveColor=t?E.scale(.4):E.scale(.2),N.material=D,S&&S.addShadowCaster(N),s.current.set(v.paddle_id,N)}const k=m(v.x,v.y,.25);N.position=k,N.rotation.y=-v.r+Math.PI/2});for(const[v,N]of s.current)d.has(v)||(N.dispose(),s.current.delete(v));const y=new Set;e.balls.forEach(v=>{y.add(v.id);let N=a.current.get(v.id);if(!N){N=Ca.CreateSphere(`ball_${v.id}`,{diameter:.4,segments:32},w);const H=new Vo("ballMat",w);x.current||(x.current=Z1(w)),H.diffuseTexture=x.current,H.emissiveColor=t?new xe(.15,.15,.15):new xe(.1,.1,.1),H.specularColor=new xe(.3,.3,.3),N.material=H,N.rotationQuaternion=Go.Identity(),b.current.set(v.id,Go.Identity()),S&&S.addShadowCaster(N);const G=new Bm(`ballLight_${v.id}`,new Kt(0,0,0),w);G.parent=N,G.intensity=.5,G.diffuse=new xe(1,0,0),i.current.set(v.id,G),a.current.set(v.id,N),console.log("[Pong Sound] New ball created:",v.id,"with direction:",v.dx,v.dy)}const k=m(v.x,v.y,.2),I=N.position.clone();N.position=k;const C=Kt.Distance(I,k),D=Math.sqrt(v.dx*v.dx+v.dy*v.dy);if(C>.001&&D>.001&&N.rotationQuaternion){const H=C/A1,G=b.current.get(v.id)||Go.Identity(),$=v.dx/D,ve=-(v.dy/D),Ce=$,L=Go.RotationAxis(new Kt(ve,0,Ce),H).multiply(G);b.current.set(v.id,L),N.rotationQuaternion=L}const E=h.current.get(v.id);if(E){const H=Math.abs(v.dx-E.dx)>.01,G=Math.abs(v.dy-E.dy)>.01;if(H||G){let $=0,X=1/0;e.paddles.forEach((Ce,me)=>{const L=Math.sqrt(Math.pow(v.x-Ce.x,2)+Math.pow(v.y-Ce.y,2));L<X&&(X=L,$=me)});const ve=f.current.get($);if(ve)try{ve.play()}catch(Ce){console.warn("[Pong Sound] Failed to play:",Ce)}}}h.current.set(v.id,{dx:v.dx,dy:v.dy})});for(const[v,N]of a.current)if(!y.has(v)){const k=i.current.get(v);k&&(k.dispose(),i.current.delete(v)),N.dispose(),a.current.delete(v),h.current.delete(v),b.current.delete(v)}},[e,t]),l.jsx("canvas",{ref:n,style:{width:"100%",height:"100%",display:"block",outline:"none"}})}function B1({isOpen:e,onClose:t,roomUsers:n,currentUserId:r,onCreateGame:o}){const[s,a]=g.useState("1v1"),[i,u]=g.useState([]),[c,p]=g.useState(1),[f,h]=g.useState(5),[b,x]=g.useState(!1);if(!e)return null;const w=v=>{v!==r&&u(N=>N.includes(v)?N.filter(k=>k!==v):[...N,v])},S=()=>{const v=[r,...i];if(s==="1v1"&&v.length!==2){alert("1v1 mode requires exactly 2 players (including yourself)");return}if(s==="tournament_1v1"&&v.length<4){alert("Tournament 1v1 requires at least 4 players");return}if(s==="tournament_multi"&&v.length<4){alert("Multiplayer tournament requires at least 4 players");return}if(s==="multiplayer"&&v.length<2){alert("Multiplayer mode requires at least 2 players");return}o(s,v,{ballCount:c,maxScore:f,allowPowerups:b}),t()},m=()=>{switch(s){case"1v1":return"Classic 1 vs 1 Pong - Two players compete directly";case"multiplayer":return"Multiplayer Pong - Multiple players compete in a free-for-all match";case"tournament_1v1":return"1v1 Tournament - Players compete in bracket-style matches";case"tournament_multi":return"Multiplayer Tournament - Teams compete in bracket-style matches"}},d=()=>{switch(s){case"1v1":return 2;case"multiplayer":return 2;case"tournament_1v1":return 4;case"tournament_multi":return 4}},y=n.filter(v=>v.id!==r);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-500 to-purple-500",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:" Create Pong Game"}),l.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 transition-colors text-2xl",children:""})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Select Game Mode"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>a("1v1"),className:`p-4 border-2 transition-all ${s==="1v1"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"1 vs 1"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Classic Pong"})]}),l.jsxs("button",{onClick:()=>a("multiplayer"),className:`p-4 border-2 transition-all ${s==="multiplayer"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Multiplayer"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Free-for-all"})]}),l.jsxs("button",{onClick:()=>a("tournament_1v1"),className:`p-4 border-2 transition-all ${s==="tournament_1v1"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"1v1 Tournament"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Bracket style"})]}),l.jsxs("button",{onClick:()=>a("tournament_multi"),className:`p-4 border-2 transition-all ${s==="tournament_multi"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Multi Tournament"}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Team brackets"})]})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:m()})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:["Select Players (Min: ",d(),")"]}),l.jsxs("div",{className:"bg-gray-50/40 dark:bg-gray-900/70 p-4 max-h-48 overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-100 dark:bg-blue-900/30 mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),l.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"You (Host)"})]}),l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Auto-selected"})]}),y.length>0?y.map(v=>l.jsxs("button",{onClick:()=>w(v.id),className:`w-full flex items-center justify-between p-2 mb-1 transition-colors ${i.includes(v.id)?"bg-blue-100 dark:bg-blue-900/30":"hover:bg-gray-100/40 dark:hover:bg-gray-800"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${v.onlineStatus===1?"bg-green-500":"bg-gray-400"}`}),l.jsx("span",{className:"text-sm font-semibold",style:{color:dt(v.id,!0)},children:v.username})]}),i.includes(v.id)&&l.jsx("span",{className:"text-blue-500",children:""})]},v.id)):l.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No other players available in this room"})]}),l.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Selected: ",i.length+1," player(s)"]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Game Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Number of Balls: ",c]}),l.jsx("input",{type:"range",min:"1",max:"5",value:c,onChange:v=>p(Number(v.target.value)),className:"w-full"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Max Score: ",f]}),l.jsx("input",{type:"range",min:"3",max:"21",value:f,onChange:v=>h(Number(v.target.value)),className:"w-full"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",id:"powerups",checked:b,onChange:v=>x(v.target.checked),className:"rounded"}),l.jsx("label",{htmlFor:"powerups",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Power-ups (experimental)"})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50/40 dark:bg-gray-900/70 flex justify-end gap-3",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600/80 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:S,className:"px-6 py-2 bg-blue-500 text-white hover:bg-blue-600 transition-colors font-semibold",children:"Create Game"})]})]})})}function V1({lobby:e,currentUserId:t,onToggleReady:n,onStartGame:r,onLeaveLobby:o}){if(!e)return null;const s=e.players.find(p=>p.id===t),a=(s==null?void 0:s.isHost)||!1,i=e.players.every(p=>p.isReady),u=a&&i&&e.players.length>=2,c=()=>{switch(e.gameMode){case"1v1":return"1 vs 1";case"multiplayer":return"Multiplayer";case"tournament_1v1":return"1v1 Tournament";case"tournament_multi":return"Multi Tournament"}};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:" Game Lobby"}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c(),"  Lobby #",e.lobbyId]})]}),l.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Leave"})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50/40 dark:bg-gray-900/70",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Game Settings"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Balls:"})," ",l.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.settings.ballCount})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Max Score:"})," ",l.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.settings.maxScore})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Power-ups:"})," ",l.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:e.settings.allowPowerups?"Yes":"No"})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Players (",e.players.length,")"]}),l.jsx("div",{className:"space-y-2",children:e.players.map(p=>{const f=dt(p.id,!0);return l.jsxs("div",{className:`flex items-center justify-between p-3 ${p.isReady?"bg-green-50 dark:bg-green-900/20 border border-green-500":"bg-gray-50/40 dark:bg-gray-900/70 border border-gray-300 dark:border-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f}}),l.jsxs("span",{className:"font-bold",style:{color:f},children:[p.username,p.isHost&&l.jsx("span",{className:"ml-2 text-xs bg-blue-500 text-white px-2 py-0.5",children:"HOST"}),p.id===t&&l.jsx("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:"(You)"})]})]}),l.jsx("div",{className:"text-sm font-semibold",children:p.isReady?l.jsx("span",{className:"text-green-600 dark:text-green-400",children:" Ready"}):l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Waiting..."})})]},p.id)})})]}),e.status==="starting"&&l.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-500 text-center",children:l.jsx("p",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:" Game starting..."})}),!i&&e.status==="waiting"&&l.jsx("div",{className:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-500 text-center",children:l.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 text-sm",children:" Waiting for all players to be ready..."})}),l.jsxs("div",{className:"flex gap-3",children:[!a&&l.jsx("button",{onClick:n,className:`flex-1 py-3 font-semibold transition-colors ${s!=null&&s.isReady?"bg-gray-500 text-white hover:bg-gray-600":"bg-green-500 text-white hover:bg-green-600"}`,children:s!=null&&s.isReady?"Cancel Ready":"I'm Ready!"}),a&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:n,className:`flex-1 py-3 font-semibold transition-colors ${s!=null&&s.isReady?"bg-gray-500 text-white hover:bg-gray-600":"bg-green-500 text-white hover:bg-green-600"}`,children:s!=null&&s.isReady?"Cancel Ready":"I'm Ready!"}),l.jsx("button",{onClick:r,disabled:!u,className:`flex-1 py-3 font-semibold transition-colors ${u?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 dark:bg-gray-700/50 text-gray-500 dark:text-gray-500 cursor-not-allowed"}`,children:"Start Game"})]})]}),a&&!u&&l.jsx("p",{className:"mt-3 text-xs text-center text-gray-500 dark:text-gray-400",children:i?"Need at least 2 players to start":"All players must be ready before starting"})]})}function G1({tournament:e,currentUserId:t,onEnterAlias:n,onJoinMatch:r}){const o=e.players.find(p=>p.id===t),[s,a]=ht.useState(""),i={};e.matches.forEach(p=>{i[p.round]||(i[p.round]=[]),i[p.round].push(p)});const u=p=>p===e.totalRounds?"Finals":p===e.totalRounds-1?"Semi-Finals":p===e.totalRounds-2?"Quarter-Finals":`Round ${p}`,c=()=>{const p=s.trim();p&&(n(p),a(""))};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-lg p-6",children:[l.jsx("div",{className:"mb-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:[" ",e.name]}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.mode==="tournament_1v1"?"1v1 Tournament":"Multiplayer Tournament","  ","Round ",e.currentRound," of ",e.totalRounds]})]}),e.status==="completed"&&e.winner&&l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Winner"}),l.jsxs("div",{className:"text-xl font-bold",style:{color:dt(e.winner.id,!0)},children:[" ",e.winner.alias||e.winner.username]})]})]})}),e.status==="registration"&&!(o!=null&&o.alias)&&l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-500 rounded-lg",children:[l.jsx("h3",{className:"font-semibold text-blue-700 dark:text-blue-300 mb-3",children:" Enter Your Tournament Alias"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:s,onChange:p=>a(p.target.value),onKeyDown:p=>p.key==="Enter"&&c(),placeholder:"Enter your alias...",maxLength:20,className:"flex-1 border border-blue-300 dark:border-blue-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-gray-900/70 dark:text-gray-100"}),l.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Submit"})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:"Choose a unique alias for this tournament (max 20 characters)"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Participants (",e.players.length,")"]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:e.players.map(p=>l.jsxs("div",{className:"p-2 bg-gray-50/40 dark:bg-gray-900/70 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:[l.jsx("div",{className:"text-sm font-medium",style:{color:dt(p.id,!0)},children:p.alias||p.username}),p.id===t&&l.jsx("div",{className:"text-xs text-blue-500",children:"(You)"})]},p.id))})]}),e.status!=="registration"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsx("div",{className:"flex gap-8 min-w-max pb-4",children:Array.from({length:e.totalRounds},(p,f)=>{const h=f+1,b=i[h]||[];return l.jsxs("div",{className:"flex flex-col justify-around min-w-[250px]",children:[l.jsx("h3",{className:"text-center font-bold text-gray-700 dark:text-gray-300 mb-4",children:u(h)}),l.jsx("div",{className:"space-y-8",children:b.map(x=>{var w,S;return l.jsxs("div",{className:`bg-gray-50/40 dark:bg-gray-900/70 rounded-lg p-3 border-2 ${x.status==="in_progress"?"border-blue-500":x.status==="completed"?"border-green-500":"border-gray-300 dark:border-gray-700"}`,children:[l.jsxs("div",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mb-2",children:["Match #",x.matchId]}),l.jsx("div",{className:`p-2 mb-1 rounded ${x.winner===((w=x.player1)==null?void 0:w.id)?"bg-green-100 dark:bg-green-900/30 font-bold":"bg-white/50 dark:bg-gray-800/80"}`,children:l.jsx("div",{className:"text-sm",children:x.player1?l.jsxs("span",{style:{color:dt(x.player1.id,!0)},children:[x.player1.alias||x.player1.username,x.winner===x.player1.id&&" "]}):l.jsx("span",{className:"text-gray-400 italic",children:"TBD"})})}),l.jsx("div",{className:"text-center text-xs text-gray-400 my-1",children:"vs"}),l.jsx("div",{className:`p-2 rounded ${x.winner===((S=x.player2)==null?void 0:S.id)?"bg-green-100 dark:bg-green-900/30 font-bold":"bg-white/50 dark:bg-gray-800/80"}`,children:l.jsx("div",{className:"text-sm",children:x.player2?l.jsxs("span",{style:{color:dt(x.player2.id,!0)},children:[x.player2.alias||x.player2.username,x.winner===x.player2.id&&" "]}):l.jsx("span",{className:"text-gray-400 italic",children:"TBD"})})}),x.status==="pending"&&x.player1&&x.player2&&(x.player1.id===t||x.player2.id===t)&&l.jsx("button",{onClick:()=>r(x.matchId),className:"mt-2 w-full py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Join Match"}),x.status==="in_progress"&&l.jsx("div",{className:"mt-2 text-xs text-center text-blue-500 font-semibold",children:" In Progress..."})]},x.matchId)})})]},h)})})}),e.status==="registration"&&l.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-500 rounded-lg text-center",children:l.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:" Tournament will begin once all players have entered their aliases"})})]})}function hs({tournamentId:e,onClose:t}){var x,w;const[n,r]=ht.useState(!0),[o,s]=ht.useState(null),[a,i]=ht.useState(null),[u,c]=ht.useState(null);if(ht.useEffect(()=>{let S=!1;return r(!0),fetch(`/public_api/pong/tournaments/${e}/stats`).then(async m=>{if(!S){if(!m.ok){let d=`${m.status} ${m.statusText}`;try{const y=await m.json();y&&y.message&&(d=y.message)}catch{}throw new Error(d)}return m.json()}}).then(m=>{S||(m&&m.tournament?i(m.tournament):s((m==null?void 0:m.message)||"Invalid response"))}).catch(m=>s(String(m))).finally(()=>r(!1)),()=>{S=!0}},[e]),n)return l.jsx("div",{className:"p-4",children:"Loading tournament stats..."});if(o)return l.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",o]});if(!a)return l.jsx("div",{className:"p-4",children:"No data"});const p=Array.isArray(a.players)?a.players.map(S=>({id:S.id??S.userId??S.user_id,username:S.username??S.name??`User ${S.userId??S.id??"?"}`,alias:S.alias})):[],f=Array.isArray(a.matches)?a.matches:[],h=Array.isArray(a.onchainTxHashes)?a.onchainTxHashes:[],b=((w=(x=import.meta)==null?void 0:x.env)==null?void 0:w.VITE_EXPLORER_BASE)||"";return l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center p-6",children:l.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[l.jsxs("h3",{className:"font-bold",children:["Tournament Stats  ",a.name]}),l.jsx("div",{children:l.jsx("button",{onClick:t,className:"px-3 py-1 bg-gray-200 dark:bg-gray-800 rounded",children:"Close"})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:["Status: ",a.status," (id: ",a.tournamentId||a.id||"",")"]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("strong",{children:"Players:"}),l.jsx("ul",{className:"list-disc ml-5",children:p.length===0?l.jsx("li",{className:"text-sm text-gray-500",children:"No players"}):p.map(S=>l.jsxs("li",{children:[S.alias||S.username," (id: ",S.id,")"]},S.id??JSON.stringify(S)))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("strong",{children:"Matches:"}),l.jsx("div",{className:"text-sm",children:f.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No matches yet."}):f.map(S=>l.jsxs("div",{className:"py-1 border-b last:border-b-0",children:["Match #",S.matchId,"  Round ",S.round,"  ",S.status,S.player1Id||S.player2Id?l.jsxs("div",{className:"text-xs text-gray-500",children:["Players: ",S.player1Id??""," vs ",S.player2Id??""]}):null]},S.matchId))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("strong",{children:"On-chain records"}),h.length===0?l.jsx("div",{className:"text-sm text-gray-500",children:"No on-chain records yet."}):l.jsx("ul",{className:"list-none ml-0 space-y-2",children:h.map(S=>l.jsxs("li",{className:"text-sm bg-gray-100 dark:bg-gray-800 rounded p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}),l.jsx("span",{className:"font-semibold",children:"Transaction Recorded"})]}),l.jsx("div",{className:"font-mono text-xs break-all mb-2 bg-gray-200 dark:bg-gray-700 p-2 rounded",children:S}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{title:"Copy tx hash",onClick:async()=>{try{await navigator.clipboard.writeText(S),c(S),setTimeout(()=>c(m=>m===S?null:m),1800)}catch{}},className:"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:" Copy Hash"}),b&&l.jsx("a",{href:`${b.replace(/\/$/,"")}/tx/${S}`,target:"_blank",rel:"noreferrer",className:"px-3 py-1 bg-indigo-500 text-white rounded text-xs hover:bg-indigo-600 no-underline",children:" View in Explorer"}),u===S&&l.jsx("span",{className:"text-green-600 dark:text-green-400 text-sm",children:"Copied!"})]}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Contract: 0x5FbDB2315678afecb367f032d93F642f64180aa3"})]},S))})]})]})]})})}function H1({authResponse:e,darkMode:t=!0,showInviteModal:n=!1,inviteRoomUsers:r=[],onCloseInviteModal:o,pongInvitations:s,setPongInvitations:a,acceptedLobbyId:i,onLobbyJoined:u,onNavigateToChat:c}){var A;const{socket:p,payloadReceived:f}=Wo(),[h,b]=g.useState(null);g.useState(1);const[x,w]=g.useState(null),[S,m]=g.useState(-1),[d,y]=g.useState(-2),v=g.useRef(!1),N=g.useRef(null),[k,I]=g.useState(null),[C,D]=g.useState("menu"),[E,H]=g.useState(null),[G,$]=g.useState(null),[X,ve]=g.useState(null),[Ce,me]=g.useState(!1),[L,Q]=g.useState(!1);g.useEffect(()=>()=>{N.current&&(clearInterval(N.current),N.current=null)},[]);const Y=g.useRef(E);g.useEffect(()=>{Y.current=E},[E]),g.useEffect(()=>()=>{var z;Y.current&&((z=p.current)==null?void 0:z.readyState)===WebSocket.OPEN&&(console.log("[Pong] Component unmounting, leaving lobby:",Y.current.lobbyId),p.current.send(JSON.stringify({funcId:"leave_pong_lobby",payload:{lobbyId:Y.current.lobbyId},target_container:"pong"})))},[]),g.useEffect(()=>{if(!p.current){console.log("[Pong] Socket not ready yet");return}const z=()=>{if(p.current&&p.current.readyState===WebSocket.OPEN){console.log("[Pong] Requesting game state..."),console.log("[Pong] getGameState config:",{funcId:T.ws.pong.getGameState.funcId,container:T.ws.pong.getGameState.container});const V={funcId:T.ws.pong.getGameState.funcId,payload:{},target_container:T.ws.pong.getGameState.container},F=JSON.stringify(V);console.log("[Pong] Sending payload:",F),p.current.send(F),console.log("[Pong] Game state request sent")}else console.warn("[Pong] WebSocket not ready, retrying in 500ms"),setTimeout(z,500)};z()},[p]),g.useCallback(z=>{console.log(`Player with ID '${z.user_id}' is ready for game with ID '${z.game_id}'`)},[h]),g.useEffect(()=>{var z,V,F,ne;if(f){if((f.funcId==="create_pong_lobby"||f.funcId==="pong_lobby_invitation"||f.funcId==="lobby_state_update"||f.funcId==="start_game_from_lobby")&&console.log("[Pong] DEBUG: Received message:",f.funcId,"source_container:",f.source_container,"code:",f.code),f.source_container!=="pong"){(f.funcId==="create_pong_lobby"||f.funcId==="start_game_from_lobby")&&console.log("[Pong] DEBUG:",f.funcId,"filtered out! source_container:",f.source_container);return}if(f.funcId==="create_pong_lobby"&&f.code===0){console.log("[Pong] Received lobby creation/invitation:",f.payload);const W=e&&((z=f.payload.players)==null?void 0:z.some(K=>(K.userId===e.user.id||K.id===e.user.id)&&K.isHost));if(console.log("[Pong] isHost check: myId=",e==null?void 0:e.user.id,"isHost=",W,"players=",f.payload.players),W){if(H({lobbyId:f.payload.lobbyId,gameMode:f.payload.gameMode,players:f.payload.players.map(K=>({id:K.userId||K.id,username:K.username,isReady:K.isReady,isHost:K.isHost})),settings:{ballCount:f.payload.ballCount,maxScore:f.payload.maxScore,allowPowerups:f.payload.allowPowerups},status:f.payload.status}),(V=f.payload.tournament)!=null&&V.tournamentId){const K=f.payload.tournament;console.log("[Pong] Tournament lobby created, setting activeTournamentId:",K.tournamentId),ve(K.tournamentId),$({tournamentId:K.tournamentId,name:K.name||"Tournament",mode:K.mode||f.payload.gameMode,players:((F=K.players)==null?void 0:F.map(it=>({id:it.userId||it.id,username:it.username||`Player ${it.userId||it.id}`,alias:it.alias})))||[],matches:K.matches||[],currentRound:K.currentRound||1,totalRounds:K.totalRounds||2,status:K.status||"in_progress",winner:K.winnerId||null})}D("lobby")}}if(f.funcId==="pong_lobby_invitation"){console.log("[Pong] Received lobby invitation:",f.payload);const W={inviteId:f.payload.lobbyId||Date.now(),lobbyId:f.payload.lobbyId,hostId:f.payload.hostId,hostUsername:f.payload.hostUsername||`User ${f.payload.hostId}`,gameMode:f.payload.gameMode,playerCount:f.payload.playerCount||0,timestamp:Date.now()};a(K=>[...K,W])}if(f.funcId==="toggle_player_ready_in_lobby"&&f.code===0||f.funcId==="lobby_state_update"){console.log("[Pong] Received lobby update:",f.funcId,f.payload);const W=f.payload;e&&W.players.some(K=>K.userId===e.user.id||K.id===e.user.id)&&(H({lobbyId:W.lobbyId,gameMode:W.gameMode,players:W.players.map(K=>({id:K.userId||K.id,username:K.username,isReady:K.isReady,isHost:K.isHost})),settings:{ballCount:W.ballCount,maxScore:W.maxScore,allowPowerups:W.allowPowerups},status:W.status}),C==="menu"&&D("lobby"))}if(f.funcId==="start_game_from_lobby")if(console.log("[Pong] Received start_game_from_lobby! code:",f.code,"payload:",f.payload),f.code===0){console.log("[Pong] Game started from lobby! Processing game state");const W=f.payload,K=X||(G==null?void 0:G.tournamentId)||((ne=E==null?void 0:E.tournament)==null?void 0:ne.tournamentId)||(E==null?void 0:E.tournamentId);K&&(console.log("[Pong] Preserving tournament ID:",K),ve(K)),console.log("[Pong] Setting game state and transitioning to game view"),ge(W),w(W),H(null),D("game")}else console.warn("[Pong] start_game_from_lobby failed with code:",f.code)}},[f,e,C,X]),g.useEffect(()=>{var V;if(!i)return;const z=window.__acceptedLobbyData;z&&z.lobbyId===i&&(console.log("[Pong] Setting up lobby from stored invitation data:",i),H({lobbyId:z.lobbyId,gameMode:z.gameMode,players:z.players.map(F=>({id:F.userId||F.id,username:F.username,isReady:F.isReady,isHost:F.isHost})),settings:{ballCount:z.ballCount,maxScore:z.maxScore,allowPowerups:z.allowPowerups},status:z.status}),(V=z.tournament)!=null&&V.tournamentId&&(console.log("[Pong] Accepted tournament lobby, setting activeTournamentId:",z.tournament.tournamentId),ve(z.tournament.tournamentId)),D("lobby"),u&&u(),delete window.__acceptedLobbyData)},[i,u]);const ge=g.useCallback(z=>{if(!z){console.log("[Pong] setPlayerIDsHelper: game_data is null");return}if(!e){console.log("[Pong] setPlayerIDsHelper: authResponse is null");return}let V=!0;for(const F of z.paddles)F.owner_id===e.user.id&&(V?(m(F.paddle_id),V=!1):y(F.paddle_id))},[e]);g.useEffect(()=>{var z,V;if(f){f.funcId!=="get_game_state"&&f.source_container==="pong"&&console.log("[Pong] Processing:",f.funcId);for(const F of Object.values(T.ws.pong)){if(f.funcId!==F.funcId)continue;const ne=Object.values(F.schema.output).find(K=>K.code===f.code);if(!ne){console.error("Unknown code",f.code);return}const W=ne.payload.safeParse(f.payload);if(!W.success){console.warn("[Pong] Invalid payload",W.error);return}switch(f.funcId){case T.ws.pong.getGameState.funcId:if(f.code!==T.ws.pong.getGameState.schema.output.GameUpdate.code){console.warn("[Pong] getGameState returned non-GameUpdate code:",f.code),console.warn("[Pong] Payload:",f.payload),f.code===T.ws.pong.getGameState.schema.output.NotInRoom.code&&console.log("[Pong] User not in any game room - this is normal if no game exists");break}w(W.data),v.current=!0,ge(W.data),C!=="game"&&((z=W.data)!=null&&z.board_id)&&(console.log("[Pong] Received game state while not in game view, transitioning to game"),H(null),D("game"));break;case T.ws.pong.startGame.funcId:console.log("[Pong] Game started, received game info:",W.data),W.data&&typeof W.data.board_id=="number"&&I(W.data.board_id);const K={funcId:T.ws.pong.getGameState.funcId,payload:{},target_container:T.ws.pong.getGameState.container};((V=p.current)==null?void 0:V.readyState)===WebSocket.OPEN&&(p.current.send(JSON.stringify(K)),console.log("[Pong] Requested game state after game creation (handler will respond)"));break;case T.ws.pong.userReportsReady.funcId:console.log("[Pong] Player ready:",W.data),b(W.data);break}return}}},[f,ge]);const oe=g.useCallback((z,V)=>{var ne;const F=JSON.stringify({funcId:z.funcId,payload:V,target_container:z.container});((ne=p.current)==null?void 0:ne.readyState)===WebSocket.OPEN?p.current.send(F):console.warn("WebSocket not open, cannot send:",z.funcId)},[p]);g.useEffect(()=>{const z=new Set;function V(ne){if(x===null||ne.key!=="w"&&ne.key!=="s"||z.has(ne.key)||(z.add(ne.key),x.board_id===null))return;const W={board_id:x.board_id,paddle_id:S,m:ne.key==="w"};oe(T.ws.pong.movePaddle,W)}function F(ne){if(x===null||S===-1||ne.key!=="w"&&ne.key!=="s")return;z.delete(ne.key);const W={board_id:x.board_id,paddle_id:S,m:null};oe(T.ws.pong.movePaddle,W)}return window.addEventListener("keydown",V),window.addEventListener("keyup",F),()=>{window.removeEventListener("keydown",V),window.removeEventListener("keyup",F)}},[x,oe,S]),g.useEffect(()=>{const z=new Set;function V(ne){if(x===null||d===-1||ne.key!=="o"&&ne.key!=="l"||z.has(ne.key)||(z.add(ne.key),x.board_id===null))return;const W={board_id:x.board_id,paddle_id:d,m:ne.key==="o"};oe(T.ws.pong.movePaddle,W)}function F(ne){if(x===null||ne.key!=="o"&&ne.key!=="l")return;z.delete(ne.key);const W={board_id:x.board_id,paddle_id:d,m:null};oe(T.ws.pong.movePaddle,W)}return window.addEventListener("keydown",V),window.addEventListener("keyup",F),()=>{window.removeEventListener("keydown",V),window.removeEventListener("keyup",F)}},[x,oe,d]);const[Xe,We]=g.useState("4,5,6,7,8"),[M,re]=g.useState(1);g.useCallback(()=>{console.log("[Pong] Start Game clicked");const z=Xe.split(",").map(F=>Number.parseInt(F.trim(),10)).filter(F=>!isNaN(F));console.log("[Pong] Parsed player IDs:",z);const V={player_list:z,balls:M};console.log("[Pong] Sending start game payload:",V),oe(T.ws.pong.startGame,V)},[Xe,M,oe]),g.useCallback(z=>{const V={game_id:z};oe(T.ws.pong.userReportsReady,V)},[oe]);const le=g.useCallback((z,V,F)=>{var it;console.log("[Pong] Creating game:",{mode:z,selectedPlayers:V,settings:F});const ne={lobbyId:Date.now(),gameMode:z,players:V.map(Ct=>{var Et,Qt;return{id:Ct,username:((Et=r.find(ur=>ur.id===Ct))==null?void 0:Et.username)||`User ${Ct}`,isReady:!1,isHost:Ct===((Qt=e==null?void 0:e.user)==null?void 0:Qt.id)}}),settings:{ballCount:F.ballCount,maxScore:F.maxScore,allowPowerups:F.allowPowerups},status:"waiting"};H(ne);const W={};V.forEach(Ct=>{const Et=r.find(Qt=>Qt.id===Ct);W[Ct]=(Et==null?void 0:Et.username)||`User ${Ct}`});const K={funcId:"create_pong_lobby",payload:{gameMode:z,playerIds:V,playerUsernames:W,ballCount:F.ballCount,maxScore:F.maxScore,allowPowerups:F.allowPowerups},target_container:"pong"};if(((it=p.current)==null?void 0:it.readyState)===WebSocket.OPEN&&(p.current.send(JSON.stringify(K)),console.log("[Pong] Sent lobby creation to backend:",K)),z==="tournament_1v1"||z==="tournament_multi"){const Ct={tournamentId:Date.now(),name:`${z==="tournament_1v1"?"1v1":"Multiplayer"} Tournament`,mode:z,players:V.map(Et=>{var Qt;return{id:Et,username:((Qt=r.find(ur=>ur.id===Et))==null?void 0:Qt.username)||`User ${Et}`}}),matches:[],currentRound:1,totalRounds:Math.ceil(Math.log2(V.length)),status:"registration",winner:null};$(Ct),D("tournament")}else D("lobby");me(!1),o==null||o()},[e,r,o]),je=g.useCallback(()=>{var V;if(!E||!e)return;console.log("[Pong] Toggling ready state for lobby:",E.lobbyId);const z={lobbyId:E.lobbyId};((V=p.current)==null?void 0:V.readyState)===WebSocket.OPEN?(p.current.send(JSON.stringify({funcId:"toggle_player_ready_in_lobby",payload:z,target_container:"pong"})),console.log("[Pong] Sent toggle ready to backend")):console.warn("[Pong] WebSocket not open, cannot toggle ready")},[E,e,p]),J=g.useCallback(()=>{var F,ne;if(!E||!e)return;console.log("[Pong] Starting game from lobby:",E.lobbyId);const z=(G==null?void 0:G.tournamentId)||((F=E==null?void 0:E.tournament)==null?void 0:F.tournamentId)||(E==null?void 0:E.tournamentId);z&&(console.log("[Pong] Preserving tournament ID for game start:",z),ve(z));const V={lobbyId:E.lobbyId};((ne=p.current)==null?void 0:ne.readyState)===WebSocket.OPEN?(p.current.send(JSON.stringify({funcId:"start_game_from_lobby",payload:V,target_container:"pong"})),console.log("[Pong] Sent start game from lobby to backend"),H({...E,status:"starting"}),setTimeout(()=>{var W;console.log("[Pong] Fallback check: currentView after start request"),((W=p.current)==null?void 0:W.readyState)===WebSocket.OPEN&&p.current.send(JSON.stringify({funcId:"get_game_state",payload:{},target_container:"pong"}))},1500)):console.warn("[Pong] WebSocket not open, cannot start game")},[E,e,p,G]),be=g.useCallback(()=>{var z;E&&((z=p.current)==null?void 0:z.readyState)===WebSocket.OPEN&&(console.log("[Pong] Leaving lobby:",E.lobbyId),p.current.send(JSON.stringify({funcId:"leave_pong_lobby",payload:{lobbyId:E.lobbyId},target_container:"pong"}))),H(null),$(null),c?c():D("menu")},[E,p,c]),ae=g.useCallback(z=>{!G||!e||$({...G,players:G.players.map(V=>V.id===e.user.id?{...V,alias:z}:V)})},[G,e]),ee=g.useCallback(z=>{console.log("[Pong] Joining tournament match:",z)},[]);return g.useCallback(z=>{console.log("[Pong] Accepting invitation:",z);const V=s.find(F=>F.inviteId===z);if(V){if(a(F=>F.filter(ne=>ne.inviteId!==z)),V.lobbyData){const F=V.lobbyData,ne={lobbyId:F.lobbyId||Date.now(),gameMode:F.gameMode,players:(F.players||[]).map(W=>({id:W.userId||W.id,username:W.username,isReady:W.isReady||!1,isHost:W.isHost||!1})),settings:{ballCount:F.ballCount,maxScore:F.maxScore,allowPowerups:F.allowPowerups},status:F.status||"waiting"};if(H(ne),F.tournament){const W=F.tournament,K={tournamentId:W.tournamentId,name:W.name,mode:W.mode,players:(W.players||[]).map(it=>({id:it.userId,username:it.username,alias:it.alias})),matches:W.matches||[],currentRound:W.currentRound,totalRounds:W.totalRounds,status:W.status,winner:W.winnerId||null};$(K),D("tournament");return}D("lobby");return}D("lobby")}},[s]),g.useCallback(z=>{console.log("[Pong] Declining invitation:",z),a(V=>V.filter(F=>F.inviteId!==z))},[]),l.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gray-100/80 dark:bg-dark-600 p-4 space-y-4",children:[C==="menu"&&l.jsx("div",{className:"w-full max-w-2xl space-y-4",children:l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border shadow-lg p-8 text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:" Pong"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Play classic Pong against other players in various game modes"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>me(!0),className:"w-full py-3 bg-blue-500 text-white hover:bg-blue-600 transition-colors font-semibold",children:" Create Game"}),l.jsx("button",{onClick:()=>{if(e){const z={player_list:[e.user.id],balls:1};oe(T.ws.pong.startGame,z),D("game")}},className:"w-full py-3 bg-green-500 text-white hover:bg-green-600 transition-colors font-semibold",children:" Quick Play (Solo)"})]})]})}),C==="lobby"&&E&&e&&l.jsxs("div",{className:"w-full max-w-2xl",children:[l.jsx(V1,{lobby:E,currentUserId:e.user.id,onToggleReady:je,onStartGame:J,onLeaveLobby:be}),(G||E.tournamentId)&&l.jsx("div",{className:"mt-4 flex gap-2",children:l.jsx("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600",children:"View Tournament Stats"})}),L&&(G?l.jsx(hs,{tournamentId:G.tournamentId,onClose:()=>Q(!1)}):X?l.jsx(hs,{tournamentId:X,onClose:()=>Q(!1)}):E!=null&&E.tournamentId?l.jsx(hs,{tournamentId:E.tournamentId,onClose:()=>Q(!1)}):null)]}),C==="tournament"&&G&&e&&l.jsxs("div",{className:"w-full max-w-6xl overflow-x-auto",children:[l.jsx(G1,{tournament:G,currentUserId:e.user.id,onEnterAlias:ae,onJoinMatch:ee}),l.jsx("div",{className:"mt-4 flex gap-2",children:l.jsx("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600",children:"View Tournament Stats"})}),L&&l.jsx(hs,{tournamentId:G.tournamentId,onClose:()=>Q(!1)}),l.jsx("button",{onClick:be,className:"mt-4 px-6 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Leave Tournament"})]}),C==="game"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-full flex-1 min-h-[500px] shadow-lg border border-gray-800 bg-black overflow-hidden relative",children:l.jsx(W1,{gameState:x,darkMode:t})}),!x&&l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Waiting for game state..."}),l.jsx("button",{onClick:()=>{var z;E&&((z=p.current)==null?void 0:z.readyState)===WebSocket.OPEN&&(console.log("[Pong] Leaving lobby from game:",E.lobbyId),p.current.send(JSON.stringify({funcId:"leave_pong_lobby",payload:{lobbyId:E.lobbyId},target_container:"pong"}))),D("menu"),w(null),H(null)},className:"px-6 py-2 bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Leave Game"})]}),l.jsx(B1,{isOpen:n||Ce,onClose:()=>{me(!1),o==null||o()},roomUsers:r,currentUserId:((A=e==null?void 0:e.user)==null?void 0:A.id)||0,onCreateGame:le}),C==="game"&&l.jsxs("div",{style:{position:"fixed",right:16,bottom:16,zIndex:9999},children:[l.jsx("button",{onClick:()=>{console.log("[Pong][DEBUG] Overlay Start Game clicked");const V={player_list:Xe.split(",").map(F=>Number.parseInt(F.trim(),10)).filter(F=>!isNaN(F)),balls:M};oe(T.ws.pong.startGame,V)},style:{backgroundColor:"#2563eb",color:"white",padding:"8px 12px",borderRadius:8},children:"DEBUG: Start Game"}),k!==null&&l.jsx("div",{style:{marginTop:8},children:l.jsx("button",{onClick:()=>{console.log("[Pong][DEBUG] Overlay Declare Ready clicked, board:",k);const z={game_id:k};oe(T.ws.pong.userReportsReady,z)},style:{backgroundColor:"#059669",color:"white",padding:"8px 12px",borderRadius:8},children:"DEBUG: Declare Ready"})}),(G||X||(E==null?void 0:E.tournamentId))&&l.jsx("div",{style:{marginTop:8},children:l.jsx("button",{onClick:async()=>{var F,ne;const z=(G==null?void 0:G.tournamentId)||X||(E==null?void 0:E.tournamentId),V=((F=e==null?void 0:e.user)==null?void 0:F.id)||0;console.log("[Pong][DEBUG] Completing tournament",z,"winner:",V);try{const K=await(await fetch("/public_api/pong/debug/complete_tournament",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tournamentId:z,winnerId:V})})).json();console.log("[Pong][DEBUG] Tournament completed:",K),K.tournament?($(K.tournament),ve(null),alert(`Tournament completed! Winner: ${K.tournament.winnerId}
On-chain TX: ${((ne=K.tournament.onchainTxHashes)==null?void 0:ne.join(", "))||"none"}`)):alert("Error: "+(K.message||JSON.stringify(K)))}catch(W){console.error("[Pong][DEBUG] Failed to complete tournament:",W),alert("Failed to complete tournament: "+W)}},style:{backgroundColor:"#dc2626",color:"white",padding:"8px 12px",borderRadius:8},children:" DEBUG: Complete Tournament"})})]})]})}function md({userId:e,username:t,initialEnabled:n,isGuest:r,onActiveStateChange:o,startWithSetup:s}){const[a,i]=g.useState(n??null),[u,c]=g.useState(!0),[p,f]=g.useState(s??!1),[h,b]=g.useState(!1);g.useEffect(()=>{x()},[e]),g.useEffect(()=>{s&&f(!0)},[s]);const x=async()=>{try{const d=localStorage.getItem("userData");if(d){const v=JSON.parse(d);if((v==null?void 0:v.has2FA)!==void 0){i(v.has2FA),c(!1);return}}const y=await fetch(`/public_api/auth/2fa/status/${e}`);if(y.ok){const v=await y.json();i(v.enabled)}else i(n??!1)}catch(d){console.error("Failed to check 2FA status:",d),i(n??!1)}finally{c(!1)}},w=d=>{try{const y=localStorage.getItem("userData");if(y){const v=JSON.parse(y);v.has2FA=d,localStorage.setItem("userData",JSON.stringify(v))}}catch(y){console.error("Failed to update localStorage:",y)}},S=()=>{f(!1),i(!0),w(!0),o==null||o(!1)},m=()=>{b(!1),i(!1),w(!1),o==null||o(!1)};return u?l.jsx("div",{className:"p-4 bg-gray-50/40 dark:bg-gray-900/70",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700/50 w-1/3 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700/50 w-2/3"})]})}):p?l.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center",onClick:()=>{f(!1),o==null||o(!1)},children:l.jsx("div",{className:"mx-4 w-full max-w-md",onClick:d=>d.stopPropagation(),children:l.jsx(Qh,{userId:e,username:t,onSetupComplete:S,onCancel:()=>{f(!1),o==null||o(!1)}})})}):h?l.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center",onClick:()=>{b(!1),o==null||o(!1)},children:l.jsx("div",{className:"mx-4 w-full max-w-md",onClick:d=>d.stopPropagation(),children:l.jsx(Kh,{userId:e,onDisableComplete:m,onCancel:()=>{b(!1),o==null||o(!1)}})})}):l.jsxs("div",{className:"p-4 bg-gray-50/40 dark:bg-gray-900",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a?"Your account is protected with 2FA":"Add an extra layer of security to your account"})]}),l.jsx("div",{className:"flex items-center",children:a?l.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:[l.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Enabled"]}):l.jsx("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium bg-gray-200 dark:bg-gray-700/50 text-gray-800 dark:text-gray-300",children:"Disabled"})})]}),l.jsx("div",{className:"mt-3",children:r?l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"Two-factor authentication is not available for guest accounts."}):a?l.jsx("button",{onClick:()=>{b(!0),o==null||o(!0)},className:"text-sm px-4 py-2 bg-red-600 hover:bg-red-700 text-white transition-colors",children:"Disable 2FA"}):l.jsx("button",{onClick:()=>{f(!0),o==null||o(!0)},className:"text-sm px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:"Enable 2FA"})})]})}function J1(e){if(!e||typeof e!="string")return console.warn("[JWT] Invalid token: not a string"),null;const t=e.split(".");if(t.length!==3)return console.warn("[JWT] Invalid token: wrong number of parts"),null;try{const r=t[1].replace(/-/g,"+").replace(/_/g,"/"),o=atob(r),s=JSON.parse(o);if(typeof s.uid!="number")return console.warn("[JWT] Invalid token: missing or invalid uid"),null;if(s.exp&&typeof s.exp=="number"){const a=Math.floor(Date.now()/1e3);if(s.exp<a)return console.warn("[JWT] Token has expired"),null}return s}catch(n){return console.error("[JWT] Failed to decode token:",n),null}}function Q1(){const e=localStorage.getItem("jwt");if(!e)return null;const t=J1(e);return(t==null?void 0:t.uid)??null}function Im({userId:e,isOpen:t,onClose:n,onStartDM:r,showToast:o}){const{socket:s,payloadReceived:a,isConnected:i,sendMessage:u}=Wo(),[c,p]=g.useState(null),[f,h]=g.useState(!0),[b,x]=g.useState(null),[w,S]=g.useState(!1),[m,d]=g.useState(""),[y,v]=g.useState(""),[N,k]=g.useState(""),[I,C]=g.useState(null),[D,E]=g.useState(null),[H,G]=g.useState(null),[$,X]=g.useState(!1),[ve,Ce]=g.useState(!1),[me,L]=g.useState(!1),[Q,Y]=g.useState([]),ge=g.useRef(null),oe=g.useRef(null),Xe=g.useCallback((J,be)=>{const ae={funcId:J,payload:be,target_container:"users"};console.log("[v0] Sending profile request:",ae),console.log("[v0] Payload detail:",JSON.stringify(be,null,2)),console.log("[v0] Payload type:",typeof be),u(ae)||(console.warn("[v0] Socket not connected, message queued"),h(!1),x("WebSocket is not connected. Reconnecting..."))},[u]);g.useEffect(()=>{const J=Q1();J!==null?C(J):console.warn("[v0] Could not get user ID from JWT")},[]),g.useEffect(()=>(t&&e&&(console.log("[v0] ProfileComponent: Fetching profile for userId:",e),h(!0),x(null),oe.current&&clearTimeout(oe.current),Xe(T.ws.users.requestUserProfileData.funcId,e),oe.current=setTimeout(()=>{h(!1),x("Request timed out. The profile endpoint may not be implemented or is not responding."),console.error("[v0] Profile request timed out after 5 seconds")},5e3)),()=>{oe.current&&(clearTimeout(oe.current),oe.current=null)}),[t,e]),g.useEffect(()=>{var J,be,ae;if(a){if(console.log("[v0] Profile component received payload:",a),console.log("[v0] Expected funcId:",T.ws.users.requestUserProfileData.funcId),console.log("[v0] Received funcId:",a.funcId),a.funcId===T.ws.users.requestUserProfileData.funcId)if(oe.current&&(clearTimeout(oe.current),oe.current=null),console.log("[v0] Profile data response matched! Code:",a.code),a.code===0){console.log("[v0] Profile data:",a.payload);const ee=a.payload,A={userId:ee.id,username:ee.username,email:ee.email,avatar:ee.avatarUrl||void 0,bio:ee.bio,status:"online",joinDate:ee.createdAt?new Date(ee.createdAt*1e3).toISOString():void 0,stats:ee.stats,isGuest:ee.accountType===1,matchHistory:[]};console.log("[v0] Transformed profile:",A),p(A),d(A.bio||""),v(A.username),k(A.email||""),h(!1),x(null)}else console.error("[v0] Failed to fetch profile:",a.payload),h(!1),x(((J=a.payload)==null?void 0:J.message)||"Failed to load profile");if(a.funcId===T.ws.users.updateProfile.funcId&&a.code===0&&(p(ee=>ee?{...ee,bio:a.payload.bio}:null),S(!1)),a.funcId===T.ws.users.requestFriendship.funcId){if(a.code===0)console.log("[ProfileComponent] Friend request sent successfully"),o&&o("Friend request sent successfully!","success");else if(console.error("[ProfileComponent] Failed to send friend request:",a),o){const ee=((be=a.payload)==null?void 0:be.message)||((ae=a.payload)==null?void 0:ae.error)||"Failed to send friend request";o(ee,"error")}}if(a.funcId===T.ws.users.fetchUserGameResults.funcId&&a.code===0){const ee=Array.isArray(a.payload)?a.payload:[];Y(ee);const A=ee.length,z=ee.filter(F=>F.rank===1).length,V=A-z;p(F=>F&&{...F,stats:{gamesPlayed:A,wins:z,losses:V},matchHistory:ee.map(ne=>({id:ne.id,score:ne.score,rank:ne.rank}))})}}},[a,o]),g.useEffect(()=>((async()=>{if(c!=null&&c.avatar)try{const be=localStorage.getItem("jwt");if(!be){console.warn("[v0] No JWT token found; cannot fetch avatar");return}const ae=await fetch(T.http.users.fetchUserAvatar.endpoint,{method:"POST",headers:{Authorization:`Bearer ${be}`,"Content-Type":"application/json"},body:JSON.stringify({file:c.avatar})});if(!ae.ok){console.error("[v0] Failed to fetch avatar:",ae.status);return}const ee=await ae.text(),A=ee.startsWith("data:")?ee.split(",")[1]:ee,z=atob(A),V=z.length,F=new Uint8Array(V);for(let K=0;K<V;K++)F[K]=z.charCodeAt(K);const ne=new Blob([F],{type:"image/png"}),W=URL.createObjectURL(ne);E(W)}catch(be){console.error("[v0] Error loading avatar:",be)}})(),()=>{D&&URL.revokeObjectURL(D)}),[c==null?void 0:c.userId]);const We=J=>{var ae;const be=(ae=J.target.files)==null?void 0:ae[0];if(be){if(be.size>5*1024*1024){x("Avatar file must be less than 5MB");return}G(be);const ee=URL.createObjectURL(be);E(ee)}},M=async()=>{try{const J=ae=>new Promise((ee,A)=>{const z=new FileReader;z.onerror=()=>A(new Error("Failed to read file")),z.onload=()=>{const F=z.result.split(",")[1];ee(F)},z.readAsDataURL(ae)}),be=H?{filename:H.name,data:await J(H)}:void 0;if(Xe(T.ws.users.updateProfile.funcId,{alias:y,email:N,bio:m,pfp:be}),await new Promise(ae=>setTimeout(ae,800)),H){const ae=await fetch("/api/users/pfp",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`,"Content-Type":"application/json"},body:JSON.stringify({file:H.name})});if(ae.ok){const A=`data:image/png;base64,${await ae.text()}`;E(A),c&&p({...c,avatar:H.name});const z=localStorage.getItem("userData");if(z){const V=JSON.parse(z);V.avatarUrl=H.name,localStorage.setItem("userData",JSON.stringify(V)),window.dispatchEvent(new Event("profileUpdated"))}}}S(!1),G(null)}catch(J){console.error("Error saving profile:",J),o&&o("Failed to save profile","error")}},re=()=>{e&&(console.log("[ProfileComponent] Sending friend request to userId:",e),Xe(T.ws.users.requestFriendship.funcId,e))},le=()=>{if(!e)return;const J={funcId:T.ws.users.fetchUserGameResults.funcId,payload:e,target_container:"users"};u(J),L(!0)},je=I===e;return t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:n,children:l.jsx("div",{className:"bg-white/50 dark:bg-dark-800 shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",onClick:J=>J.stopPropagation(),children:f?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),l.jsx("p",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading profile..."})]}):b?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-700 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Error"}),l.jsx("button",{onClick:n,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:""})]}),l.jsxs("div",{className:"py-8 px-6 text-center",children:[l.jsx("div",{className:"text-red-600 mb-4 text-4xl",children:""}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:b}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Check the console for more details. The backend may need to implement the profile endpoint."}),l.jsx("button",{onClick:n,className:"mt-4 px-4 py-2 bg-gray-200 dark:bg-dark-700 text-gray-800 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-dark-600 transition-colors",children:"Close"})]})]}):c?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-700 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"User Profile"}),l.jsx("button",{onClick:n,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-2xl leading-none",children:""})]}),l.jsx("div",{className:"p-6 space-y-6 overflow-y-auto",children:$&&je&&I&&!c.isGuest?l.jsx(md,{userId:I,username:c.username,isGuest:c.isGuest||!1,onActiveStateChange:J=>{X(J),J||Ce(!1)},startWithSetup:ve}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"relative h-20 w-20 rounded-full overflow-hidden bg-gray-200 dark:bg-dark-700",children:[c.avatar?l.jsx("img",{src:D||"/placeholder.svg",alt:c.username,className:"h-full w-full object-cover"}):l.jsx("div",{className:"h-full w-full flex items-center justify-center bg-blue-500 text-white text-2xl font-bold",children:c.username.slice(0,2).toUpperCase()}),je&&w&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:ge,onChange:We}),l.jsx("button",{onClick:()=>{var J;return(J=ge.current)==null?void 0:J.click()},className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs py-1 text-center",children:"Change Avatar"})]})]}),l.jsxs("div",{children:[w&&je?l.jsx("input",{type:"text",value:y,onChange:J=>v(J.target.value),className:"text-2xl font-bold border-b border-gray-300 dark:border-dark-600 focus:outline-none focus:border-blue-500 bg-white/50 dark:bg-dark-800 text-gray-900 dark:text-white"}):l.jsx("h3",{className:"text-2xl font-bold",style:{color:dt(e,!0)},children:c.username}),c.status&&l.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${c.status==="online"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":c.status==="in-game"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-gray-100/40 dark:bg-dark-700 text-gray-800 dark:text-gray-200"}`,children:c.status})]})]}),je&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Email"}),w?l.jsx("input",{type:"email",value:N,onChange:J=>k(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/50 dark:bg-dark-700 text-gray-900 dark:text-white"}):l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.email})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Bio"}),w?l.jsx("div",{className:"space-y-2",children:l.jsx("textarea",{value:m,onChange:J=>d(J.target.value),placeholder:"Tell us about yourself...",className:"w-full min-h-[100px] px-3 py-2 border border-gray-300 dark:border-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/50 dark:bg-dark-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})}):l.jsx("div",{children:l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.bio||"No bio yet"})})]}),je&&l.jsx("div",{className:"flex space-x-2 mt-4",children:w?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm",children:"Save Changes"}),l.jsx("button",{onClick:()=>{S(!1),d(c.bio||""),v(c.username),k(c.email||""),G(null)},className:"px-4 py-2 bg-gray-200 dark:bg-dark-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-dark-600 transition-colors text-sm",children:"Cancel"})]}):l.jsx("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm",children:"Edit Profile"})}),je&&!w&&I&&!c.isGuest&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-dark-700",children:[l.jsx("h4",{className:"text-sm font-semibold mb-3 text-gray-900 dark:text-white",children:"Security Settings"}),l.jsx(md,{userId:I,username:c.username,isGuest:c.isGuest||!1,onActiveStateChange:J=>{X(J),J&&Ce(!0)}}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("navigate",{detail:"gdpr"}))}catch{}n()},className:"px-3 py-2 mt-2 bg-gray-100 dark:bg-dark-700 text-sm hover:bg-gray-200 dark:hover:bg-dark-600 rounded",children:"Manage My Data (GDPR)"})})]}),c.stats&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-white",children:"Stats"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.stats.gamesPlayed}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Games Played"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.stats.wins}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Wins"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:c.stats.losses}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Losses"})]})]}),l.jsx("div",{className:"mt-3 flex justify-center",children:l.jsx("button",{onClick:le,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"View Match History"})}),me&&l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsx("h5",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Recent Matches"}),Q.slice(0,5).map(J=>l.jsxs("div",{className:"flex justify-between text-[11px] bg-gray-50/40 dark:bg-gray-900/70 px-2 py-1 rounded border border-gray-200 dark:border-gray-700",children:[l.jsxs("span",{children:["#",J.id,"  Score ",J.score]}),l.jsx("span",{className:J.rank===1?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:J.rank===1?"Win":"Loss"})]},J.id)),Q.length>5&&l.jsxs("div",{className:"text-center text-[10px] text-gray-500 dark:text-gray-400",children:["Showing 5 of ",Q.length]})]})]}),!je&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:re,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Friend"}),l.jsx("button",{onClick:()=>{r&&e&&(r(e),n())},className:"flex-1 px-4 py-2 bg-white/50 dark:bg-dark-700 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-50/40 dark:hover:bg-dark-600 transition-colors",children:"Send Message"})]})]})})]}):l.jsx("div",{className:"py-8 px-6 text-center text-gray-500 dark:text-gray-400",children:"Profile not found"})})}):null}const Cm=g.createContext(void 0);function K1({children:e}){const[t,n]=g.useState([]),[r,o]=g.useState(()=>{}),[s,a]=g.useState(()=>{}),[i,u]=g.useState([]),[c,p]=g.useState(()=>{}),[f,h]=g.useState(()=>{}),[b,x]=g.useState([]),[w,S]=g.useState(()=>{}),[m,d]=g.useState(()=>{}),y=g.useCallback(D=>{r(D)},[r]),v=g.useCallback(D=>{s(D)},[s]),N=g.useCallback(D=>{c(D)},[c]),k=g.useCallback(D=>{f(D)},[f]),I=g.useCallback(D=>{w(D)},[w]),C=g.useCallback(D=>{m(D)},[m]);return l.jsx(Cm.Provider,{value:{pendingRequests:t,setPendingRequests:n,handleAcceptFriendship:y,handleDenyFriendship:v,setAcceptHandler:o,setDenyHandler:a,roomInvites:i,setRoomInvites:u,handleAcceptRoomInvite:N,handleDeclineRoomInvite:k,setAcceptRoomInviteHandler:p,setDeclineRoomInviteHandler:h,dmInvites:b,setDmInvites:x,handleAcceptDmInvite:I,handleDeclineDmInvite:C,setAcceptDmInviteHandler:S,setDeclineDmInviteHandler:d},children:e})}function Em(){const e=ht.useContext(Cm);if(!e)throw new Error("useFriendshipContext must be used within FriendshipProvider");return e}const q1=[{name:"me",description:"Send an action/emote message"},{name:"whisper",description:"(alias /w) Not implemented private whisper",aliases:["w"]},{name:"invite",description:"Invite user(s) to current room: /invite user1 user2 ..."},{name:"debug",description:"Send raw WebSocket message (debug)"},{name:"help",description:"Show available commands"}],Y1=({messages:e,onSendMessage:t,currentRoom:n,currentRoomName:r,isJoined:o=!1,onJoinRoom:s,onInvitePong:a,onBlockUser:i,blockedUserIds:u,onOpenProfile:c,roomUsers:p,selfUserId:f})=>{const[h,b]=g.useState(""),[x,w]=g.useState(0),[S,m]=g.useState(!1),d=g.useRef(null),[y,v]=g.useState([]),[N,k]=g.useState(-1),I=h.startsWith("/"),C=I?h.substring(1).toLowerCase():"",D=I?q1.filter($=>$.name.startsWith(C)||$.aliases&&$.aliases.some(X=>X.startsWith(C))):[];g.useEffect(()=>{var $;($=d.current)==null||$.scrollIntoView({behavior:"smooth"})},[e]),g.useEffect(()=>{m(I&&D.length>0),w(0)},[I,D.length]);const E=()=>{h.trim()&&(h.startsWith("/")&&(v($=>[h,...$.slice(0,49)]),k(-1)),t(h),b(""),m(!1))},H=$=>{b(`/${$.name} `),m(!1)},G=$=>{if(!S){if($.key==="Enter")$.preventDefault(),E();else if($.key==="ArrowUp"){if(y.length>0){$.preventDefault();const X=Math.min(N+1,y.length-1);k(X),b(y[X])}}else if($.key==="ArrowDown")if(N>0){$.preventDefault();const X=N-1;k(X),b(y[X])}else N===0&&($.preventDefault(),k(-1),b(""));return}$.key==="ArrowDown"?($.preventDefault(),w(X=>Math.min(X+1,D.length-1))):$.key==="ArrowUp"?($.preventDefault(),w(X=>Math.max(X-1,0))):$.key==="Tab"?($.preventDefault(),D.length>0&&H(D[x])):$.key==="Enter"?($.preventDefault(),E()):$.key==="Escape"&&m(!1)};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border h-[600px] flex flex-col overflow-hidden",role:"main","aria-label":"Chat interface",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gradient-to-r from-blue-500/70 to-purple-500/70",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",id:"chat-room-title",children:r?`#${r}`:"Select a Room"}),n&&(o?l.jsx("button",{onClick:()=>a(p),className:"px-3 py-1 text-sm bg-pink-500 text-white hover:bg-pink-600 transition-all","aria-label":"Invite users to pong game",children:" Invite to Pong"}):l.jsx("button",{onClick:()=>n&&s&&s(n),className:"px-3 py-1 text-sm bg-blue-500 text-white hover:bg-blue-600 transition-all","aria-label":"Join this room",children:" Join Room"}))]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",role:"log","aria-live":"polite","aria-label":"Chat messages",children:[e.length>0?e.filter($=>$.userId===void 0||!u.includes($.userId)).map(($,X)=>{const ve=$.userId!==void 0?dt($.userId,!0):void 0,Ce=$.userId!==void 0&&u.includes($.userId);return l.jsx("div",{className:"flex justify-start",children:l.jsxs("div",{className:"px-4 py-2 max-w-[70%] shadow-sm glass-light-xs dark:glass-dark-xs glass-border text-gray-900",role:"article","aria-label":`Message from ${$.user}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{onClick:()=>c($.user),className:"block text-xs font-bold mb-1 hover:underline cursor-pointer",style:{color:ve},children:$.user}),$.userId!==void 0&&$.userId!==f&&$.userId!==1&&l.jsx("button",{onClick:()=>i($.userId),className:"text-xs text-red-500 hover:underline",children:Ce?"Unblock":"Block"})]}),l.jsx("p",{className:"text-sm",children:$.content}),$.timestamp&&l.jsx("span",{className:"block text-xs text-gray-400 mt-1",children:new Date($.timestamp).toLocaleTimeString()})]})},X)}):l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("p",{className:"text-gray-400 text-center text-sm italic",children:n?"No messages yet. Start the conversation!":"Join a room to start chatting"})}),l.jsx("div",{ref:d})]}),n&&l.jsxs("div",{className:"w-48 glass-light-xs dark:glass-dark-xs glass-border overflow-y-auto",role:"complementary","aria-label":"Online users list",children:[l.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["Users (",p.length,")"]})}),l.jsxs("div",{className:"p-2 space-y-1",children:[p.map($=>{const X=dt($.id,!0);return l.jsxs("div",{onClick:()=>c($.username),className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700/40 cursor-pointer transition-colors",role:"button",tabIndex:0,"aria-label":`View ${$.username}'s profile, ${$.onlineStatus===1?"online":"offline"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${$.onlineStatus===1?"bg-green-500":"bg-gray-400"}`}),l.jsx("span",{className:"text-sm font-bold truncate",style:{color:X},children:$.username})]},$.id)}),p.length===0&&l.jsx("div",{className:"text-xs text-gray-400 text-center py-4",children:"No users"})]})]})]}),l.jsx("div",{className:"p-4 glass-light-xs dark:glass-dark-xs glass-border",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",placeholder:n?"Type a message...":"Select a room first...",className:`w-full border rounded-full px-4 py-2 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 glass-light-xs dark:glass-dark-xs ${I?"border-purple-500 text-purple-700 focus:ring-purple-400":"border-gray-300 dark:border-gray-600 focus:ring-blue-400"} disabled:bg-gray-100/30 dark:disabled:bg-gray-900/30`,value:h,onChange:$=>b($.target.value),onKeyDown:G,"aria-label":"Message input","aria-describedby":"chat-room-title",disabled:!n}),S&&I&&D.length>0&&l.jsxs("div",{className:"absolute left-0 right-0 bottom-full mb-2 glass-light-sm dark:glass-dark-sm glass-border shadow-lg z-50 overflow-hidden max-h-64 overflow-y-auto",role:"listbox","aria-label":"Command suggestions",children:[D.map(($,X)=>l.jsxs("button",{type:"button",onClick:()=>H($),className:`w-full text-left px-4 py-2 text-sm flex flex-col ${X===x?"bg-purple-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"}`,role:"option","aria-selected":X===x,children:[l.jsxs("span",{className:"font-medium",children:["/",$.name,$.aliases?` (${$.aliases.map(ve=>`/${ve}`).join(", ")})`:""]}),l.jsx("span",{className:X===x?"text-purple-100":"text-gray-500 dark:text-gray-400",children:$.description})]},$.name)),D.length===0&&l.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No matching commands"}),l.jsxs("div",{className:"px-4 py-1 text-[11px] bg-gray-50 dark:bg-gray-900/70 text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700",children:[l.jsx("span",{className:"mr-2",children:" to navigate"}),l.jsx("span",{className:"mr-2",children:"Tab to autocomplete"}),l.jsx("span",{children:"Enter to send"})]})]})]}),l.jsx("button",{onClick:E,disabled:!n,className:`px-6 py-2 rounded-full active:scale-95 transition-all ${n?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 cursor-not-allowed"}`,children:"Send"})]})})]})},X1=({rooms:e,currentRoom:t,onSelectRoom:n,onCreateRoom:r,onRefreshRooms:o,onLeaveRoom:s,onStartDM:a,selfUserId:i,userMap:u})=>{const[c,p]=g.useState(""),[f,h]=g.useState(!1),b=g.useCallback(w=>{try{if((w==null?void 0:w.roomType)===2&&typeof w.roomName=="string"&&w.roomName.startsWith("DM ")){const S=w.roomName.split(" ");if(S.length===3){const m=Number(S[1]),d=Number(S[2]);if(!Number.isNaN(m)&&!Number.isNaN(d)){const y=m===i?d:d===i?m:null;if(y!=null)return u[y]||`DM with User ${y}`}}}}catch{}return w.roomName},[i,u]),x=()=>{c.trim()&&(r(c),p(""),h(!1))};return l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm glass-border h-[600px] flex flex-col overflow-hidden",role:"navigation","aria-label":"Chat rooms list",children:[l.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-500/70 to-pink-500/70",children:l.jsx("h2",{className:"text-lg font-semibold text-white",id:"room-list-title",children:"Chat Rooms"})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:e.length>0?e.map(w=>l.jsxs("div",{className:`relative w-full text-left px-4 py-3 transition-all cursor-pointer ${t===w.roomId?"bg-blue-500 text-white shadow-md":"bg-gray-50 dark:bg-gray-700/45 hover:bg-gray-100 dark:hover:bg-gray-600/45 text-gray-800 dark:text-gray-200"}`,onClick:()=>n(w.roomId),role:"button","aria-label":`Join room ${b(w)}`,"aria-current":t===w.roomId?"true":"false",children:[l.jsx("div",{className:"font-medium pr-6",children:b(w)}),l.jsxs("div",{className:"text-xs opacity-75",children:["ID: ",w.roomId]}),l.jsx("button",{onClick:S=>{S.stopPropagation(),s(w.roomId)},className:`absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-lg font-bold rounded hover:bg-red-500 hover:text-white transition-all ${t===w.roomId?"text-white/70 hover:text-white":"text-gray-400 hover:text-white"}`,"aria-label":`Leave room ${b(w)}`,children:""})]},w.roomId)):l.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-center text-sm italic py-8",children:"No rooms available. Create one!"})}),l.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 space-y-2",children:f?l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"text",placeholder:"Room name...",value:c,onChange:w=>p(w.target.value),onKeyDown:w=>w.key==="Enter"&&x(),className:"w-full border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-400 dark:bg-gray-700/70 dark:text-gray-200",autoFocus:!0,"aria-label":"New room name"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:x,className:"flex-1 bg-purple-500 text-white px-3 py-2 hover:bg-purple-600 text-sm","aria-label":"Create new room",children:"Create"}),l.jsx("button",{onClick:()=>{h(!1),p("")},className:"flex-1 bg-gray-200 text-gray-700 px-3 py-2 hover:bg-gray-300 text-sm","aria-label":"Cancel room creation",children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>h(!0),className:"w-full bg-purple-500 text-white px-4 py-2 hover:bg-purple-600 transition-all","aria-label":"Show create room form",children:"+ Create Room"}),l.jsx("button",{onClick:o,className:"w-full bg-gray-100 text-gray-700 px-4 py-2 hover:bg-gray-200 transition-all","aria-label":"Refresh rooms list",children:" Refresh Rooms"}),l.jsx("button",{onClick:()=>{const w=prompt("Enter username or user ID to start DM:");w&&a(w)},className:"w-full bg-blue-500 text-white px-4 py-2 hover:bg-blue-600 transition-all","aria-label":"Start direct message",children:" Direct Message"})]})})]})};function eb({selfUserId:e,showToast:t,onOpenPongInvite:n}){const{socket:r,payloadReceived:o,isConnected:s,sendMessage:a}=Wo(),{setPendingRequests:i,setAcceptHandler:u,setDenyHandler:c,setRoomInvites:p,setAcceptRoomInviteHandler:f,setDeclineRoomInviteHandler:h,setDmInvites:b,setAcceptDmInviteHandler:x,setDeclineDmInviteHandler:w}=Em(),[S,m]=g.useState([]),[d,y]=g.useState(null),v=g.useRef(()=>{}),[N,k]=g.useState(null),[I,C]=g.useState(null),[D,E]=g.useState({}),[H,G]=g.useState([]),[$,X]=g.useState(null),[ve,Ce]=g.useState(!1),[me,L]=g.useState({}),[Q,Y]=g.useState([]),[ge,oe]=g.useState(null),[Xe,We]=g.useState([]),[M,re]=g.useState(null),[le,je]=g.useState([]),[J,be]=g.useState([]),ae=d!=null?D[String(d)]||[]:[],ee=g.useCallback(R=>{if(!R)return null;try{if((R==null?void 0:R.roomType)===2&&typeof R.roomName=="string"&&R.roomName.startsWith("DM ")){const ie=R.roomName.split(" ");if(ie.length===3){const de=Number(ie[1]),Se=Number(ie[2]);if(!Number.isNaN(de)&&!Number.isNaN(Se)){const Be=de===e?Se:Se===e?de:null;if(Be!=null)return me[Be]||`DM with User ${Be}`}}}}catch{}return(R==null?void 0:R.roomName)||null},[e,me]),A=g.useCallback((R,ie,de)=>{let Se=de;Se||(R.includes("friendship")||R.includes("user_connections")||R.includes("confirm_")||R.includes("deny_")||R.includes("request_")||R==="user_profile"||R.includes("block")||R.includes("unblock")?Se="users":Se="chat");const Be={funcId:R,payload:ie,target_container:Se};console.log("[v0] Sending to socket:",Be),a(Be)||console.warn("[v0] Socket not connected, message queued:",R)},[a]);g.useEffect(()=>{v.current=A},[A]),g.useEffect(()=>{var R,ie,de,Se,Be,Jr;if(o)switch(!((R=o.funcId)!=null&&R.includes("game_state"))&&!((ie=o.source_container)!=null&&ie.includes("pong"))&&console.log("[Chat] Received:",o.funcId),o.funcId){case T.ws.users.fetchUserConnections.funcId:console.log("Setting user connections:",o.payload);const Ve=o.payload||[],cr={};Ve.forEach(_=>{_&&typeof _.id=="number"&&typeof _.username=="string"&&(cr[_.id]=_.username)}),L(_=>({..._,...cr})),console.log("Updated userMap with",Object.keys(cr).length,"users from connections");const Qr=Ve.filter(_=>_.status===1&&_.friendId===e).map(_=>({userId:_.id,username:_.username,alias:_.alias}));Y(Qr),console.log("Pending friendship requests (received):",Qr);const vn=Ve.filter(_=>_.status===3).map(_=>_.friendId);G(vn),console.log("Blocked users:",vn);break;case T.ws.users.blockUser.funcId:case T.ws.users.unblockUser.funcId:console.log("Block/unblock response, refreshing connections"),o.code===0&&A(T.ws.users.fetchUserConnections.funcId,null);break;case T.ws.chat.sendMessage.funcId:try{const _=o.payload;if(console.log("=== Incoming message ==="),console.log("Full payload:",JSON.stringify(_,null,2)),console.log("userId:",_.userId),console.log("userId type:",typeof _.userId),!_||!_.roomId){console.error("Invalid message payload:",_);break}if(!_.userId||typeof _.userId!="number"){console.error(" Invalid userId in message:",_.userId,"Full payload:",_),console.error("Message will be skipped because userId is missing or invalid");break}const fe=_.messageDate<3250368e4?new Date(_.messageDate*1e3).toISOString():new Date(_.messageDate).toISOString();let ue=me[_.userId];ue||(console.log(`Username not in map for user ${_.userId}, fetching...`),z(_.userId),ue=`User ${_.userId}`);const se={user:ue,content:_.messageString,timestamp:fe,userId:_.userId};console.log(" Transformed message:",se);const ke=String(_.roomId);E(pe=>({...pe,[ke]:[...pe[ke]||[],se]}))}catch(_){console.error("Error processing message:",_)}break;case T.ws.chat.listRooms.funcId:console.log("Setting rooms:",o.payload);const ut=o.payload;if(console.log("Number of rooms received:",ut==null?void 0:ut.length),Array.isArray(ut)&&ut.forEach(_=>{console.log(`  - Room ${_.roomId}: "${_.roomName}" (type: ${_.roomType})`)}),m(o.payload),ge!=null&&Array.isArray(ut)){const _=ut.find(fe=>{if(fe.roomType!==2||typeof fe.roomName!="string"||!fe.roomName.startsWith("DM "))return!1;const ue=fe.roomName.split(" ");if(ue.length!==3)return!1;const se=Number(ue[1]),ke=Number(ue[2]);return Number.isNaN(se)||Number.isNaN(ke)?!1:(se===e||ke===e)&&(se===ge||ke===ge)});_&&(ne(_.roomId),oe(null))}const xn=o.payload;Array.isArray(xn)&&(console.log("Fetching data for",xn.length,"rooms to populate usernames"),xn.forEach((_,fe)=>{setTimeout(()=>{A(T.ws.chat.getRoomData.funcId,{roomId:_.roomId})},fe*50)}));break;case T.ws.chat.joinRoom.funcId:try{console.log("Joined room - full payload:",JSON.stringify(o.payload,null,2));const _=o.payload;if(_.roomId){const fe=String(_.roomId);console.log("Successfully joined room:",fe),D[fe]&&D[fe].length>0?console.log("Found",D[fe].length,"messages in memory for this room"):(console.log("No messages in memory for this room - starting fresh"),E(ue=>({...ue,[fe]:ue[fe]||[]}))),Number(_.roomId)===d&&typeof _.user=="number"&&_.user!==e?(console.log(`[joinRoom] User ${_.user} joined our current room ${_.roomId}, refreshing user list`),A(T.ws.chat.getRoomData.funcId,{roomId:Number(_.roomId)})):Number(_.roomId)===d&&_.user===e&&console.log(`[joinRoom] We joined room ${_.roomId} (already refreshed by handleSelectRoom)`)}}catch(_){console.error("Error processing join room:",_)}break;case T.ws.chat.addRoom.funcId:if(o.code===0)console.log("Room added, refreshing list"),A(T.ws.chat.listRooms.funcId,{});else{const _=((de=o.payload)==null?void 0:de.message)||((Se=o.payload)==null?void 0:Se.error)||"Failed to create room. Please check room name (min 3 characters, alphanumeric only).";console.error("Failed to create room:",_),t&&t(_,"error")}break;case T.ws.chat.leaveRoom.funcId:try{console.log("Leave room response - full payload:",JSON.stringify(o.payload,null,2));const _=o.payload;if("roomId"in _&&o.code===0){const fe=String(_.roomId),ue=Number(_.roomId);console.log("Successfully left room:",fe),ue===d&&"user"in _&&_.user!==e&&(console.log(`[leaveRoom] User ${_.user} left our current room ${_.roomId}, refreshing user list`),A(T.ws.chat.getRoomData.funcId,{roomId:ue})),"user"in _&&_.user===e&&(console.log(`[leaveRoom] We left room ${ue}, removing from list`),m(se=>{const ke=se.filter(pe=>pe.roomId!==ue);return console.log(`[leaveRoom] Rooms before: ${se.length}, after: ${ke.length}`),ke}),E(se=>{const ke={...se};return delete ke[fe],ke}),A(T.ws.chat.listRooms.funcId,{}),t&&t("You have left the room.","success"))}else if(o.code!==0){const fe="message"in _?_.message:"Failed to leave room.";console.error("Failed to leave room:",fe),t&&t(fe,"error")}}catch(_){console.error("Error processing leave room:",_)}break;case T.ws.chat.addUserToRoom.funcId:try{const _=o.payload;console.log("Invite sent to user for room:",_),_&&typeof _.user=="number"&&(me[_.user]||z(_.user),_.user===e&&typeof _.roomId=="number"&&(console.log("[addUserToRoom] We were invited to room",_.roomId,"- fetching room data"),A(T.ws.chat.getRoomData.funcId,{roomId:_.roomId})))}catch(_){console.error("Error handling addUserToRoom event:",_)}break;case T.ws.chat.getRoomData.funcId:try{console.log("Received full room data:",o.payload);const _=o.payload,fe=String(_.room.roomId);if(Array.isArray(_.users)){const ue={};if(_.users.forEach(se=>{se&&typeof se.id=="number"&&typeof se.username=="string"&&(ue[se.id]=se.username)}),L(se=>({...se,...ue})),Array.isArray(_.userConnections)){const se=_.userConnections.find(ke=>ke.userId===e);if(_.room.roomType===2)if(se&&se.userState===sn.INVITED){const ke=_.userConnections.find(Pt=>Pt.userId!==e),pe=(ke==null?void 0:ke.userId)||0,rn=ue[pe]||me[pe]||`User ${pe}`;console.log(`[getRoomData] We have a new DM from ${rn} (userId: ${pe})`),be(Pt=>Pt.some(Ia=>Ia.roomId===_.room.roomId)?Pt:[...Pt,{roomId:_.room.roomId,oderId:pe,username:rn}])}else se&&se.userState===sn.JOINED&&be(ke=>ke.filter(pe=>pe.roomId!==_.room.roomId));else if(se&&se.userState===sn.INVITED){const ke=_.userConnections.find(Pt=>Pt.userId!==e&&Pt.userState===sn.JOINED),pe=(ke==null?void 0:ke.userId)||0,rn=ue[pe]||me[pe]||`User ${pe}`;console.log(`[getRoomData] We're INVITED to room ${_.room.roomName} by ${rn}`),je(Pt=>Pt.some(Ia=>Ia.roomId===_.room.roomId)?Pt:[...Pt,{roomId:_.room.roomId,roomName:_.room.roomName,inviterId:pe,inviterUsername:rn}])}else se&&se.userState===sn.JOINED&&je(ke=>ke.filter(pe=>pe.roomId!==_.room.roomId))}if(Number(fe)===d)if(Array.isArray(_.userConnections)){console.log(`[getRoomData] Filtering users for room ${fe}`),console.log(`[getRoomData] ChatRoomUserAccessType.JOINED = ${sn.JOINED}`),console.log("[getRoomData] userConnections:",JSON.stringify(_.userConnections)),console.log("[getRoomData] all users:",JSON.stringify(_.users));const se=new Set(_.userConnections.filter(pe=>{const rn=pe&&pe.userState===sn.JOINED;return console.log(`[getRoomData] User ${pe==null?void 0:pe.userId} state=${pe==null?void 0:pe.userState} isJoined=${rn}`),rn}).map(pe=>pe.userId));console.log("[getRoomData] joinedIds:",Array.from(se));const ke=(_.users||[]).filter(pe=>se.has(pe.id));console.log("[getRoomData] Final joinedUsers:",JSON.stringify(ke)),We(ke)}else console.log("[getRoomData] No userConnections array, using all users"),We(_.users||[])}if(Array.isArray(_.messages)){const ue=_.messages.filter(se=>typeof se.userId=="number").map(se=>{var ke;return{user:_.users&&((ke=_.users.find(pe=>pe.id===se.userId))==null?void 0:ke.username)||me[se.userId]||`User ${se.userId}`,content:se.messageString,timestamp:new Date(se.messageDate*1e3).toISOString(),userId:se.userId}});E(se=>({...se,[fe]:ue}))}else E(ue=>({...ue,[fe]:ue[fe]||[]}))}catch(_){console.error("Error processing getRoomData:",_)}break;case T.ws.users.confirmFriendship.funcId:console.log("Friendship accepted response:",o),o.code===0?(console.log(" Friendship request accepted successfully"),A(T.ws.users.fetchUserConnections.funcId,null)):console.error(" Failed to accept friendship:",o);break;case T.ws.users.denyFriendship.funcId:console.log("Friendship denied response:",o),o.code===0?(console.log(" Friendship request denied successfully"),A(T.ws.users.fetchUserConnections.funcId,null)):console.error(" Failed to deny friendship:",o);break;case T.ws.chat.sendDirectMessage.funcId:if(console.log("sendDirectMessage response:",o),o.code===0&&o.payload){console.log(" Direct message sent successfully");const _=o.payload;String(_.roomId),A(T.ws.chat.listRooms.funcId,{}),setTimeout(()=>{A(T.ws.chat.getRoomData.funcId,{roomId:Number(_.roomId)})},100),setTimeout(()=>{y(_.roomId)},200)}else if(console.error(" Failed to send direct message:",o),t){const _=((Be=o.payload)==null?void 0:Be.message)||((Jr=o.payload)==null?void 0:Jr.error)||`Failed to send DM (code: ${o.code})`;t(_,"error")}break;case"user_connected":if(console.log("User connected event:",o.payload),o.code===0&&o.payload){const _=o.payload.userId;_&&typeof _=="number"&&(console.log(`User ${_} connected, fetching username...`),z(_),We(fe=>fe.map(ue=>ue.id===_?{...ue,onlineStatus:1}:ue)))}break;case"user_disconnected":if(console.log("User disconnected event:",o.payload),o.payload&&typeof o.payload.userId=="number"){const _=o.payload.userId;We(fe=>fe.map(ue=>ue.id===_?{...ue,onlineStatus:0}:ue))}break;case T.ws.users.requestUserProfileData.funcId:if(console.log("[requestUserProfileData] Response received:",o),o.code===0&&o.payload){const _=o.payload;_.id&&_.username&&(console.log(`[requestUserProfileData] Adding to userMap: ${_.id} -> ${_.username}`),L(fe=>({...fe,[_.id]:_.username})),M===_.username&&(console.log(`[requestUserProfileData] Opening profile for ${_.username} (id: ${_.id})`),X(_.id),Ce(!0),re(null)))}else console.warn("[requestUserProfileData] Failed to fetch profile:",o),M&&(t&&t(`Cannot open profile for ${M} - user not found`,"error"),re(null));break;default:o.source_container!=="pong"&&console.log("Unhandled funcId:",o.funcId)}},[o,A]);const z=g.useCallback(R=>{try{console.log(`[fetchUsername] Fetching username for user ${R} via WebSocket...`),v.current(T.ws.users.requestUserProfileData.funcId,R)}catch(ie){console.warn(`[fetchUsername] Error fetching username for user ${R}:`,ie)}},[]);g.useEffect(()=>{console.log("Requesting room list and user connections on mount"),A(T.ws.chat.listRooms.funcId,{}),A(T.ws.users.fetchUserConnections.funcId,null)},[]);const V=R=>{if(!R.startsWith("/"))return null;const ie=R.trim().split(/\s+/),de=ie[0].substring(1).toLowerCase(),Se=ie.slice(1);return{command:de,args:Se}},F=g.useCallback(R=>{var de;if(!d)return;const ie=V(R);if(ie){const{command:Se,args:Be}=ie;switch(console.log("Slash command detected:",Se,Be),Se){case"me":A(T.ws.chat.sendMessage.funcId,{roomId:d,messageString:`*${Be.join(" ")}*`});break;case"whisper":case"w":t&&t("Private whisper feature is not implemented yet.","error");break;case"invite":if(Be.length<1){t&&t("Usage: /invite <username1> [username2] [username3] ...","error");return}if(I===2){t&&t("Cannot invite users into a direct message room.","error");return}const Jr=Ve=>{var Qr;if(/^\d+$/.test(Ve)){const vn=Number(Ve);A(T.ws.chat.addUserToRoom.funcId,{roomId:d,user_to_add:vn}),t&&t(`Invited user ID ${vn}`,"success")}else{console.log("Looking for username:",Ve,"in userMap:",me);const vn=Object.entries(me).find(([,ut])=>ut.toLowerCase()===Ve.toLowerCase());if(vn){const ut=Number(vn[0]);A(T.ws.chat.addUserToRoom.funcId,{roomId:d,user_to_add:ut}),t&&t(`Invited ${Ve}`,"success")}else{console.log(`Searching for user: ${Ve}`);const ut=xn=>{var _,fe;try{const ue=JSON.parse(xn.data);if(ue.funcId===T.ws.users.requestUserProfileData.funcId)if((_=r.current)==null||_.removeEventListener("message",ut),ue.code===0&&((fe=ue.payload)!=null&&fe.id)){const se=ue.payload.id;console.log(`Found user ${Ve} with ID ${se}`),A(T.ws.chat.addUserToRoom.funcId,{roomId:d,user_to_add:se}),t&&t(`Invited ${Ve}`,"success")}else t&&t(`User "${Ve}" not found.`,"error")}catch(ue){console.error("Error handling search response:",ue)}};(Qr=r.current)==null||Qr.addEventListener("message",ut),A(T.ws.users.requestUserProfileData.funcId,Ve),setTimeout(()=>{var xn;(xn=r.current)==null||xn.removeEventListener("message",ut)},5e3)}}};Be.forEach((Ve,cr)=>{setTimeout(()=>Jr(Ve),cr*100)}),Be.length>1&&t&&t(`Inviting ${Be.length} users...`,"success");break;case"debug":if(Be.length===0){t&&t("Usage: /debug <raw JSON string>","error");return}try{const Ve=Be.join(" ");((de=r.current)==null?void 0:de.readyState)===WebSocket.OPEN?(r.current.send(Ve),t&&t("Debug message sent","success")):t&&t("WebSocket not connected","error")}catch(Ve){t&&t(`Error sending debug message: ${Ve}`,"error")}break;case"help":t&&t("Commands: /me, /whisper, /invite (supports multiple users), /debug, /help. Use  to browse command history.","success");break;default:t&&t(`Unknown command: /${Se}`,"error")}return}A(T.ws.chat.sendMessage.funcId,{roomId:d,messageString:R})},[d,A,me]),ne=g.useCallback(R=>{const ie=S.find(de=>de.roomId===R);console.log("Selecting room:",R,ie),y(R),k(ee(ie)),C((ie==null?void 0:ie.roomType)??null),We([]),A(T.ws.chat.getRoomData.funcId,{roomId:R})},[S,ee]),W=g.useCallback(R=>{console.log("Joining selected room:",R),A(T.ws.chat.joinRoom.funcId,{roomId:R}),setTimeout(()=>{A(T.ws.chat.getRoomData.funcId,{roomId:R}),A(T.ws.chat.listRooms.funcId,{})},250)},[]),K=g.useCallback(R=>{console.log("Leaving room:",R),A(T.ws.chat.leaveRoom.funcId,{roomId:R}),R===d&&(y(null),k(null),C(null),We([]))},[d]),it=g.useCallback(R=>{console.log("[v0] handleCreateRoom called with roomName:",R),console.log("[v0] Creating room with funcId:",T.ws.chat.addRoom.funcId),A(T.ws.chat.addRoom.funcId,{roomName:R})},[]),Ct=g.useCallback(()=>{console.log("Refreshing rooms"),A(T.ws.chat.listRooms.funcId,{})},[]),Et=g.useCallback(R=>{d&&(console.log("Inviting to pong in room:",d),n?n(R):t&&t("Pong invitation feature not yet implemented","error"))},[d,t,n]),Qt=g.useCallback(R=>{console.log("Accepting friendship request from:",R),A(T.ws.users.confirmFriendship.funcId,R),setTimeout(()=>{A(T.ws.users.fetchUserConnections.funcId,null)},500)},[]),ur=g.useCallback(R=>{console.log("Denying friendship request from:",R),A(T.ws.users.denyFriendship.funcId,R),setTimeout(()=>{A(T.ws.users.fetchUserConnections.funcId,null)},500)},[]),vu=g.useCallback(R=>{console.log("Accepting room invite, joining room:",R),A(T.ws.chat.joinRoom.funcId,{roomId:R}),je(ie=>ie.filter(de=>de.roomId!==R)),y(R),setTimeout(()=>{A(T.ws.chat.listRooms.funcId,{}),A(T.ws.chat.getRoomData.funcId,{roomId:R})},300)},[]),xu=g.useCallback(R=>{console.log("Declining room invite for room:",R),je(ie=>ie.filter(de=>de.roomId!==R))},[]),wu=g.useCallback(R=>{console.log("Accepting DM invite, opening room:",R),A(T.ws.chat.joinRoom.funcId,{roomId:R}),be(ie=>ie.filter(de=>de.roomId!==R)),y(R),setTimeout(()=>{A(T.ws.chat.getRoomData.funcId,{roomId:R})},100)},[]),bu=g.useCallback(R=>{console.log("Declining DM invite for room:",R),be(ie=>ie.filter(de=>de.roomId!==R))},[]);g.useEffect(()=>{localStorage.getItem("FRIENDSHIP_TEST_MODE")==="true"||i(Q)},[Q,i]),g.useEffect(()=>{u(()=>Qt),c(()=>ur)},[Qt,ur,u,c]),g.useEffect(()=>{p(le)},[le,p]),g.useEffect(()=>{f(()=>vu),h(()=>xu)},[vu,xu,f,h]),g.useEffect(()=>{b(J)},[J,b]),g.useEffect(()=>{x(()=>wu),w(()=>bu)},[wu,bu,x,w]);const Pm=g.useCallback(R=>{const ie=H.includes(R);ie?(console.log("Unblocking user:",R),A(T.ws.users.unblockUser.funcId,R)):(console.log("Blocking user:",R),A(T.ws.users.blockUser.funcId,R)),G(de=>ie?de.filter(Se=>Se!==R):[...de,R])},[H,A]),Rm=g.useCallback(R=>{console.log("=== Opening profile ==="),console.log("Username received:",R);const ie=R.match(/User (\d+)/);if(ie&&ie[1]){const Se=Number.parseInt(ie[1],10);if(!isNaN(Se)){X(Se),Ce(!0);return}}const de=Object.entries(me).find(([,Se])=>Se===R);if(de){const Se=Number(de[0]);X(Se),Ce(!0);return}console.log(`[handleOpenProfile] Username "${R}" not in userMap, fetching by username...`),re(R),v.current(T.ws.users.requestUserProfileData.funcId,R)},[me]),ku=g.useCallback(R=>{console.log("Starting DM with:",R);const ie=typeof R=="number"||/^\d+$/.test(String(R));let de;if(ie)de=typeof R=="number"?R:Number(R),console.log("Using userId directly:",de);else{const Se=Object.entries(me).find(([,Be])=>Be===R);if(!Se){t&&t(`Cannot start DM - user "${R}" not found in current session. Try entering their user ID number instead.`,"error");return}de=Number(Se[0]),console.log("Resolved username to userId:",de)}A(T.ws.chat.sendDirectMessage.funcId,{targetUserId:de,messageString:"Started a conversation"}),oe(de),setTimeout(()=>{A(T.ws.chat.listRooms.funcId,{})},100)},[A,me]);return l.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[l.jsx("div",{className:"w-full max-w-6xl",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsx(X1,{rooms:S.filter(R=>!le.some(ie=>ie.roomId===R.roomId)&&!J.some(ie=>ie.roomId===R.roomId)),currentRoom:d,onSelectRoom:ne,onCreateRoom:it,onRefreshRooms:Ct,onLeaveRoom:K,onStartDM:ku,selfUserId:e,userMap:me})}),l.jsx("div",{className:"md:col-span-2",children:l.jsx(Y1,{messages:ae,onSendMessage:F,currentRoom:d,currentRoomName:N,isJoined:S.some(R=>R.roomId===d),onJoinRoom:W,onInvitePong:Et,onBlockUser:Pm,blockedUserIds:H,onOpenProfile:Rm,roomUsers:Xe,selfUserId:e})})]})}),ve&&$&&l.jsx(Im,{userId:$,isOpen:ve,onClose:()=>{Ce(!1),X(null)},onStartDM:ku,showToast:t||(()=>{})})]})}function tb({whenCompletedSuccesfully:e}){const[t,n]=g.useState(""),[r,o]=g.useState(""),[s,a]=g.useState(""),[i,u]=g.useState(""),[c,p]=g.useState({}),[f,h]=g.useState(!1),[b,x]=g.useState(null),[w,S]=g.useState(!1),[m,d]=g.useState(!1),y=C=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C),v=C=>C.length<8?"Password must be at least 8 characters":/[A-Z]/.test(C)?/[a-z]/.test(C)?/[0-9]/.test(C)?null:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter",N=C=>C.length<3?"Username must be at least 3 characters":C.length>20?"Username must be less than 20 characters":/^[a-zA-Z0-9_]+$/.test(C)?null:"Username can only contain letters, numbers, and underscores",k=async(C,D,E)=>{const H=`https://${window.location.host}/public_api/auth/create/user`,G=await fetch(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:C,email:D,password:E})});if(!G.ok){const X=await G.text();throw new Error(X||"Registration failed")}return await G.json()},I=async()=>{x(null),p({});const C={},D=N(t);D&&(C.registerUsername=D),r?y(r)||(C.registerEmail="Please enter a valid email"):C.registerEmail="Email is required";const E=v(s);if(E&&(C.registerPassword=E),s!==i&&(C.registerConfirmPassword="Passwords do not match"),Object.keys(C).length>0){p(C);return}h(!0);try{const H=await k(t,r,s);e(H)}catch(H){H instanceof Error?x(H.message):x("Registration failed")}finally{h(!1)}};return l.jsx("div",{className:"flex items-start justify-center px-4 py-4",children:l.jsxs("div",{className:"w-full max-w-md shadow-lg glass-light-sm dark:glass-dark-sm glass-border p-4 md:p-6 mt-4 md:mt-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4 text-gray-900 dark:text-white",children:"Create Account"}),l.jsx("p",{className:"text-center mb-4 text-gray-500 dark:text-gray-300",children:"Fill in your details to register"}),b&&l.jsxs("div",{className:"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 p-2 mb-4 text-center",children:[" ",b]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-username",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Username"}),l.jsx("input",{id:"register-username",type:"text",placeholder:"johndoe",value:t,onChange:C=>n(C.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/80 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerUsername?"border-red-500 dark:border-red-400":""}`,disabled:f}),c.registerUsername&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerUsername})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-email",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Email"}),l.jsx("input",{id:"register-email",type:"email",placeholder:"you@example.com",value:r,onChange:C=>o(C.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/80 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerEmail?"border-red-500 dark:border-red-400":""}`,disabled:f}),c.registerEmail&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerEmail})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-password",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Password"}),l.jsx("input",{id:"register-password",type:w?"text":"password",placeholder:"",value:s,onChange:C=>a(C.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerPassword?"border-red-500 dark:border-red-400":""}`,disabled:f}),l.jsxs("button",{type:"button",onClick:()=>S(!w),className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[w?"Hide":"Show"," Password"]}),c.registerPassword&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerPassword})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"register-confirm-password",className:"block font-semibold text-gray-700 dark:text-gray-200",children:"Confirm Password"}),l.jsx("input",{id:"register-confirm-password",type:m?"text":"password",placeholder:"",value:i,onChange:C=>u(C.target.value),className:`border p-2 w-full border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 ${c.registerConfirmPassword?"border-red-500 dark:border-red-400":""}`,disabled:f}),l.jsxs("button",{type:"button",onClick:()=>d(!m),className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[m?"Hide":"Show"," Password"]}),c.registerConfirmPassword&&l.jsx("p",{className:"text-sm text-red-500 dark:text-red-300",children:c.registerConfirmPassword})]}),l.jsx("button",{onClick:I,className:"w-full bg-blue-600 dark:bg-blue-600 text-white py-2 hover:bg-blue-700 dark:hover:bg-blue-700 transition-colors",disabled:f,children:f?"Creating account...":"Create Account"})]})]})})}function nb({showToast:e,onNavigateBack:t}){const[n,r]=g.useState(!1),[o,s]=g.useState(null),a=()=>localStorage.getItem("jwt"),i=()=>{try{const f=localStorage.getItem("jwt");if(!f)return null;const h=JSON.parse(atob(f.split(".")[1]));return typeof(h==null?void 0:h.uid)=="number"?h.uid:h!=null&&h.uid?Number(h.uid):null}catch{return null}},u=async()=>{r(!0),s(null);try{const f=i();if(!f){e==null||e("Not signed in","error"),r(!1);return}const h=await fetch("/api/auth/gdpr/me",{method:"POST",headers:{Authorization:`Bearer ${a()}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({userId:f})});if(!h.ok)throw new Error("Failed to fetch");const b=await h.json();s(b),e==null||e("Personal data fetched","success")}catch(f){console.error("fetchMyData error",f),e==null||e("Failed to fetch personal data","error")}finally{r(!1)}},c=async()=>{if(confirm("Are you sure you want to request anonymization? This will remove personal identifiers.")){r(!0);try{const f=i();if(!f){e==null||e("Not signed in","error"),r(!1);return}if(!(await fetch("/api/auth/gdpr/anonymize",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a()}`},credentials:"include",body:JSON.stringify({userId:f})})).ok)throw new Error("Anonymize failed");e==null||e("Anonymization request successful","success"),await u(),t==null||t()}catch(f){console.error("doAnonymize error",f),e==null||e("Anonymization failed","error")}finally{r(!1)}}},p=async()=>{if(confirm("Are you sure you want to request account deletion? This is irreversible.")){r(!0);try{const f=i();if(!f){e==null||e("Not signed in","error"),r(!1);return}if(!(await fetch("/api/auth/gdpr/delete",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a()}`},credentials:"include",body:JSON.stringify({userId:f})})).ok)throw new Error("Delete failed");e==null||e("Account deletion requested","success"),t==null||t()}catch(f){console.error("doDelete error",f),e==null||e("Account deletion failed","error")}finally{r(!1)}}};return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Manage My Data (GDPR)"}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:()=>t==null?void 0:t(),className:"px-3 py-1 text-sm bg-gray-200 rounded",children:"Back"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Use the controls below to view, anonymize or delete your personal data."}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:u,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"View My Data"}),l.jsx("button",{onClick:c,disabled:n,className:"px-4 py-2 bg-yellow-600 text-white rounded",children:"Request Anonymization"}),l.jsx("button",{onClick:p,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded",children:"Request Account Deletion"})]}),l.jsxs("div",{children:[n&&l.jsx("div",{className:"text-sm text-gray-500",children:"Processing"}),o&&l.jsx("pre",{className:"mt-3 max-h-80 overflow-auto bg-gray-100 dark:bg-dark-700 p-3 rounded text-xs text-gray-800 dark:text-gray-200",children:JSON.stringify(o,null,2)})]})]})]})})}const rb=({isLoading:e=!1})=>{const{pendingRequests:t,handleAcceptFriendship:n,handleDenyFriendship:r,roomInvites:o,handleAcceptRoomInvite:s,handleDeclineRoomInvite:a,dmInvites:i,handleAcceptDmInvite:u,handleDeclineDmInvite:c}=Em(),p=ht.useRef(null),f=g.useRef(null),h=g.useRef(null);ht.useEffect(()=>{try{const k=localStorage.getItem("jwt");if(k){const I=JSON.parse(atob(k.split(".")[1]));typeof I.uid=="number"&&(p.current=I.uid)}}catch{}},[]);const[b,x]=g.useState(!1),[w,S]=g.useState(null),[m,d]=g.useState({top:0,right:0}),y=t.length+o.length+i.length;ht.useEffect(()=>{if(b&&h.current){const k=h.current.getBoundingClientRect();d({top:k.bottom+8,right:window.innerWidth-k.right})}},[b]),g.useEffect(()=>{if(!b)return;function k(I){const C=f.current,D=h.current;D&&D.contains(I.target)||C&&C.contains(I.target)||x(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[b]);const v=g.useCallback(async k=>{S(`friend_${k}`);try{await n(k)}finally{S(null)}},[n]),N=g.useCallback(async k=>{S(`friend_${k}`);try{await r(k)}finally{S(null)}},[r]);return l.jsxs("div",{className:"relative",children:[l.jsxs("button",{ref:h,onClick:()=>x(!b),className:"relative p-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100/40 dark:hover:bg-gray-700 transition-colors",title:"Notifications",children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),y>0&&l.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full",children:y})]}),b&&Cp.createPortal(l.jsxs("div",{ref:f,className:"fixed w-80 glass-light-sm dark:glass-dark-sm glass-border shadow-xl dark:shadow-dark-700 z-[9999]",style:{top:`${m.top}px`,right:`${m.right}px`},children:[l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("h3",{className:"font-semibold text-gray-900",children:["Notifications (",y,")"]})}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:y>0?l.jsxs("div",{className:"space-y-2 p-2",children:[t.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-900 uppercase tracking-wide",children:" Friend Requests"}),t.filter(k=>k.userId!==p.current).map(k=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/40 dark:bg-gray-700/80 rounded-lg hover:bg-gray-100/40 dark:hover:bg-gray-600/80 transition",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[l.jsx("p",{className:"text-sm font-bold truncate",style:{color:dt(k.userId,!0)},children:k.username}),k.alias&&l.jsx("p",{className:"text-xs text-gray-600 truncate",children:k.alias})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>v(k.userId),disabled:w===`friend_${k.userId}`||e,className:"px-3 py-1 text-xs font-medium bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Accept"}),l.jsx("button",{onClick:()=>N(k.userId),disabled:w===`friend_${k.userId}`||e,className:"px-3 py-1 text-xs font-medium bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Deny"})]})]},`friend_${k.userId}`))]}),o.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-900 uppercase tracking-wide mt-2",children:" Chat Room Invites"}),o.map(k=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50/40 dark:bg-blue-900/30 rounded-lg hover:bg-blue-100/40 dark:hover:bg-blue-800/40 transition",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[l.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:k.roomName}),l.jsxs("p",{className:"text-xs text-gray-600 truncate",children:["Invited by ",k.inviterUsername]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{s(k.roomId),x(!1)},disabled:w===`chat_${k.roomId}`||e,className:"px-3 py-1 text-xs font-medium bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Join"}),l.jsx("button",{onClick:()=>{a(k.roomId),x(!1)},disabled:w===`chat_${k.roomId}`||e,className:"px-3 py-1 text-xs font-medium bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Decline"})]})]},`chat_${k.roomId}`))]}),i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-900 uppercase tracking-wide mt-2",children:" Direct Messages"}),i.map(k=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50/40 dark:bg-purple-900/30 rounded-lg hover:bg-purple-100/40 dark:hover:bg-purple-800/40 transition",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[l.jsx("p",{className:"text-sm font-bold truncate",style:{color:dt(k.oderId,!0)},children:k.username}),l.jsx("p",{className:"text-xs text-gray-600 truncate",children:"wants to message you"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{u(k.roomId),x(!1)},disabled:w===`dm_${k.roomId}`||e,className:"px-3 py-1 text-xs font-medium bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Open"}),l.jsx("button",{onClick:()=>{c(k.roomId),x(!1)},disabled:w===`dm_${k.roomId}`||e,className:"px-3 py-1 text-xs font-medium bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Dismiss"})]})]},`dm_${k.roomId}`))]})]}):l.jsx("div",{className:"p-6 text-center text-sm text-gray-600",children:"No notifications"})})]}),document.body)]})},ob=["Friends","Requests","Blocked"];function sb({isOpen:e,onClose:t}){const{sendMessage:n,payloadReceived:r}=Wo(),[o,s]=g.useState("Friends"),[a,i]=g.useState([]),[u,c]=g.useState(!1),[p,f]=ht.useState(null);ht.useEffect(()=>{try{const m=localStorage.getItem("jwt");if(m){const d=JSON.parse(atob(m.split(".")[1]));typeof d.uid=="number"&&f(d.uid)}}catch{}},[]);const h=g.useCallback((m,d)=>{n({funcId:m,payload:d,target_container:"users"})},[n]);g.useEffect(()=>{if(!e)return;c(!0),h(T.ws.users.fetchUserConnections.funcId,null);const m=setTimeout(()=>c(!1),2e3);return()=>clearTimeout(m)},[e]),g.useEffect(()=>{if(r){if(r.funcId===T.ws.users.fetchUserConnections.funcId){console.log("Received fetchUserConnections:",r.payload);const m=Array.isArray(r.payload)?r.payload:[];i(m),c(!1)}(r.funcId===T.ws.users.blockUser.funcId||r.funcId===T.ws.users.unblockUser.funcId||r.funcId===T.ws.users.confirmFriendship.funcId||r.funcId===T.ws.users.denyFriendship.funcId||r.funcId===T.ws.users.removeFriendship.funcId)&&(console.log("Received action response:",r.funcId),setTimeout(()=>h(T.ws.users.fetchUserConnections.funcId,null),200))}},[r]);const b=g.useMemo(()=>a.filter(m=>m.status===2),[a]),x=g.useMemo(()=>{const m=a.filter(d=>d.status===3);return console.log("Blocked connections:",m),m},[a]),w=g.useMemo(()=>a.filter(m=>m.status===1),[a]),S=({item:m})=>l.jsxs("div",{className:"flex gap-2",children:[m.status===1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>h(T.ws.users.confirmFriendship.funcId,m.id),className:"px-3 py-1 text-xs font-medium bg-green-500 text-white hover:bg-green-600",children:"Accept"}),l.jsx("button",{onClick:()=>h(T.ws.users.denyFriendship.funcId,m.id),className:"px-3 py-1 text-xs font-medium bg-red-500 text-white hover:bg-red-600",children:"Deny"})]}),m.status===2&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>h(T.ws.users.removeFriendship.funcId,m.friendId),className:"px-3 py-1 text-xs font-medium bg-gray-500 text-white hover:bg-gray-600",children:"Unfriend"}),l.jsx("button",{onClick:()=>h(T.ws.users.blockUser.funcId,m.friendId),className:"px-3 py-1 text-xs font-medium bg-red-500 text-white hover:bg-red-600",disabled:m.friendId===p||m.friendId===1,children:"Block"})]}),m.status===3&&l.jsx("button",{onClick:()=>h(T.ws.users.unblockUser.funcId,m.friendId),className:"px-3 py-1 text-xs font-medium bg-gray-100/40 dark:bg-dark-700 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50/40 dark:hover:bg-dark-600",children:"Unblock"})]});return e?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40",onClick:m=>{m.target===m.currentTarget&&t()},children:l.jsxs("div",{className:"w-full max-w-2xl glass-light-sm dark:glass-dark-sm glass-border shadow-lg overflow-hidden",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-dark-700",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Friends & Privacy"}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100/40 dark:hover:bg-dark-700",children:l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"px-4 pt-3",children:l.jsx("div",{className:"flex gap-2 mb-3",children:ob.map(m=>l.jsx("button",{onClick:()=>s(m),className:`px-3 py-1.5 text-sm ${o===m?"bg-blue-600 text-white":"bg-gray-100/40 dark:bg-dark-700 text-gray-700 dark:text-gray-200"}`,children:m},m))})}),l.jsx("div",{className:"px-4 pb-4 max-h-[60vh] overflow-y-auto",children:u?l.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"Loading..."}):l.jsxs("div",{className:"space-y-2",children:[(o==="Friends"?b:o==="Blocked"?x:w).map(m=>{const d=p!==null&&m.friendId===p?m.id:m.friendId;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/40 dark:bg-dark-700",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",style:{color:dt(d,!0)},children:m.username}),m.alias&&l.jsx("div",{className:"text-xs",style:{color:dt(d,!0),opacity:.8},children:m.alias})]}),l.jsx(S,{item:m})]},`${m.id}-${m.status}`)}),o==="Friends"&&b.length===0&&l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No friends yet"}),o==="Requests"&&w.length===0&&l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No pending requests"}),o==="Blocked"&&x.length===0&&l.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No blocked users"})]})})]})}):null}function ab({username:e,userId:t,avatarUrl:n,onLogout:r,isLoggingOut:o,onFriendsClick:s}){const[a,i]=g.useState(!1),[u,c]=g.useState(!1),p=g.useRef(null),f=dt(t,!0);return g.useEffect(()=>{function h(b){p.current&&!p.current.contains(b.target)&&i(!1)}if(a)return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[a]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative z-[9999]",ref:p,children:[l.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-2 px-3 py-2 hover:bg-gray-100/40 dark:hover:bg-dark-700 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-dark-700 flex items-center justify-center",children:n?l.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover"}):l.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:e.slice(0,2).toUpperCase()})}),l.jsx("span",{className:"text-sm font-bold",style:{color:f},children:e}),l.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&l.jsxs("div",{className:"absolute right-0 mt-2 w-56 glass-light-sm dark:glass-dark-sm glass-border shadow-lg dark:shadow-dark-700 py-2 z-[10000]",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-dark-700",children:[l.jsx("p",{className:"text-sm font-bold",style:{color:f},children:e}),l.jsxs("p",{className:"text-xs text-gray-900 mt-1",children:["User ID: ",t]})]}),l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>{c(!0),i(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-100/40 dark:hover:bg-dark-700 flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"View my profile"]}),l.jsxs("button",{onClick:()=>{i(!1),s==null||s()},className:"w-full text-left px-4 py-2 text-sm text-gray-900 hover:bg-gray-100/40 dark:hover:bg-dark-700 flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Manage friends"]})]}),l.jsx("div",{className:"border-t border-gray-200 dark:border-dark-700 pt-1 mt-1",children:l.jsxs("button",{onClick:()=>{i(!1),r()},disabled:o,className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${o?"text-red-400 dark:text-red-500 cursor-not-allowed":"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),o?"Logging out...":"Logout"]})})]})]}),u&&l.jsx(Im,{userId:t,isOpen:u,onClose:()=>c(!1)})]})}function lb({invitations:e,onAccept:t,onDecline:n}){if(console.log("[PongInviteNotifications] Rendering with",e.length,"invitations:",e),e.length===0)return null;const r=o=>{switch(o){case"1v1":return"1v1";case"multiplayer":return"Multiplayer";case"tournament_1v1":return"1v1 Tournament";case"tournament_multi":return"Multi Tournament"}};return l.jsx("div",{className:"fixed top-20 right-6 z-50 space-y-2 max-w-sm",children:e.map(o=>l.jsxs("div",{className:"glass-light-sm dark:glass-dark-sm shadow-xl border-2 border-blue-500 p-4 animate-slide-in",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-3xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Pong Invitation"}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[l.jsx("span",{className:"font-bold",style:{color:dt(o.hostId,!0)},children:o.hostUsername})," ","invited you to play"," ",l.jsx("span",{className:"font-medium",children:r(o.gameMode)})]}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[o.playerCount," player(s)"]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-3",children:[l.jsx("button",{onClick:()=>t(o.inviteId),className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors font-medium",children:"Accept"}),l.jsx("button",{onClick:()=>n(o.inviteId),className:"flex-1 px-3 py-2 bg-gray-300 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200 text-sm rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600/80 transition-colors",children:"Decline"})]})]},o.inviteId))})}function ib({authResponse:e,setPongInvitations:t}){const{payloadReceived:n}=Wo();return g.useEffect(()=>{var o,s,a;if(!n||!e||(n.funcId==="create_pong_lobby"&&console.log("[PongInvitationHandler] Received:",JSON.stringify(n)),n.source_container!=="pong")||n.funcId!=="create_pong_lobby"||n.code!==0)return;console.log("[PongInvitationHandler] Processing lobby invitation:",n.payload);const r=(o=n.payload.players)==null?void 0:o.some(i=>(i.userId===e.user.id||i.id===e.user.id)&&i.isHost);if(console.log("[PongInvitationHandler] isHost check: myId=",e.user.id,"isHost=",r),!r){console.log("[PongInvitationHandler] We're invited! Creating notification...");const i=(s=n.payload.players)==null?void 0:s.find(c=>c.isHost),u={inviteId:n.payload.lobbyId||Date.now(),lobbyId:n.payload.lobbyId,hostId:(i==null?void 0:i.userId)||(i==null?void 0:i.id)||0,hostUsername:(i==null?void 0:i.username)||`User ${(i==null?void 0:i.userId)||(i==null?void 0:i.id)}`,gameMode:n.payload.gameMode,playerCount:((a=n.payload.players)==null?void 0:a.length)||0,timestamp:Date.now(),lobbyData:n.payload};console.log("[PongInvitationHandler] Adding invitation to state:",u),t(c=>[...c,u])}},[n,e,t]),null}function ub({isOpen:e,onClose:t,settings:n,onUpdateSettings:r}){if(!e)return null;const o=s=>{r({...n,[s]:!n[s]})};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-labelledby":"accessibility-title","aria-modal":"true",onClick:t,children:l.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/95 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col border-2 border-gray-300 dark:border-gray-600",onClick:s=>s.stopPropagation(),children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-blue-500/90",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{id:"accessibility-title",className:"text-2xl font-bold text-white",children:" Accessibility Settings"}),l.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 transition-colors text-2xl","aria-label":"Close accessibility settings",children:""})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Customize the interface to meet your accessibility needs"}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"high-contrast",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"High Contrast Mode"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Increases contrast for better visibility"})]}),l.jsx("button",{id:"high-contrast",onClick:()=>o("highContrast"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.highContrast?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.highContrast,"aria-label":"Toggle high contrast mode",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.highContrast?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"large-text",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"Large Text"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Increases font size across the app"})]}),l.jsx("button",{id:"large-text",onClick:()=>o("largeText"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.largeText?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.largeText,"aria-label":"Toggle large text",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.largeText?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"reduced-motion",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"Reduced Motion"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Minimizes animations and transitions"})]}),l.jsx("button",{id:"reduced-motion",onClick:()=>o("reducedMotion"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.reducedMotion?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.reducedMotion,"aria-label":"Toggle reduced motion",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.reducedMotion?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/40 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{htmlFor:"screen-reader",className:"font-semibold text-gray-800 dark:text-gray-200 cursor-pointer",children:"Screen Reader Mode"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Optimizes interface for screen readers"})]}),l.jsx("button",{id:"screen-reader",onClick:()=>o("screenReaderMode"),className:`relative w-14 h-7 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ${n.screenReaderMode?"bg-blue-500":"bg-gray-300 dark:bg-gray-600/70"}`,role:"switch","aria-checked":n.screenReaderMode,"aria-label":"Toggle screen reader mode",children:l.jsx("span",{className:`absolute top-1 left-1 w-5 h-5 bg-white transition-transform ${n.screenReaderMode?"translate-x-7":""}`})})]}),l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:" Keyboard Shortcuts"}),l.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Tab"})," - Navigate between elements"]}),l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Enter"})," - Activate buttons/links"]}),l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Esc"})," - Close modals/dialogs"]}),l.jsxs("li",{children:[l.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700/50 text-xs",children:"Ctrl + /"})," - Show command help"]})]})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50/40 dark:bg-gray-900/60 flex justify-end",children:l.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-500 text-white hover:bg-blue-600 transition-colors font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Done"})})]})})}function cb(e,t,n=365){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};path=/;SameSite=Lax;expires=${r.toUTCString()}`}function db(e){const t=document.cookie.split("; ").find(n=>n.startsWith(e+"="));return t?decodeURIComponent(t.split("=")[1]):null}function fb(){const[e,t]=g.useState(!1);g.useEffect(()=>{db("cookie_consent")||t(!0)},[]);const n=async()=>{cb("cookie_consent","accepted"),t(!1)},r=async()=>{t(!1)};return e?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:9998}}),l.jsxs("div",{style:{position:"fixed",bottom:12,left:12,right:12,background:"#111",color:"#fff",padding:12,borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:9999},children:[l.jsx("div",{style:{maxWidth:"70%"},children:"We use cookies to improve your experience. You may accept or reject non-essential cookies."}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:n,style:{background:"#28a745",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6,cursor:"pointer"},children:"Accept"}),l.jsx("button",{onClick:r,style:{background:"#6c757d",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6,cursor:"pointer"},children:"Reject"})]})]})]}):null}class pb{constructor(t,n,r){Bo(this,"x");Bo(this,"y");Bo(this,"z");this.x=t,this.y=n,this.z=r}}function mb({starCount:e=500,speed:t=4,backgroundImage:n}){const r=g.useRef(null),o=g.useRef([]),s=g.useRef(0);return g.useEffect(()=>{const a=r.current;if(!a)return;const i=a.getContext("2d");if(!i)return;const u=2e3,c=5;let p=window.innerWidth,f=window.innerHeight;const h=()=>{p=a.width=window.innerWidth,f=a.height=window.innerHeight};h(),window.addEventListener("resize",h),o.current=[];for(let x=0;x<e;x++)o.current.push(new pb((Math.random()-.5)*p*2,(Math.random()-.5)*f*2,Math.random()*u));const b=()=>{i.clearRect(0,0,p,f);for(const x of o.current){x.z-=t,x.z<c&&(x.x=(Math.random()-.5)*p*2,x.y=(Math.random()-.5)*f*2,x.z=u);const w=300/x.z,S=x.x*w+p/2,m=x.y*w+f/2;let d=1-x.z/u;d=Math.min(1,d);const y=Math.floor(d*255);i.fillStyle=`rgb(${y},${y},${y})`;const v=Math.max(1,3*w);i.fillRect(S,m,v,v)}s.current=requestAnimationFrame(b)};return b(),()=>{window.removeEventListener("resize",h),cancelAnimationFrame(s.current)}},[e,t]),l.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1,pointerEvents:"none",backgroundImage:n?`url(${n})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:l.jsx("canvas",{ref:r,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})}function gb(){var Xe,We;const e=Dh(),t=zp(),[n,r]=g.useState(null),o=()=>{const M=t.pathname;return M==="/chat"||M==="/pong"||M==="/gdpr"?M.substring(1):"chat"},[s,a]=g.useState(o());g.useEffect(()=>{const M=t.pathname,re=M==="/chat"?"chat":M==="/pong"?"pong":M==="/gdpr"?"gdpr":"chat";re!==s&&a(re)},[t.pathname,s]);const i=!0,[u,c]=g.useState(!1),[p,f]=g.useState([]),[h,b]=g.useState([]),[x,w]=g.useState(null),[S,m]=g.useState(!1),[d,y]=g.useState({highContrast:!1,largeText:!1,reducedMotion:!1,screenReaderMode:!1});g.useEffect(()=>{console.log("[AppRoot] pongInvitations updated:",h)},[h]),g.useEffect(()=>{document.documentElement.classList.add("dark")},[]),g.useEffect(()=>{const M=document.documentElement,re=document.body;if(d.highContrast?(M.classList.add("high-contrast"),console.log("[Accessibility] High contrast mode enabled")):M.classList.remove("high-contrast"),d.largeText?(M.style.fontSize="18px",re.style.fontSize="18px",console.log("[Accessibility] Large text mode enabled")):(M.style.fontSize="",re.style.fontSize=""),d.reducedMotion){M.classList.add("reduce-motion");const le=document.createElement("style");le.id="reduce-motion-override",le.textContent=`
        * {
          animation-play-state: paused !important;
          transition: none !important;
        }
      `,document.getElementById("reduce-motion-override")||document.head.appendChild(le),console.log("[Accessibility] Reduced motion mode enabled")}else{M.classList.remove("reduce-motion");const le=document.getElementById("reduce-motion-override");le&&le.remove()}d.screenReaderMode?(M.classList.add("screen-reader-mode"),console.log("[Accessibility] Screen reader mode enabled")):M.classList.remove("screen-reader-mode")},[d]);function v(M){if(r(M),M!=null&&M.user)try{localStorage.setItem("userData",JSON.stringify(M.user))}catch(re){console.warn("Could not persist user data:",re)}}g.useEffect(()=>{const M=async()=>{const je=localStorage.getItem("userData"),J=je?JSON.parse(je):n==null?void 0:n.user,be=(J==null?void 0:J.avatarUrl)||(J==null?void 0:J.avatar);if(J!=null&&J.id&&be)try{const ae=await fetch("/api/users/pfp",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`,"Content-Type":"application/json"},body:JSON.stringify({file:be})});if(ae.ok){const ee=await ae.text();X(`data:image/png;base64,${ee}`)}}catch(ae){console.warn("Failed to fetch user avatar:",ae)}};M();const re=()=>{M()};window.addEventListener("storage",re);const le=()=>{M()};return window.addEventListener("profileUpdated",le),()=>{window.removeEventListener("storage",re),window.removeEventListener("profileUpdated",le)}},[(Xe=n==null?void 0:n.user)==null?void 0:Xe.id,(We=n==null?void 0:n.user)==null?void 0:We.avatarUrl]);const[N,k]=g.useState(!0),[I,C]=g.useState(!1),[D,E]=g.useState(!1),[H,G]=g.useState(!1),[$,X]=g.useState(void 0);function ve(M){var re,le;try{(re=M==null?void 0:M.tokens)!=null&&re.jwt&&localStorage.setItem("jwt",M.tokens.jwt),(le=M==null?void 0:M.tokens)!=null&&le.refresh&&localStorage.setItem("refreshToken",M.tokens.refresh)}catch(je){console.warn("Could not persist tokens:",je)}}g.useEffect(()=>{let M=!1;async function re(){if(k(!0),n){k(!1);return}const le=window.location.hash;let je=null,J=null;if(le&&le.length>1){const ae=new URLSearchParams(le.substring(1));je=ae.get("jwt"),J=ae.get("refresh")}if(!je){const ae=new URLSearchParams(window.location.search);je=ae.get("jwt"),J=ae.get("refresh")}if(je&&J)try{localStorage.setItem("jwt",je),localStorage.setItem("refreshToken",J);const ae=await fetch("/public_api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:J})});if(ae.ok){const ee=await ae.json();M||(ve(ee),ee!=null&&ee.user&&localStorage.setItem("userData",JSON.stringify(ee.user)),r(ee)),window.history.replaceState({},document.title,window.location.pathname),k(!1);return}}catch(ae){console.warn("OAuth token validation failed:",ae)}const be=localStorage.getItem("refreshToken");try{if(be){const ee=await fetch("/public_api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:be})});if(ee.ok){const A=await ee.json();M||(ve(A),A!=null&&A.user&&localStorage.setItem("userData",JSON.stringify(A.user)),r(A)),k(!1);return}else localStorage.removeItem("refreshToken")}const ae=await fetch("/public_api/auth/refresh",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(ae.ok){const ee=await ae.json();M||(ve(ee),ee!=null&&ee.user&&localStorage.setItem("userData",JSON.stringify(ee.user)),r(ee)),k(!1);return}}catch(ae){console.warn("Auto-login failed:",ae)}M||k(!1)}return re(),()=>{M=!0}},[]),g.useEffect(()=>{const M=re=>{try{const le=re;(le==null?void 0:le.detail)==="gdpr"&&e("/gdpr")}catch{}};return window.addEventListener("navigate",M),()=>window.removeEventListener("navigate",M)},[]);const[Ce,me]=g.useState(null),[L,Q]=g.useState(null),Y=(M,re)=>{me(M),Q(re),setTimeout(()=>{me(null),Q(null)},5e3)};async function ge(){C(!0);try{const M=await fetch("/public_api/auth/create/guest",{method:"GET"});if(!M.ok)throw new Error("Guest creation failed");const re=await M.json();ve(re),r(re)}catch(M){Y("Guest login failed: "+((M==null?void 0:M.message)||"unknown"),"error")}finally{C(!1)}}async function oe(){var M;if(!D){E(!0);try{Gh()}catch{}try{let re=!1;const le=localStorage.getItem("jwt");if((M=n==null?void 0:n.user)!=null&&M.id&&le)try{(await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${le}`},body:JSON.stringify({userId:n.user.id})})).ok&&(re=!0)}catch{}localStorage.removeItem("jwt"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userData"),sessionStorage.removeItem("jwt"),r(null),Y(re?"Logged out successfully":"Logged out locally (server revoke may have failed)",re?"success":"error")}finally{E(!1)}}}return l.jsxs("div",{className:"min-h-screen bg-cover bg-center bg-fixed",style:{backgroundColor:"transparent"},children:[l.jsx(mb,{starCount:500,speed:4,backgroundImage:"/static/react_dist/bg_dark.png"}),l.jsxs("div",{className:"relative",children:[l.jsx(fb,{}),Ce&&l.jsx("div",{className:`fixed top-6 right-6 z-50 px-4 py-2 rounded shadow-md ${L==="success"?"bg-green-600":"bg-red-600"} text-white`,children:Ce}),n?l.jsx(K1,{children:l.jsxs(Hh,{AuthResponseObject:n,showToast:Y,children:[l.jsx(ib,{authResponse:n,setPongInvitations:b}),l.jsx(lb,{invitations:h,onAccept:M=>{console.log("[AppRoot] Accepting invitation:",M);const re=h.find(le=>le.inviteId===M);re&&(w(re.lobbyId),re.lobbyData&&(window.__acceptedLobbyData=re.lobbyData)),b(le=>le.filter(je=>je.inviteId!==M)),e("/pong")},onDecline:M=>{console.log("[AppRoot] Declining invitation:",M),b(re=>re.filter(le=>le.inviteId!==M))}}),l.jsxs("div",{className:"flex flex-col h-screen",children:[l.jsx("header",{className:"bg-gray-100/95 dark:bg-gray-800/90 border-b border-gray-200 dark:border-gray-700 shadow dark:shadow-dark-700 relative",children:l.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transcendence"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("nav",{className:"flex space-x-4",children:[l.jsx("button",{onClick:()=>e("/chat"),className:`px-4 py-2 ${s==="chat"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:"Chat"}),l.jsx("button",{onClick:()=>e("/pong"),className:`px-4 py-2 ${s==="pong"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:"Pong"})]}),l.jsx("button",{onClick:()=>m(!0),className:"p-2","aria-label":"Open accessibility settings",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),l.jsx(rb,{isLoading:!1}),l.jsx(ab,{username:n.user.username,userId:n.user.id,avatarUrl:$,onLogout:oe,isLoggingOut:D,onFriendsClick:()=>G(!0)})]})]})})}),l.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden flex justify-center relative",role:"main",style:{zIndex:1},children:l.jsx("div",{className:"w-full max-w-5xl px-4 py-6 flex flex-col",children:l.jsx("div",{className:"shadow dark:shadow-dark-700 h-full",children:l.jsx("div",{className:"glass-light-sm dark:glass-dark-sm border border-gray-200 dark:border-gray-700 h-full flex flex-col",children:s==="chat"?l.jsx("div",{className:"p-6 h-full flex flex-col",children:l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsx(eb,{selfUserId:n.user.id,showToast:Y,onOpenPongInvite:M=>{f(M),c(!0),e("/pong")}})})}):s==="gdpr"?l.jsx("div",{className:"p-6 h-full flex flex-col",children:l.jsx(nb,{showToast:Y,onNavigateBack:()=>e("/chat")})}):l.jsx("div",{className:"p-6 h-full flex",children:l.jsx(H1,{authResponse:n,darkMode:i,showInviteModal:u,inviteRoomUsers:p,onCloseInviteModal:()=>{c(!1),f([])},pongInvitations:h,setPongInvitations:b,acceptedLobbyId:x,onLobbyJoined:()=>w(null),onNavigateToChat:()=>e("/chat")})})})})})}),H&&l.jsx(sb,{isOpen:H,onClose:()=>G(!1)}),S&&l.jsx(ub,{isOpen:S,onClose:()=>m(!1),settings:d,onUpdateSettings:y})]})]})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4",children:N?l.jsx("div",{children:"Restoring session"}):l.jsxs("div",{className:"max-w-4xl w-full space-y-8",children:[l.jsx("div",{className:"text-center",children:l.jsx("h2",{className:"text-3xl font-bold text-white",children:"Welcome to Transcendence"})}),l.jsxs("div",{className:"mt-8 py-8 px-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx(qh,{onLoginSuccess:v})}),l.jsx("div",{children:l.jsx(tb,{whenCompletedSuccesfully:v})})]}),l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsx("button",{onClick:ge,className:"bg-gray-100 dark:bg-gray-700/80 px-6 py-2 hover:bg-gray-200 dark:hover:bg-gray-600/80 transition-colors",children:"Continue as Guest"})})]})]})})]})]})}al.createRoot(document.getElementById("root")).render(l.jsx(ht.StrictMode,{children:l.jsx(Vh,{children:l.jsx(gb,{})})}));
