<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Standalone React - Original Code</title>
    <script
      src="https://unpkg.com/react@18/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100">
    <div id="root"></div>
    <script
      type="text/babel"
      src="/static/reactproto/registerForm.js"
      defer
    ></script>
    <script type="text/babel">
      const { useState } = React;
      console.log("Form:", RegisterForm);

      /*
       * --------------------------------------------------------
       * Type Definitions (for clarity)
       * --------------------------------------------------------
       *
       * @typedef {Object} User
       * @property {string} username
       *
       * @typedef {Object} AuthResponseType
       * @property {User} user
       * @property {string} [token]
       */

      /**
       * Simulate imported types
       * (these would come from '../../srcs/auth/dist/utils/api/service/auth/loginResponse.js')
       * @typedef {AuthResponseType} AuthResponse
       */

      // "use client";

      // import RegisterForm from '@/components/register-component';
      // import { useState } from "react";
      // import { AuthResponse, type AuthResponseType } from '../../srcs/auth/dist/utils/api/service/auth/loginResponse.js'

      /**
       * Home component
       */

      function Home() {
        /** @type {[AuthResponseType | null, React.Dispatch<React.SetStateAction<AuthResponseType | null>>]} */
        const [authResponse, setAuthResponse] = useState(null);

        /** @param {AuthResponseType} response */
        function logInOrRegistered(response) {
          // This function takes things inside Home(){} and does things to them
          setRegisteredUser(response);
        }

        return (
          <main className="min-h-screen flex items-center justify-center">
            {authResponse ? (
              <MainIndex />
            ) : (
              <RegisterForm whenCompletedSuccesfully={logInOrRegistered} />
            )}
          </main>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<Home />);
    </script>
  </body>
</html>
